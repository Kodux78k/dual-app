
<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Dual Infodose ‚Äî Portal</title>
<!-- üîπ SEO Base (p√°gina √∫nica, metas din√¢micas via JS por rota hash) -->
<link href="https://infodose.com.br/" id="canonical" rel="canonical"/>
<meta content="Portal oficial do Dual Infodose ‚Äî assistente, rituais e Kobllux em uma √∫nica p√°gina." id="desc" name="description"/>
<meta content="index,follow,max-image-preview:large" name="robots"/>
<meta content="telephone=no,email=no,address=no" name="format-detection"/>
<meta content="IE=edge" http-equiv="x-ua-compatible"/>
<!-- üîπ Open Graph / Twitter (atualizados via JS) -->
<meta content="website" id="og-type" property="og:type"/>
<meta content="Dual Infodose" id="og-site" property="og:site_name"/>
<meta content="Dual Infodose ‚Äî Portal" id="og-title" property="og:title"/>
<meta content="Portal oficial do Dual Infodose ‚Äî assistente, rituais e Kobllux." id="og-desc" property="og:description"/>
<meta content="https://infodose.com.br/" id="og-url" property="og:url"/>
<meta content="https://infodose.com.br/assets/og/cover.png" id="og-image" property="og:image"/>
<meta content="pt_BR" id="og-locale" property="og:locale"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Dual Infodose ‚Äî Portal" id="tw-title" name="twitter:title"/>
<meta content="Portal oficial do Dual Infodose ‚Äî assistente, rituais e Kobllux." id="tw-desc" name="twitter:description"/>
<meta content="https://infodose.com.br/assets/og/cover.png" id="tw-image" name="twitter:image"/>
<!-- üîπ Schema.org b√°sico para WebSite -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Dual Infodose",
    "url": "https://infodose.com.br",
    "inLanguage": "pt-BR",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://infodose.com.br/busca?q={query}",
      "query-input": "required name=query"
    }
  }
  </script>
<style>@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Space+Grotesk:wght@400;600&family=Noto+Sans+Symbols+2&display=swap');

:root {
  --bg: radial-gradient(120% 120% at 50% 0%, #0b0b12 0%, #0a0a0f 45%, #06060a 100%);
  --text: #e6e6e6;
  --muted: #bdbdbd;
  --glass: rgba(255,255,255,.06);
  --accent1: #00f6ff;
  --accent2: #ff00e6;
  --accent3: #9d00ff;
  --br: 14px;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: 'Space Grotesk', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  display: flex;
  flex-direction: column;
}

/* üîπ HEADER + MENU */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 24px;
  background: rgba(0,0,0,.4);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  position: sticky;
  
  z-index: 1000;
   top: 12px; }

.brand {
  font-family: 'Orbitron', sans-serif;
  font-weight: 800;
  font-size: 1.3rem;
  color: var(--accent1);
  text-shadow: 0 0 10px var(--accent1), 0 0 24px var(--accent2);
}

nav { display: flex; gap: 16px; }

nav a { font-family: 'Noto Sans Symbols 2', 'Space Grotesk', sans-serif;
  font-family: 'Orbitron', sans-serif;
  text-transform: uppercase;
  font-size: 0.9rem;
  padding: 10px 14px;
  color: var(--text);
  text-decoration: none;
  border-radius: 8px;
  position: relative;
  transition: all .3s ease;
}

nav a::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -4px;
  transform: translateX(-50%) scaleX(0);
  width: 60%;
  height: 2px;
  background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
  border-radius: 2px;
  transition: transform .3s ease;
}

nav a:hover {
  color: var(--accent2);
  text-shadow: 0 0 8px var(--accent2), 0 0 16px var(--accent3);
}

nav a:hover::after,
nav a[aria-current="page"]::after {
  transform: translateX(-50%) scaleX(1);
}

nav a[aria-current="page"] {
  color: var(--accent1);
  text-shadow: 0 0 10px var(--accent1), 0 0 24px var(--accent2);
}

main { max-width: 980px; margin: 24px auto; padding: 0 16px; width: 100%; }

.card {
  background: var(--glass);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: var(--br);
  padding: 18px;
  margin: 14px 0;
}

.grid { display: grid; grid-template-columns: 1fr; gap: 14px; }
@media (min-width: 860px) { .grid { grid-template-columns: repeat(2,1fr); } }

h1 { font-size: clamp(1.6rem, 2.4vw, 2.1rem); margin: .2rem 0 1rem; }
h2 { font-size: 1.1rem; margin: 1rem 0 .6rem; opacity: .9; }
.muted { color: var(--muted); }

footer { margin-top: auto; padding: 16px; border-top: 1px solid #1f1f27; opacity: .75; }
img.responsive { max-width: 100%; height: auto; border-radius: 10px; }

/* üîπ CTA BUTTON */
a.cta, button.cta {
  display: inline-block;
  border: none;
  background: linear-gradient(45deg, var(--accent1), var(--accent2), var(--accent3));
  color: #000;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  border-radius: 10px;
  padding: 12px 18px;
  cursor: pointer;
  box-shadow: 0 0 10px var(--accent1), 0 0 20px var(--accent2);
  transition: all .25s ease;
}
a.cta:hover, button.cta:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px var(--accent2), 0 0 30px var(--accent3);
}

:focus-visible { outline: 2px solid var(--accent1); outline-offset: 2px; }
@media (prefers-reduced-motion: reduce) { * { animation: none !important; transition: none !important; } }

/* Router sections */
section[data-route] { display: none; animation: fade .25s ease both; }
section[data-route].active { display: block; }
@keyframes fade { from { opacity: .6; transform: translateY(6px); } to { opacity: 1; transform: none; } }

/* Sandbox iframe */
.sandbox { width: 100%; height: 60vh; border: 1px solid rgba(255,255,255,.12); border-radius: 10px; background: #0b0b12; }


/* === Symbol Menu & Width Constraints === */
.nav-wrap{
  max-width:389px;
  width:100%;
  display:flex;
  justify-content:flex-end;
}
.nav-wrap nav{
  width:100%;
  max-width:389px;
  display:flex;
  gap:10px;
  justify-content:space-between;
  align-items:center;
}
nav a{
  font-size:1.25rem;
  min-width:44px;
  min-height:44px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  padding:8px;
}
nav a::after{
  bottom:-6px;
  width:36%;
  height:3px;
}
@media (max-width: 480px){
  header { padding: 12px 14px;    top: 12px; }
  .brand{ font-size:1.1rem; }
  .nav-wrap nav{ gap:8px; }
  nav a{ font-size:1.2rem; min-width:42px; min-height:42px; }
}


/* === Icon styles === */
nav a.icon-circle{
  border:1px solid rgba(255,255,255,.3);
  border-radius:50%;
}
nav a.icon-home{
  border:1px solid rgba(255,255,255,.3);
  border-radius:10px;
}
nav a.icon-rounded{
  border:1px solid rgba(255,255,255,.3);
  border-radius:8px;
}

/* Tooltips */
nav a[title]{
  position:relative;
}
nav a[title]:hover::before{
  content: attr(title);
  position:absolute;
  bottom:120%;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.85);
  color:#fff;
  padding:4px 8px;
  font-size:0.7rem;
  border-radius:6px;
  white-space:nowrap;
  pointer-events:none;
  box-shadow:0 0 6px rgba(0,0,0,.5);
}


/* Rectangular icons with padding + drop shadow + dividers */
.nav-wrap nav{
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.1);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.4);
  padding:4px;
}
.nav-wrap nav a{
  border:1px solid rgba(255,255,255,.2);
  border-radius:6px;
  padding:10px 14px;
  box-shadow:inset 0 0 4px rgba(255,255,255,.1), 0 2px 6px rgba(0,0,0,.5);
  backdrop-filter:blur(6px);
}
.nav-wrap nav a + a{
  border-left:1px solid rgba(255,255,255,.08);
}

/* Rectangular nav styling with padding, drop shadow, and dividers */
.nav-wrap nav{
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.1);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.4);
  padding:6px;
}
.nav-wrap nav a{
  border:1px solid rgba(255,255,255,.2);
  border-radius:8px;
  padding:12px 16px;
  box-shadow:inset 0 0 4px rgba(255,255,255,.08), 0 2px 6px rgba(0,0,0,.5);
  backdrop-filter:blur(6px);
}
.nav-wrap nav a + a{
  border-left:1px solid rgba(255,255,255,.08);
}

/* Tooltips improve spacing so they don't clip */
nav a[title]{ position:relative; }
nav a[title]:hover::before{
  bottom:110%;
}

/* === Loaders === */
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0%,100% { transform: scale(0.9); opacity:.7 } 50% { transform: scale(1.05); opacity:1 } }

/* Generic loader container inside nav buttons */
nav a { position: relative; overflow: visible; }
nav a .loader {
  position:absolute;
  inset: -6px -6px auto auto;
  width: 28px; height: 28px;
  pointer-events:none;
}
/* Kobllux special: rotating ring with vertical cut via conic-gradient */
nav a.kobllux .loader::before{
  content:"";
  position:absolute; inset:2px;
  border-radius:50%;
  background:
    conic-gradient(from 0deg, var(--accent1) 0 350deg, transparent 350deg 360deg);
  filter: drop-shadow(0 0 6px var(--accent2));
  animation: spin 1.2s linear infinite;
}
nav a.kobllux .loader::after{
  content:"‚ö°";
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  animation: pulse 1.2s ease-in-out infinite;
  font-size:16px;
  text-shadow: 0 0 6px var(--accent1), 0 0 12px var(--accent2);
}
/* Spiral inside (counter-rotate) */
nav a.kobllux .spiral {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:16px;
  animation: spin 1.6s linear infinite reverse;
  filter: drop-shadow(0 0 4px var(--accent3));
}

/* Click-to-load behavior for all buttons */
nav a.loading .loader,
nav a.loading .spiral { display:block; }
nav a .loader, nav a .spiral { display:none; }


/* ========== Custom Loaders ========== */
:root { --ld-size: 28px; --ld-c: var(--accent1); --ld-c2: var(--accent2); --ld-c3: var(--accent3); }
nav a { position: relative; overflow: visible; }

/* Base loader span placement (top-right inside button) */
nav a .loader { position:absolute; right:-8px; top:-8px; width: var(--ld-size); height: var(--ld-size); pointer-events:none; }
nav a.loading .loader, nav a.loading .spiral { display:block; }
nav a .loader, nav a .spiral { display:none; }

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0%,100% { transform: scale(0.9); opacity:.7 } 50% { transform: scale(1.05); opacity:1 } }

/* ----- Kobllux: ring with cut + lightning + spiral (existing, refined) ----- */
nav a.kobllux .loader::before{
  content:"";
  position:absolute; inset:2px;
  border-radius:50%;
  background:
    conic-gradient(from 0deg, var(--ld-c) 0 350deg, transparent 350deg 360deg);
  filter: drop-shadow(0 0 6px var(--ld-c2));
  animation: spin 1.2s linear infinite;
}
nav a.kobllux .loader::after{
  content:"‚ö°";
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  animation: pulse 1.2s ease-in-out infinite;
  font-size:16px;
  text-shadow: 0 0 6px var(--ld-c), 0 0 12px var(--ld-c2);
}
nav a.kobllux .spiral {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:16px;
  animation: spin 1.6s linear infinite reverse;
  filter: drop-shadow(0 0 4px var(--ld-c3));
}

/* ----- Home: line-drawn house (base, then roof) ----- */
nav a.home .loader { right: -10px; top: -10px; }
nav a.home .loader i { position:absolute; display:block; }
nav a.home .loader .base {
  left:6px; bottom:5px; width:18px; height:12px;
  border:2px solid var(--ld-c);
  border-top:2px solid transparent;
  transform-origin: left bottom;
  transform: scaleY(0) scaleX(0);
  animation: build-base 1.2s ease-in-out infinite;
  box-shadow: 0 0 8px var(--ld-c);
  border-radius: 3px;
}
@keyframes build-base {
  0%   { transform: scaleY(0) scaleX(0); }
  30%  { transform: scaleY(1) scaleX(0); }
  60%  { transform: scaleY(1) scaleX(1); }
  100% { transform: scaleY(0) scaleX(0); }
}
nav a.home .loader .roof {
  left:8px; top:3px; width:0; height:0;
  border-left:11px solid transparent;
  border-right:11px solid transparent;
  border-bottom:12px solid var(--ld-c);
  filter: drop-shadow(0 0 6px var(--ld-c2));
  transform: scaleX(0);
  transform-origin: center;
  animation: build-roof 1.2s ease-in-out infinite;
}
@keyframes build-roof {
  0%,40% { transform: scaleX(0); }
  70%    { transform: scaleX(1); }
  100%   { transform: scaleX(0); }
}

/* ----- Assistente: one user splits into two and merges ----- */
nav a.assist .loader::before,
nav a.assist .loader::after {
  content:"";
  position:absolute; top:6px; left:6px; width:16px; height:16px;
  background: radial-gradient(circle at 50% 40%, var(--ld-c) 35%, transparent 36%),
              radial-gradient(circle at 50% 90%, var(--ld-c) 30%, transparent 31%);
  border-radius:50%;
  filter: drop-shadow(0 0 6px var(--ld-c2));
  opacity:.95;
}
nav a.assist .loader::before {
  transform: translateX(0);
  animation: split-left 1.2s ease-in-out infinite;
}
nav a.assist .loader::after {
  transform: translateX(0);
  animation: split-right 1.2s ease-in-out infinite;
}
@keyframes split-left {
  0%,100% { transform: translateX(0) scale(1); opacity:1 }
  50%     { transform: translateX(-6px) scale(.95); opacity:.9 }
}
@keyframes split-right {
  0%,100% { transform: translateX(0) scale(1); opacity:1 }
  50%     { transform: translateX(6px) scale(.95); opacity:.9 }
}

/* ----- Rituais: book opening and closing ----- */
nav a.rituais .loader::before, nav a.rituais .loader::after {
  content:""; position:absolute; top:6px; left:8px; width:10px; height:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05));
  border:2px solid var(--ld-c);
  border-radius:2px;
  box-shadow: 0 0 6px var(--ld-c2);
  transform-origin: center;
}
nav a.rituais .loader::before {
  transform-origin: right center;
  animation: page-left 1.2s ease-in-out infinite;
}
nav a.rituais .loader::after {
  left: 18px;
  transform-origin: left center;
  animation: page-right 1.2s ease-in-out infinite;
}
@keyframes page-left  {
  0%,100% { transform: rotateY(0deg) translateX(0); }
  50%     { transform: rotateY(-40deg) translateX(-2px); }
}
@keyframes page-right {
  0%,100% { transform: rotateY(0deg) translateX(0); }
  50%     { transform: rotateY(40deg) translateX(2px); }
}

/* ----- Pill (brand) metamorphosis ----- */
.brand { position: relative; }
.brand .pill-loader {
  position:absolute; left:-6px; top: -22px; width: 22px; height: 32px;
  pointer-events:none;
  display: none;
}
.brand .pill-loader::before {
  content:""; position:absolute; inset:0;
  border:2px solid var(--ld-c);
  border-radius: 12px / 18px;
  background: transparent;
  animation: pill-morph 2s ease-in-out infinite;
  filter: drop-shadow(0 0 8px var(--ld-c));
}
.brand .pill-loader::after {
  content:""; position:absolute; top:2px; bottom:2px; left:50%;
  width:2px; transform: translateX(-50%);
  background: var(--ld-c2);
  box-shadow: 0 0 6px var(--ld-c2);
  animation: pill-cut 2s ease-in-out infinite;
}

@keyframes pill-morph {
  0%   { border-radius: 12px / 18px; width:22px; height:32px; opacity:1; }
  40%  { border-radius: 50%; width:28px; height:28px; opacity:.9; }
  45%  { opacity:0; }
  55%  { opacity:0; }
  60%  { border-radius: 50%; width:28px; height:28px; opacity:.9; }
  100% { border-radius: 12px / 18px; width:22px; height:32px; opacity:1; }
}
@keyframes pill-cut {
  0%   { opacity:1; }
  40%  { height:0; opacity:0; }
  60%  { height:0; opacity:0; }
  100% { opacity:1; }
}


/* ========== Custom Loaders ========== */
:root { --ld-size: 28px; --ld-c: var(--accent1); --ld-c2: var(--accent2); --ld-c3: var(--accent3); }
nav a { position: relative; overflow: visible; }

/* Base loader span placement (top-right inside button) */
nav a .loader { position:absolute; right:-8px; top:-8px; width: var(--ld-size); height: var(--ld-size); pointer-events:none; }
nav a.loading .loader, nav a.loading .spiral { display:block; }
nav a .loader, nav a .spiral { display:none; }

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0%,100% { transform: scale(0.9); opacity:.7 } 50% { transform: scale(1.05); opacity:1 } }

/* ----- Kobllux: ring with cut + lightning + spiral (existing, refined) ----- */
nav a.kobllux .loader::before{
  content:"";
  position:absolute; inset:2px;
  border-radius:50%;
  background:
    conic-gradient(from 0deg, var(--ld-c) 0 350deg, transparent 350deg 360deg);
  filter: drop-shadow(0 0 6px var(--ld-c2));
  animation: spin 1.2s linear infinite;
}
nav a.kobllux .loader::after{
  content:"‚ö°";
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  animation: pulse 1.2s ease-in-out infinite;
  font-size:16px;
  text-shadow: 0 0 6px var(--ld-c), 0 0 12px var(--ld-c2);
}
nav a.kobllux .spiral {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:16px;
  animation: spin 1.6s linear infinite reverse;
  filter: drop-shadow(0 0 4px var(--ld-c3));
}

/* ----- Home: line-drawn house (base, then roof) ----- */
nav a.home .loader { right: -10px; top: -10px; }
nav a.home .loader i { position:absolute; display:block; }
nav a.home .loader .base {
  left:6px; bottom:5px; width:18px; height:12px;
  border:2px solid var(--ld-c);
  border-top:2px solid transparent;
  transform-origin: left bottom;
  transform: scaleY(0) scaleX(0);
  animation: build-base 1.2s ease-in-out infinite;
  box-shadow: 0 0 8px var(--ld-c);
  border-radius: 3px;
}
@keyframes build-base {
  0%   { transform: scaleY(0) scaleX(0); }
  30%  { transform: scaleY(1) scaleX(0); }
  60%  { transform: scaleY(1) scaleX(1); }
  100% { transform: scaleY(0) scaleX(0); }
}
nav a.home .loader .roof {
  left:8px; top:3px; width:0; height:0;
  border-left:11px solid transparent;
  border-right:11px solid transparent;
  border-bottom:12px solid var(--ld-c);
  filter: drop-shadow(0 0 6px var(--ld-c2));
  transform: scaleX(0);
  transform-origin: center;
  animation: build-roof 1.2s ease-in-out infinite;
}
@keyframes build-roof {
  0%,40% { transform: scaleX(0); }
  70%    { transform: scaleX(1); }
  100%   { transform: scaleX(0); }
}

/* ----- Assistente: one user splits into two and merges ----- */
nav a.assist .loader::before,
nav a.assist .loader::after {
  content:"";
  position:absolute; top:6px; left:6px; width:16px; height:16px;
  background: radial-gradient(circle at 50% 40%, var(--ld-c) 35%, transparent 36%),
              radial-gradient(circle at 50% 90%, var(--ld-c) 30%, transparent 31%);
  border-radius:50%;
  filter: drop-shadow(0 0 6px var(--ld-c2));
  opacity:.95;
}
nav a.assist .loader::before {
  transform: translateX(0);
  animation: split-left 1.2s ease-in-out infinite;
}
nav a.assist .loader::after {
  transform: translateX(0);
  animation: split-right 1.2s ease-in-out infinite;
}
@keyframes split-left {
  0%,100% { transform: translateX(0) scale(1); opacity:1 }
  50%     { transform: translateX(-6px) scale(.95); opacity:.9 }
}
@keyframes split-right {
  0%,100% { transform: translateX(0) scale(1); opacity:1 }
  50%     { transform: translateX(6px) scale(.95); opacity:.9 }
}

/* ----- Rituais: book opening and closing ----- */
nav a.rituais .loader::before, nav a.rituais .loader::after {
  content:""; position:absolute; top:6px; left:8px; width:10px; height:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05));
  border:2px solid var(--ld-c);
  border-radius:2px;
  box-shadow: 0 0 6px var(--ld-c2);
  transform-origin: center;
}
nav a.rituais .loader::before {
  transform-origin: right center;
  animation: page-left 1.2s ease-in-out infinite;
}
nav a.rituais .loader::after {
  left: 18px;
  transform-origin: left center;
  animation: page-right 1.2s ease-in-out infinite;
}
@keyframes page-left  {
  0%,100% { transform: rotateY(0deg) translateX(0); }
  50%     { transform: rotateY(-40deg) translateX(-2px); }
}
@keyframes page-right {
  0%,100% { transform: rotateY(0deg) translateX(0); }
  50%     { transform: rotateY(40deg) translateX(2px); }
}

/* ----- Pill (brand) metamorphosis ----- */
.brand { position: relative; }
.brand .pill-loader {
  position:absolute; left:-6px; top: -22px; width: 22px; height: 32px;
  pointer-events:none;
  display: block;
}
.brand .pill-loader::before {
  content:""; position:absolute; inset:0;
  border:2px solid var(--ld-c);
  border-radius: 12px / 18px;
  background: transparent;
  animation: pill-morph 2s ease-in-out infinite;
  filter: drop-shadow(0 0 8px var(--ld-c));
}
.brand .pill-loader::after {
  content:""; position:absolute; top:2px; bottom:2px; left:50%;
  width:2px; transform: translateX(-50%);
  background: var(--ld-c2);
  box-shadow: 0 0 6px var(--ld-c2);
  animation: pill-cut 2s ease-in-out infinite;
}

@keyframes pill-morph {
  0%   { border-radius: 12px / 18px; width:22px; height:32px; opacity:1; }
  40%  { border-radius: 50%; width:28px; height:28px; opacity:.9; }
  45%  { opacity:0; }
  55%  { opacity:0; }
  60%  { border-radius: 50%; width:28px; height:28px; opacity:.9; }
  100% { border-radius: 12px / 18px; width:22px; height:32px; opacity:1; }
}
@keyframes pill-cut {
  0%   { opacity:1; }
  40%  { height:0; opacity:0; }
  60%  { height:0; opacity:0; }
  100% { opacity:1; }
}
</style>
</head>
<body>
<header>
<div class="brand" style="margin-right:32px;margin-right:32px;">üíä<span class="pill-loader"></span><span class="pill-loader"></span></div>
<div class="nav-wrap"><nav>
<a aria-label="Home" class="icon-circle home home" data-nav="/" href="#/" title="Home">üè†<span class="loader"><i class="base"></i><i class="roof"></i></span><span class="loader"><i class="base"></i><i class="roof"></i></span></a>
<a aria-label="Assistente" class="icon-circle assist assist" data-nav="/assistente" href="#/assistente" title="Assistente">üë•<span class="loader"></span><span class="loader"></span></a>
<a aria-label="Rituais" class="icon-circle rituais rituais" data-nav="/rituais" href="#/rituais" title="Rituais">üìñ<span class="loader"></span><span class="loader"></span></a>
<a aria-label="Kobllux" class="icon-circle kobllux kobllux kobllux" data-nav="/menu-kobllux" href="#/menu-kobllux" title="Kobllux">üåÄ<span class="loader"></span><span class="spiral">üåÄ</span><span class="loader"></span><span class="spiral">üåÄ</span></a>
</nav></div>
</header>
<main id="app">
<!-- Home -->
<section data-route="/">
<h1>Portal</h1>
<div class="grid">
<div class="card">
<p>Bem-vindo ao Dual Infodose. Escolha um caminho:</p>
<p><a class="cta" data-nav="/assistente" href="#/assistente">Ir para o Assistente</a></p>
</div>
<div class="card">
<h2>Roteamento Can√¥nico (vers√£o HTML √∫nico)</h2>
<p class="muted">Esta p√°gina usa rotas por <code>#hash</code> para evitar configura√ß√µes no servidor.<br/>
          SEO total por rota exige p√°ginas separadas, mas aqui deixamos metas din√¢micas e conte√∫do direto.</p>
</div>
</div>
</section>
<!-- Assistente -->
<section data-route="/assistente">
<h1>Assistente</h1>
<div class="card">
<p>Preview do app legado incorporado como sandbox (conte√∫do embutido nesta p√°gina √∫nica).</p>
<iframe class="sandbox" id="legacyFrame" title="Assistente (sandbox)"></iframe>
</div>
<div class="card">
<h2>Como migrar sem iframe</h2>
<p class="muted">Voc√™ pode substituir este preview por componentes nativos aqui mesmo, mantendo HTML √∫nico.</p>
</div>
</section>
<!-- Rituais -->
<section data-route="/rituais">
<h1>Rituais</h1>
<div class="card">
<p>Selecione um ritual para iniciar. (Conte√∫do can√¥nico direto, sem iframe.)</p>
<button class="cta" id="startRitual">Iniciar Ritual</button>
</div>
</section>
<!-- Kobllux -->
<section data-route="/menu-kobllux">
<h1>Kobllux</h1>
<div class="card">
<p>Interface simb√≥lica avan√ßada. Construa seus blocos aqui, mantendo a p√°gina √∫nica.</p>
</div>
</section>
</main>
<footer>¬© 2025 Infodose</footer>
<script>
  // ====== SPA Router (hash-based) + Metas din√¢micas ======
  const ROUTES = {
    "/": {"title":"Dual Infodose ‚Äî Portal","desc":"Portal oficial do Dual Infodose ‚Äî assistente, rituais e Kobllux.","path":"/"},
    "/assistente": {"title":"Assistente ‚Äî Dual Infodose","desc":"Assistente simb√≥lico com arqu√©tipos ativos, voz e rituais.","path":"/assistente"},
    "/rituais": {"title":"Rituais ‚Äî Dual Infodose","desc":"Rituais ativos do Dual Infodose ‚Äî ative arqu√©tipos e fluxos de cria√ß√£o.","path":"/rituais"},
    "/menu-kobllux": {"title":"Kobllux ‚Äî Dual Infodose","desc":"Kobllux ‚Äî interface simb√≥lica e avan√ßada do Dual Infodose.","path":"/menu-kobllux"}
  };

  function setActive(route){
    const sectionList = document.querySelectorAll('section[data-route]');
    sectionList.forEach(sec => sec.classList.toggle('active', sec.getAttribute('data-route')===route));

    // metas din√¢micas (efeito limitado para crawlers, mas √∫til para UX/share din√¢mico)
    const data = ROUTES[route] || ROUTES["/"];
    document.title = data.title;
    document.getElementById('desc').setAttribute('content', data.desc);
    const base = 'https://infodose.com.br';
    document.getElementById('canonical').setAttribute('href', base + data.path);
    document.getElementById('og-title').setAttribute('content', data.title);
    document.getElementById('og-desc').setAttribute('content', data.desc);
    document.getElementById('og-url').setAttribute('content', base + data.path);
    document.getElementById('tw-title').setAttribute('content', data.title);
    document.getElementById('tw-desc').setAttribute('content', data.desc);

    // nav highlight
    document.querySelectorAll('nav a[data-nav]').forEach(a=>{
      const r = a.getAttribute('data-nav');
      if(r===route) a.setAttribute('aria-current','page'); else a.removeAttribute('aria-current');
    });
  }

  function getRouteFromHash(){
    const h = location.hash.replace(/^#/,'');
    return ROUTES[h] ? h : (Object.keys(ROUTES).includes(h)?h:'/') || '/';
  }

  window.addEventListener('hashchange', () => setActive(getRouteFromHash()));
  window.addEventListener('DOMContentLoaded', () => {
    if(!location.hash) location.hash = "/";
    setActive(getRouteFromHash());

    // Embed do app legado via Blob (conte√∫do embutido em base64)
    try {
      const b64 = "PCFET0NUWVBFIGh0bWw+Cgo8aHRtbCBsYW5nPSJwdC1CUiI+CjxoZWFkPgo8bWV0YSBjaGFyc2V0PSJ1dGYtOCIvPgo8bWV0YSBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIiBuYW1lPSJ2aWV3cG9ydCIvPgoKPCEtLSDwn5S5IFNFTyBCYXNlIC0tPgo8bGluayByZWw9ImNhbm9uaWNhbCIgaHJlZj0iaHR0cHM6Ly9pbmZvZG9zZS5jb20uYnIvIj4KPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9IkR1YWwgSW5mb2Rvc2Ug4oCUIGFzc2lzdGVudGUgc2ltYsOzbGljbyBlIHJlc3BvbnNpdm8gcXVlIGF0aXZhIGFycXXDqXRpcG9zLCByaXR1YWlzIGUgZmx1eG9zIGRlIGNyaWHDp8Ojby4iPgo8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9ImluZGV4LGZvbGxvdyxtYXgtaW1hZ2UtcHJldmlldzpsYXJnZSI+CjxtZXRhIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iIGNvbnRlbnQ9InRlbGVwaG9uZT1ubyxlbWFpbD1ubyxhZGRyZXNzPW5vIj4KPG1ldGEgaHR0cC1lcXVpdj0ieC11YS1jb21wYXRpYmxlIiBjb250ZW50PSJJRT1lZGdlIj4KCjwhLS0g8J+UuSBPcGVuIEdyYXBoIC8gVHdpdHRlciAtLT4KPG1ldGEgcHJvcGVydHk9Im9nOnR5cGUiIGNvbnRlbnQ9IndlYnNpdGUiPgo8bWV0YSBwcm9wZXJ0eT0ib2c6c2l0ZV9uYW1lIiBjb250ZW50PSJEdWFsIEluZm9kb3NlIj4KPG1ldGEgcHJvcGVydHk9Im9nOnRpdGxlIiBjb250ZW50PSJEdWFsIEluZm9kb3NlIOKAlCBBc3Npc3RlbnRlIFNpbWLDs2xpY28iPgo8bWV0YSBwcm9wZXJ0eT0ib2c6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9IkF0aXZlIGFycXXDqXRpcG9zLCByaXR1YWlzIGUgZmx1eG9zIGRlIGNyaWHDp8OjbyBjb20gdW1hIGludGVyZmFjZSByw6FwaWRhIGUgcmVzcG9uc2l2YS4iPgo8bWV0YSBwcm9wZXJ0eT0ib2c6dXJsIiBjb250ZW50PSJodHRwczovL2luZm9kb3NlLmNvbS5ici8iPgo8bWV0YSBwcm9wZXJ0eT0ib2c6aW1hZ2UiIGNvbnRlbnQ9Imh0dHBzOi8vaW5mb2Rvc2UuY29tLmJyL2Fzc2V0cy9vZy9jb3Zlci5wbmciPgo8bWV0YSBwcm9wZXJ0eT0ib2c6bG9jYWxlIiBjb250ZW50PSJwdF9CUiI+CjxtZXRhIG5hbWU9InR3aXR0ZXI6Y2FyZCIgY29udGVudD0ic3VtbWFyeV9sYXJnZV9pbWFnZSI+CjxtZXRhIG5hbWU9InR3aXR0ZXI6dGl0bGUiIGNvbnRlbnQ9IkR1YWwgSW5mb2Rvc2Ug4oCUIEFzc2lzdGVudGUgU2ltYsOzbGljbyI+CjxtZXRhIG5hbWU9InR3aXR0ZXI6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9IkF0aXZlIGFycXXDqXRpcG9zLCByaXR1YWlzIGUgZmx1eG9zIGRlIGNyaWHDp8Ojby4iPgo8bWV0YSBuYW1lPSJ0d2l0dGVyOmltYWdlIiBjb250ZW50PSJodHRwczovL2luZm9kb3NlLmNvbS5ici9hc3NldHMvb2cvY292ZXIucG5nIj4KCjwhLS0g8J+UuSBQV0EvQXBwbGUgLS0+CjxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iYXNzZXRzL2ljb25zL2ljb24tMTkyLnBuZyI+CjxtZXRhIG5hbWU9ImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGUiIGNvbnRlbnQ9InllcyI+CjxtZXRhIG5hbWU9ImFwcGxlLW1vYmlsZS13ZWItYXBwLXN0YXR1cy1iYXItc3R5bGUiIGNvbnRlbnQ9ImJsYWNrLXRyYW5zbHVjZW50Ij4KCjwhLS0g8J+UuSBQZXJmb3JtYW5jZSBIaW50cyAtLT4KPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQiIGNyb3Nzb3JpZ2luPgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vb3BlbnJvdXRlci5haSIgY3Jvc3NvcmlnaW4+CjxsaW5rIHJlbD0iZG5zLXByZWZldGNoIiBocmVmPSIvL29wZW5yb3V0ZXIuYWkiPgo8bGluayByZWw9InByZWxvYWQiIGFzPSJpbWFnZSIgaHJlZj0iYXNzZXRzL2ljb25zLzNEX2xvZ29fRHVhbF9JbmZvZG9zZV8xMC5wbmciIGltYWdlc3Jjc2V0PSJhc3NldHMvaWNvbnMvM0RfbG9nb19EdWFsX0luZm9kb3NlXzEwLnBuZyI+Cgo8IS0tIPCflLkgU3RydWN0dXJlZCBEYXRhIC0tPgo8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iPgp7CiAgIkBjb250ZXh0IjogImh0dHBzOi8vc2NoZW1hLm9yZyIsCiAgIkBncmFwaCI6IFt7CiAgICAiQHR5cGUiOiAiT3JnYW5pemF0aW9uIiwKICAgICJuYW1lIjogIkluZm9kb3NlIiwKICAgICJ1cmwiOiAiaHR0cHM6Ly9pbmZvZG9zZS5jb20uYnIiLAogICAgImxvZ28iOiAiaHR0cHM6Ly9pbmZvZG9zZS5jb20uYnIvYXNzZXRzL29nL2NvdmVyLnBuZyIKICB9LHsKICAgICJAdHlwZSI6ICJXZWJTaXRlIiwKICAgICJuYW1lIjogIkR1YWwgSW5mb2Rvc2UiLAogICAgInVybCI6ICJodHRwczovL2luZm9kb3NlLmNvbS5iciIsCiAgICAiaW5MYW5ndWFnZSI6ICJwdC1CUiIsCiAgICAicG90ZW50aWFsQWN0aW9uIjogW3sKICAgICAgIkB0eXBlIjogIlNlYXJjaEFjdGlvbiIsCiAgICAgICJ0YXJnZXQiOiAiaHR0cHM6Ly9pbmZvZG9zZS5jb20uYnIvYnVzY2E/cT17cXVlcnl9IiwKICAgICAgInF1ZXJ5LWlucHV0IjogInJlcXVpcmVkIG5hbWU9cXVlcnkiCiAgICB9XQogIH1dCn0KPC9zY3JpcHQ+Cjx0aXRsZT5EdWFsLkluZm9kb3NlPC90aXRsZT4KPGxpbmsgaHJlZj0ibWFuaWZlc3QuanNvbiIgcmVsPSJtYW5pZmVzdCIvPgo8bWV0YSBjb250ZW50PSIjMDAwMDAwIiBuYW1lPSJ0aGVtZS1jb2xvciIvPgo8bGluayBocmVmPSJhc3NldHMvaWNvbnMvaWNvbi0xOTIucG5nIiByZWw9Imljb24iIHR5cGU9ImltYWdlL3BuZyIvPgo8c3R5bGU+CiAgICAvKiDigJTigJTigJQgU0VVIENTUyBJTlRFR1JBTCAoYWp1c3Rlcykg4oCU4oCU4oCUICovCiAgICA6cm9vdCB7CiAgICAgIC0tYmc6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICMwMDAsICMxYTFhMWEpOwogICAgICAtLXRleHQ6ICNkN2Q3ZDc7CiAgICAgIC0tZmFzdDogLjRzOyAtLW1lZDogLjhzOyAtLXNsb3c6IDEuOHM7CiAgICB9CiAgICBib2R5LmxpZ2h0IHsgLS1iZzogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjNjY2LCNlMGUwZTApOyAtLXRleHQ6IzQ0NDsgfQogICAgYm9keS5tZWRpdW17IC0tYmc6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIzU1NSwjMzMzKTsgLS10ZXh0OiNlZWU7IH0KICAgIGJvZHkudmliZSAgeyAtLWJnOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMwMGQ4ZDgsI2Q4MDBkOCk7IC0tdGV4dDojZmZmOyB9CiAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXJnaW46MDtwYWRkaW5nOjB9CiAgICBodG1sLGJvZHl7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvdmVyZmxvdzpoaWRkZW59CiAgICBib2R5ewogICAgICBkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjsKICAgICAgcGFkZGluZzowcHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Y29sb3I6dmFyKC0tdGV4dCk7CiAgICAgIGZvbnQtZmFtaWx5OidNb250c2VycmF0JyxzYW5zLXNlcmlmOwogICAgICB0cmFuc2l0aW9uOmJhY2tncm91bmQgdmFyKC0tc2xvdyksY29sb3IgdmFyKC0tc2xvdyk7CiAgICAgIGFuaW1hdGlvbjpmYWRlSW4gdmFyKC0tc2xvdykgZWFzZSBmb3J3YXJkczsKICAgIH0KICAgIEBrZXlmcmFtZXMgZmFkZUlue2Zyb217b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDIwcHgpfXRve29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19CiAgICBAa2V5ZnJhbWVzIGNsaWNrUHVsc2V7MCUsMTAwJXtvcGFjaXR5OjF9NTAle29wYWNpdHk6MC45fX0KICAgIEBrZXlmcmFtZXMgZXhwYW5kRm9vdGVyezAlLDEwMCV7dHJhbnNmb3JtOnNjYWxlKDEpfTUwJXt0cmFuc2Zvcm06c2NhbGUoMC45Nil9fQogICAgQGtleWZyYW1lcyBtb3ZlR3JhZGllbnR7MCV7YmFja2dyb3VuZC1wb3NpdGlvbjowJSA1MCV9MTAwJXtiYWNrZ3JvdW5kLXBvc2l0aW9uOjIwMCUgNTAlfX0KICAgIEBrZXlmcmFtZXMgcHVsc2V7MCUsMTAwJXt0cmFuc2Zvcm06c2NhbGUoMSl9NTAle3RyYW5zZm9ybTpzY2FsZSgxLjAxMil9fQogICAgI3RoZW1lVG9nZ2xlewogICAgICBwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NDBweDtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTsKICAgICAgd2lkdGg6MzBweDtoZWlnaHQ6MzBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLXRleHQpOwogICAgICBib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O29wYWNpdHk6LjM7CiAgICAgIGN1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246b3BhY2l0eSB2YXIoLS1tZWQpLGJvcmRlci1jb2xvciB2YXIoLS1tZWQpOwogICAgICB6LWluZGV4OjEwOwogICAgfQogICAgI3RoZW1lVG9nZ2xlOmhvdmVye29wYWNpdHk6Ljh9CiAgICAjcGFydGljbGVzLWpze3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7ei1pbmRleDowfQogICAgLnN2Zy1jb250YWluZXJ7CiAgICAgIHBvc2l0aW9uOmFic29sdXRlO3RvcDoyMjBweDtsZWZ0OjUwJTt3aWR0aDoxODBweDtoZWlnaHQ6MTgwcHg7CiAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO3otaW5kZXg6MTsKICAgICAgZmlsdGVyOmRyb3Atc2hhZG93KDAgMCAxMHB4IHJnYmEoMCwyNTUsMjU1LDAuMTUpKTsKICAgICAgdHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLXNsb3cpOwogICAgfQogICAgLnN2Zy1jb250YWluZXIuZmFkaW5ne29wYWNpdHk6MH0KICAgIC5zdmctY29udGFpbmVyIG9iamVjdHt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbjsKICAgICAgYW5pbWF0aW9uOnB1bHNlIDZzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogICAgfQogICAgI2Fzc2lzdGFudE5hbWV7dG9wOjE5OXB4O2ZvbnQtc2l6ZToxLjFlbTtmb250LXdlaWdodDo2MDA7b3BhY2l0eTouODsKICAgICAgdHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLXNsb3cpOwogICAgfQogICAgLnJlc3BvbnNlLWNvbnRhaW5lcnsKICAgICAgcG9zaXRpb246Zml4ZWQ7bGVmdDoyMHB4O3JpZ2h0OjIwcHg7Ym90dG9tOjE1NnB4O3BhZGRpbmc6MTJweDsKICAgICAgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMyk7YmFja2Ryb3AtZmlsdGVyOmJsdXIoOHB4KTsKICAgICAgYm9yZGVyLXJhZGl1czoyMHB4O21heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDIwMHB4KTsKICAgICAgb3ZlcmZsb3cteTphdXRvO3otaW5kZXg6OTk5O3RyYW5zaXRpb246YmFja2dyb3VuZCB2YXIoLS1zbG93KTsKICAgICAgYW5pbWF0aW9uOmZhZGVJbiB2YXIoLS1zbG93KSBlYXNlIGZvcndhcmRzOwogICAgfQogICAgYm9keS5saWdodCAgLnJlc3BvbnNlLWNvbnRhaW5lcntiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4zKX0KICAgIGJvZHkubWVkaXVtIC5yZXNwb25zZS1jb250YWluZXJ7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMil9CiAgICBib2R5LnZpYmUgICAucmVzcG9uc2UtY29udGFpbmVye2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjIpfQogICAgLnBhZ2VzLXdyYXBwZXJ7dHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLXNsb3cpLGhlaWdodCB2YXIoLS1zbG93KTt9CiAgICAucGFnZXMtd3JhcHBlci5jb2xsYXBzZWR7ZGlzcGxheTpub25lfQogICAgLnBhZ2V7ZGlzcGxheTpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgdmFyKC0tc2xvdyl9CiAgICAucGFnZS5hY3RpdmV7ZGlzcGxheTpibG9jaztvcGFjaXR5OjF9CiAgICAucGFnZS5pbml0aWFse2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgaGVpZ2h0OjEwMCU7dGV4dC1hbGlnbjpjZW50ZXI7CiAgICB9CiAgICAuZm9vdGVyLXRleHR7CiAgICAgIGRpc3BsYXk6YmxvY2s7bWFyZ2luOjEycHggYXV0bztwYWRkaW5nOjZweCAxMnB4OwogICAgICBiYWNrZ3JvdW5kOnZhcigtLWJnKTtvcGFjaXR5Oi41O2NvbG9yOnZhcigtLXRleHQpOwogICAgICBmb250LXNpemU6MC44ZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zdHlsZTppdGFsaWM7CiAgICAgIGJvcmRlci1yYWRpdXM6MTJweDtjdXJzb3I6cG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLXNsb3cpLHRyYW5zZm9ybSB2YXIoLS1zbG93KTsKICAgICAgYW5pbWF0aW9uOm1vdmVHcmFkaWVudCA4cyBsaW5lYXIgaW5maW5pdGU7CiAgICB9CiAgICAuZm9vdGVyLXRleHQubG9hZGluZ3tiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IWltcG9ydGFudDtiYWNrZHJvcC1maWx0ZXI6bm9uZSFpbXBvcnRhbnR9CiAgICAuZm9vdGVyLXRleHQubG9hZGluZyBzcGFue2JhY2tncm91bmQ6bm9uZSFpbXBvcnRhbnR9CiAgICAuZm9vdGVyLXRleHQ6aG92ZXJ7b3BhY2l0eTouNn0KICAgIC5mb290ZXItdGV4dC5hY3RpdmV7b3BhY2l0eTouODthbmltYXRpb246ZXhwYW5kRm9vdGVyIHZhcigtLW1lZCkgZWFzZS1vdXR9CiAgICAucmVzcG9uc2UtY29udHJvbHN7CiAgICAgIGRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7CiAgICAgIG1hcmdpbi10b3A6MTVweDtwYWRkaW5nLXRvcDoxMHB4OwogICAgICBib3JkZXItdG9wOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMik7CiAgICB9CiAgICBib2R5LmxpZ2h0ICAucmVzcG9uc2UtY29udHJvbHN7Ym9yZGVyLXRvcC1jb2xvcjpyZ2JhKDAsMCwwLDAuMil9CiAgICBib2R5Lm1lZGl1bSAucmVzcG9uc2UtY29udHJvbHN7Ym9yZGVyLXRvcC1jb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LDAuMil9CiAgICBib2R5LnZpYmUgICAucmVzcG9uc2UtY29udHJvbHN7Ym9yZGVyLXRvcC1jb2xvcjpyZ2JhKDAsMCwwLDAuNCl9CiAgICAuY29udHJvbC1idXR0b25zLC5wYWdpbmF0aW9ue2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHh9CiAgICAuY29weS1idXR0b24sLnBhc3RlLWJ1dHRvbiwudG9nZ2xlLWJ1dHRvbiwua2l0dHktYnV0dG9uewogICAgICB3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTJweDsKICAgICAgYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpO2Rpc3BsYXk6ZmxleDsKICAgICAgYWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Y3Vyc29yOnBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246YmFja2dyb3VuZCB2YXIoLS1mYXN0KSxvcGFjaXR5IHZhcigtLXNsb3cpO29wYWNpdHk6Ljc7CiAgICB9CiAgICAudG9nZ2xlLWJ1dHRvbiwua2l0dHktYnV0dG9ue2JvcmRlci1yYWRpdXM6NTAlfQogICAgLmNvcHktYnV0dG9uOmhvdmVyLC5wYXN0ZS1idXR0b246aG92ZXIsCiAgICAudG9nZ2xlLWJ1dHRvbjpob3Zlciwua2l0dHktYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjE1KX0KICAgIC50b2dnbGUtYnV0dG9uLmFjdGl2ZSwua2l0dHktYnV0dG9uLmFjdGl2ZXtvcGFjaXR5OjF9CiAgICAucGFnaW5hdGlvbiBidXR0b24gewogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg0NWRlZywgIzBmZiwgI2YwZik7CiAgICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgZm9udC1zaXplOiAxLjJlbTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gdmFyKC0tZmFzdCk7CiAgICB9CiAgICAucGFnaW5hdGlvbiBidXR0b246aG92ZXJ7dHJhbnNmb3JtOnNjYWxlKDEuMil9CiAgICAucmVzcG9uc2UtYmxvY2t7CiAgICAgIG1hcmdpbjoxcmVtIDA7cGFkZGluZzoxLjhyZW07Ym9yZGVyLXJhZGl1czoxMnB4OwogICAgICBsaW5lLWhlaWdodDoxLjg7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuOwogICAgICBhbmltYXRpb246ZmFkZUluIHZhcigtLXNsb3cpIGVhc2UgZm9yd2FyZHMscHVsc2UgMTJzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogICAgICB0cmFuc2l0aW9uOmJveC1zaGFkb3cgdmFyKC0tZmFzdCksdHJhbnNmb3JtIHZhcigtLWZhc3QpOwogICAgfQogICAgLnJlc3BvbnNlLWJsb2NrOmhvdmVye2JveC1zaGFkb3c6MCAwIDE1cHggcmdiYSgwLDI1NSwyNTUsLjQpfQogICAgLnJlc3BvbnNlLWJsb2NrLmNsaWNrZWR7YW5pbWF0aW9uOmNsaWNrUHVsc2UgdmFyKC0tbWVkKSBlYXNlLW91dH0KICAgIC5yZXNwb25zZS1ibG9jay5leHBhbmRlZHsKICAgICAgdHJhbnNmb3JtOnNjYWxlKDEuMDMpO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNik7ei1pbmRleDoyOwogICAgfQogICAgLmludHJve2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDEzNWRlZyxyZ2JhKDAsMjU1LDI1NSwuMikscmdiYSgwLDEwMCwxMDAsLjEpKTtib3JkZXItbGVmdDo0cHggc29saWQgIzBmZn0KICAgIC5taWRkbGV7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLHJnYmEoMjU1LDI1NSwyNTUsLjA1KSxyZ2JhKDUwLDUwLDUwLC4xKSk7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjQpfQogICAgLmVuZGluZ3tiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMzVkZWcscmdiYSgyNTUsMCwyNTUsLjIpLHJnYmEoMTAwLDAsMTAwLC4xKSk7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICNmMGZ9CiAgICAuaW5wdXQtY29udGFpbmVyewogICAgICBwb3NpdGlvbjpmaXhlZDtsZWZ0OjIwcHg7cmlnaHQ6MjBweDtib3R0b206OTBweDsKICAgICAgZGlzcGxheTpmbGV4O2dhcDo2cHg7ei1pbmRleDoyOwogICAgfQogICAgLmlucHV0LWNvbnRhaW5lciBpbnB1dHsKICAgICAgZmxleDoxO3BhZGRpbmc6MTBweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjIwcHg7CiAgICAgIGJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMSk7Y29sb3I6aW5oZXJpdDtmb250LXNpemU6MTZweDsKICAgICAgdHJhbnNpdGlvbjpiYWNrZ3JvdW5kIHZhcigtLWZhc3QpO29wYWNpdHk6MC43OwogICAgfQogICAgLmlucHV0LWNvbnRhaW5lciBpbnB1dDpmb2N1c3tiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjIpfQogICAgLmlucHV0LWNvbnRhaW5lciBidXR0b257CiAgICAgIHdpZHRoOjYwcHg7aGVpZ2h0OjYwcHg7Ym9yZGVyOm5vbmU7CiAgICAgIGJhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDQyZGVnLCMwZmYsI2YwZik7CiAgICAgIGJhY2tncm91bmQtY2xpcDp0ZXh0Oy13ZWJraXQtYmFja2dyb3VuZC1jbGlwOnRleHQ7CiAgICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOnRyYW5zcGFyZW50OwogICAgICBmb250LXNpemU6NDhweDtjdXJzb3I6cG9pbnRlcjthbmltYXRpb246cHVsc2UgMnMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7CiAgICAgIGRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjsKICAgICAgdHJhbnNpdGlvbjp0cmFuc2Zvcm0gdmFyKC0tbWVkKTtvcGFjaXR5Oi43OwogICAgfQogICAgLmlucHV0LWNvbnRhaW5lciBidXR0b246aG92ZXJ7dHJhbnNmb3JtOnNjYWxlKDEuMSl9CiAgICAubG9naW4tY29udGFpbmVyewogICAgICBwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTsKICAgICAgd2lkdGg6MzAwcHg7cGFkZGluZzoxLjVyZW0gMXJlbTtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjA0KTsKICAgICAgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xNSk7Ym9yZGVyLXJhZGl1czoxMHB4OwogICAgICBiYWNrZHJvcC1maWx0ZXI6Ymx1cig4cHgpO3otaW5kZXg6MTA7ZGlzcGxheTpub25lOwogICAgfQogICAgLmxvZ2luLWNvbnRhaW5lci5hY3RpdmV7ZGlzcGxheTpibG9ja30KICAgIC5sb2dpbi1jb250YWluZXIgaW5wdXR7CiAgICAgIHdpZHRoOjEwMCU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZTsKICAgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMyk7CiAgICAgIG1hcmdpbjouOHJlbSAwO3BhZGRpbmc6LjRyZW0gMDtmb250LXNpemU6Ljk1ZW07Y29sb3I6I2ZmZjsKICAgIH0KICAgIC5sb2dpbi1jb250YWluZXIgaW5wdXQ6OnBsYWNlaG9sZGVye2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjUpfQogICAgLmxvZ2luLWNvbnRhaW5lciBidXR0b257CiAgICAgIHdpZHRoOjEwMCU7bWFyZ2luLXRvcDoxcmVtO3BhZGRpbmc6LjVyZW0gMDsKICAgICAgYm9yZGVyOjFweCBzb2xpZCAjMGZmO2JvcmRlci1yYWRpdXM6OHB4OwogICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2ZvbnQtc2l6ZTouOTVlbTtjb2xvcjojMGZmO2N1cnNvcjpwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOmJhY2tncm91bmQgLjI1cyxjb2xvciAuMjVzOwogICAgfQogICAgLmxvZ2luLWNvbnRhaW5lciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojMGZmO2NvbG9yOiMwMDB9CiAgICAKICAgIC5yZXNwb25zZS1ibG9jayB7CiAgbWFyZ2luOiAycmVtIDA7CiAgcGFkZGluZzogMS4zcmVtOwogIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYW5pbWF0aW9uOiBmYWRlSW4gMXMgZWFzZSBmb3J3YXJkcywgcHVsc2UgMTJzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0Owp9CgoucmVzcG9uc2UtYmxvY2suaW50cm8gewogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMCwyNTUsMjU1LC4yKSwgcmdiYSgwLDEwMCwxMDAsLjEpKTsKICBib3JkZXItbGVmdDogNHB4IHNvbGlkICMwZmY7Cn0KLnJlc3BvbnNlLWJsb2NrLm1pZGRsZSB7CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgyNTUsMjU1LDI1NSwuMDUpLCByZ2JhKDUwLDUwLDUwLC4xKSk7CiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC40KTsKfQoucmVzcG9uc2UtYmxvY2suZW5kaW5nIHsKICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDI1NSwwLDI1NSwuMiksIHJnYmEoMTAwLDAsMTAwLC4xKSk7CiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjBmOwp9Ci5yZXNwb25zZS1ibG9jay5leHBhbmRlZCB7CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjAzKTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC42KTsKICB6LWluZGV4OiAyOwp9Ci5zeW1ib2wtYnRuIHsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDI1NSwgMjU1LCAwLjEpOwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMjU1LCAyNTUsIDAuMik7CiAgY29sb3I6ICMwZmY7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIHBhZGRpbmc6IDJweCA2cHg7CiAgbWFyZ2luOiAycHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZvbnQtc2l6ZTogMC45ZW07CiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjNzIGVhc2U7Cn0KLnN5bWJvbC1idG46aG92ZXIgewogIGJhY2tncm91bmQ6IHJnYmEoMCwgMjU1LCAyNTUsIDAuMyk7Cn0KICAgIC8qIOKAlOKAlOKAlOKAlOKAlCBGSU0gRE8gQ1NTIOKAlOKAlOKAlOKAlOKAlCAqLwogIAoKLnJlc3BvbnNlLWNvbnRhaW5lciB7CiAgYm90dG9tOiA5OXB4ICFpbXBvcnRhbnQ7Cn0KCi5pbnB1dC1jb250YWluZXIuaGlkZGVuLAouY29udHJvbC1idXR0b25zLmhpZGRlbiwKLnBhZ2luYXRpb24uaGlkZGVuIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0KCi5mb290ZXItdGV4dC5tb3ZlLXRvLWJvdHRvbSB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDIwcHg7CiAgcmlnaHQ6IDIwcHg7CiAgYm90dG9tOiAxMnB4OwogIG1hcmdpbjogMCBhdXRvOwogIHotaW5kZXg6IDk5OTk5OwogIGFuaW1hdGlvbjogbW92ZUZvb3RlckRvd24gdmFyKC0tZmFzdCkgZWFzZS1vdXQgZm9yd2FyZHM7Cn0KCkBrZXlmcmFtZXMgbW92ZUZvb3RlckRvd24gewogIGZyb20geyBib3R0b206IDY5cHg7IG9wYWNpdHk6IDAuNTsgfQogIHRvIHsgYm90dG9tOiAxMnB4OyBvcGFjaXR5OiAxOyB9Cn0KCgouaW5wdXQtY29udGFpbmVyIHsKICBib3R0b206IDMwcHggIWltcG9ydGFudDsKfQoKI2J0bi1leHBhbmRpci1yaXR1YWwgewogIGJvdHRvbTogMjEwcHggIWltcG9ydGFudDsKfQo8L3N0eWxlPgo8c3R5bGU+CiAgICBib2R5IHsKICAgICAgbWFyZ2luOiAwOwogICAgICBoZWlnaHQ6IDEwMHZoOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0KTsKICAgICAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0Jywgc2Fucy1zZXJpZjsKICAgIH0KCiAgICAuY29udGVudCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CgogICAgaWZyYW1lIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBvcGFjaXR5OiAwOwogICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNnMgZWFzZTsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB6LWluZGV4OiAxOwogICAgfQoKICAgIGlmcmFtZS5hY3RpdmUgewogICAgICBvcGFjaXR5OiAxOwogICAgfQoKICAgIC5zeW1ib2wtYmFyIHsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICB0b3A6IDM5JTsKICAgICAgcmlnaHQ6IDE1cHg7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAxMnB4OwogICAgICB6LWluZGV4OiA0MDsKICAgIH0KCiAgICAuc3ltYm9sLWJ1dHRvbiB7CiAgICAgIHdpZHRoOiAyNnB4OwogICAgICBoZWlnaHQ6IDI2cHg7CiAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTsKICAgICAgb3BhY2l0eTogMC43OwogICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLCBiYWNrZ3JvdW5kIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuc3ltYm9sLWJ1dHRvbjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOwogICAgfQoKICAgIC5sb2NrLWJ1dHRvbiB7CiAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgYm90dG9tOiA0M3B4OwogICAgICBsZWZ0OiA1MCU7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgd2lkdGg6IDI4cHg7CiAgICAgIGhlaWdodDogMjhweDsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTsKICAgICAgei1pbmRleDogMTgzMDAwOwogICAgfQoKICAgIC8qIEJvdMO1ZXMgZGUgYcOnw6NvICovCiAgICAjdXBsb2FkQ29tcG9uZW50QnRuLAogICAgI3JlbW90ZUNvbXBvbmVudEJ0biwKICAgICN0b2dnbGVEZWNvZGVyQnRuIHsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICBsZWZ0OiAxMnB4OwogICAgICB6LWluZGV4OiA5MDAwMDsKICAgICAgcGFkZGluZzogNHB4OwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmcpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICBmb250LXNpemU6IDAuOWVtOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig2cHgpOwogICAgICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsKCiAgICAgIGJveC1zaGFkb3c6IDAgMCA0cHggcmdiYSgwLDI1NSwyNTUsMC4yKSwgMCAwIDhweCByZ2JhKDI1NSwwLDI1NSwwLjIpOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgfQoKICAgCiAgICAjdXBsb2FkQ29tcG9uZW50QnRuIHsgdG9wOiAzMzBweDsgfQogICAgI3JlbW90ZUNvbXBvbmVudEJ0biB7IHRvcDogMzcwcHg7IH0KICAgICN0b2dnbGVEZWNvZGVyQnRuIHsgdG9wOiA0MTBweDsgfQoKICAgICN1cGxvYWRDb21wb25lbnRCdG46aG92ZXIsCiAgICAjcmVtb3RlQ29tcG9uZW50QnRuOmhvdmVyLAogICAgI3RvZ2dsZURlY29kZXJCdG46aG92ZXIgewogICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDI1NSwgMjU1LCAwLjIpOwogICAgfQoKICAgICNkZWNvZGVyQm94IHsKICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICB0b3A6IDE0MHB4OwogICAgICBsZWZ0OiA1MCU7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjYpOwogICAgICBwYWRkaW5nOiAxcmVtOwogICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOHB4KTsKICAgICAgei1pbmRleDogNzA7CiAgICB9CgogICAgI2RlY29kZXJCb3ggaW5wdXQgewogICAgICBwYWRkaW5nOiAwLjZyZW07CiAgICAgIHdpZHRoOiAyMDBweDsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGZvbnQtc2l6ZTogMWVtOwogICAgfQoKICAgICNkZWNvZGVyQm94IGJ1dHRvbiB7CiAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMjU1LDI1NSwwLjIpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQoKICAgIG15LWZyYW1lLWxvYWRlcjo6cGFydChjb250YWluZXIpIHsKICAgICAgd2lkdGg6IDkwJTsKICAgICAgaGVpZ2h0OiA4NSU7CiAgICAgIHotaW5kZXg6IDg7CiAgICB9CiAgCgojYnRuLWV4cGFuZGlyLXJpdHVhbCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGJvdHRvbTogMzNweDsKICAKICB6LWluZGV4OiA5OTk5OTsKYm9yZGVyLXJhZGl1czo1MCU7CgogIGZvbnQtc2l6ZTogMThweDsKYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoNDJkZWcsIzBmZiwjZjBmKTsKICAgICAgYmFja2dyb3VuZC1jbGlwOnRleHQ7LXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6dGV4dDsKICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6dHJhbnNwYXJlbnQ7CgoKICBib3JkZXI6bm9uZQoKICBjdXJzb3I6IHBvaW50ZXI7CiAgICBvcGFjaXR5OiAwLjU7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGVhc2UsIHRyYW5zZm9ybSAwLjJzIGVhc2U7Cn0KI2J0bi1leHBhbmRpci1yaXR1YWw6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwp9CiNidG4tZXhwYW5kaXItcml0dWFsIHsgcmlnaHQ6IDM1cHg7IH0KQGtleWZyYW1lcyBwdWxzZSB7CiAgMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAwLjQ7IH0KICA1MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMDIxKTsgb3BhY2l0eTogMTsgfQogIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAwLjQ7IH0KfQoKPC9zdHlsZT4KCjxzdHlsZT4KLnVwbG9hZC1zeW1ib2xpYy1idXR0b24gewogIHdpZHRoOiAzNnB4OwogIGhlaWdodDogMzZweDsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIGJhY2tncm91bmQ6IHZhcigtLWJnKTsKICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDI1NSwyNTUsMC4yKTsKICBib3gtc2hhZG93OiAwIDAgOHB4IHJnYmEoMCwyNTUsMjU1LDAuMiksIDAgMCAxMnB4IHJnYmEoMjU1LDAsMjU1LDAuMik7CiAgZm9udC1zaXplOiAxNnB4OwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKfQoudXBsb2FkLXN5bWJvbGljLWJ1dHRvbjpob3ZlciB7CiAgYmFja2dyb3VuZDogcmdiYSgwLDI1NSwyNTUsMC4yKTsKICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7CiAgYm94LXNoYWRvdzogMCAwIDEycHggcmdiYSgwLDI1NSwyNTUsMC40KTsKfQo8L3N0eWxlPgoKCjxzdHlsZT4KI2FkdmFuY2VkVG9nZ2xlT3B0aW9ucyBpbnB1dCwKI2FkdmFuY2VkVG9nZ2xlT3B0aW9ucyBzZWxlY3QgewogIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7CiAgZm9udC1zaXplOiAwLjllbTsKICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTsKfQojYWR2YW5jZWRUb2dnbGVPcHRpb25zIGJ1dHRvbjpob3ZlciB7CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKICBib3gtc2hhZG93OiAwIDAgMTJweCByZ2JhKDAsMjU1LDI1NSwwLjQpOwp9CgovKiA9PT0gU3VwZXJQYXRjaDogQm90w6NvIFJpdHVhbCArIEExMXkgKyBNb3Rpb24gUHJlZnMgPT09ICovCiNidG4tZXhwYW5kaXItcml0dWFsIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgcmlnaHQ6IDQwcHg7CiAgYm90dG9tOiAzM3B4OwogIHotaW5kZXg6IDk5OTk5OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBmb250LXNpemU6IDIxcHg7CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDQyZGVnLCMwZmYsI2YwZik7CiAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IG5vbmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIG9wYWNpdHk6IC41OwogIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzIGVhc2UsIHRyYW5zZm9ybSAuMnMgZWFzZTsKfQojYnRuLWV4cGFuZGlyLXJpdHVhbDpob3ZlciB7CiAgb3BhY2l0eTogMTsKICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwp9Cjpmb2N1cy12aXNpYmxlIHsKICBvdXRsaW5lOiAycHggc29saWQgIzBmZjsKICBvdXRsaW5lLW9mZnNldDogMnB4Owp9CkBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7CiAgKiB7IGFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50OyB0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IH0KfQo8L3N0eWxlPgoKCjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iZHVhbC11aS1raXQuY3NzIj4KPC9oZWFkPgogIDwhLS0gRXN0aWxvcyBkbyBnZXJlbmNpYWRvciBkZSBjaGF2ZXMgZSB0cmVpbmFtZW50b3MgLS0+CiAgPHN0eWxlPgogICAgLmtleW1nci1idG57CiAgICAgIHdpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMnB4OwogICAgICBiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4wOCk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOwogICAgICBjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOi4ycztvcGFjaXR5Oi44NTsKICAgIH0KICAgIC5rZXltZ3ItYnRuOmhvdmVye2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjE2KTt9CiAgICAua2V5bWdyLWJ0biBzdmd7d2lkdGg6MThweDtoZWlnaHQ6MThweDt9CiAgICAua2V5bWdyLXBhbmVsewogICAgICBwb3NpdGlvbjpmaXhlZDtyaWdodDoxOHB4O2JvdHRvbToxNjBweDt6LWluZGV4OjEwMDA7CiAgICAgIHdpZHRoOm1pbig1MjBweCwgY2FsYygxMDB2dyAtIDM2cHgpKTsgbWF4LWhlaWdodDo2MHZoOyBvdmVyZmxvdzphdXRvOwogICAgICBib3JkZXItcmFkaXVzOjE2cHg7IHBhZGRpbmc6MTRweCAxNHB4IDEwcHg7CiAgICAgIGJhY2tncm91bmQ6cmdiYSgxMCwxMiwxNiwuNzgpOyBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCkgc2F0dXJhdGUoMTYwJSk7CiAgICAgIGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTIpOyBib3gtc2hhZG93OjAgMTRweCAzNnB4IHJnYmEoMCwwLDAsLjQpOwogICAgICBkaXNwbGF5Om5vbmU7CiAgICB9CiAgICAua2V5bWdyLXBhbmVsLm9wZW57ZGlzcGxheTpibG9jazt9CiAgICAua2V5bWdyLWhke2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGdhcDo4cHg7IG1hcmdpbi1ib3R0b206MTBweDt9CiAgICAua2V5bWdyLWhkIGgze21hcmdpbjowO2ZvbnQtc2l6ZToxNHB4O2xldHRlci1zcGFjaW5nOi4wNmVtO29wYWNpdHk6Ljk7fQogICAgLmtleW1nci1jbG9zZXthcHBlYXJhbmNlOm5vbmU7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xNCk7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjppbmhlcml0OwogICAgICBwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB4O30KICAgIC5rZXltZ3ItZ3JpZHtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmcjtnYXA6MTBweDt9CiAgICAuY2FyZHh7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xMik7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjA0KTt9CiAgICAuY2FyZHggaDR7bWFyZ2luOjAgMCA4cHggMDtmb250LXNpemU6MTNweDtsZXR0ZXItc3BhY2luZzouMDRlbTtvcGFjaXR5Oi44O30KICAgIC5yb3d7ZGlzcGxheTpmbGV4O2dhcDo2cHg7YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXgtd3JhcDp3cmFwO30KICAgIC5yb3cgaW5wdXRbdHlwZT0idGV4dCJdLCAucm93IGlucHV0W3R5cGU9InBhc3N3b3JkIl0sIC5yb3cgdGV4dGFyZWF7CiAgICAgIGZsZXg6MTsgbWluLXdpZHRoOjE4MHB4OyBwYWRkaW5nOjhweCAxMHB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTQpOwogICAgICBiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjA2KTsgY29sb3I6aW5oZXJpdDsgZm9udC1zaXplOjEycHg7IG91dGxpbmU6bm9uZTsKICAgIH0KICAgIC5yb3cgdGV4dGFyZWF7bWluLWhlaWdodDoxMTBweDsgZm9udC1mYW1pbHk6IHVpLW1vbm9zcGFjZSwgU0ZNb25vLVJlZ3VsYXIsIE1lbmxvLCBNb25hY28sIENvbnNvbGFzLCBtb25vc3BhY2U7fQogICAgLmJ0bnh7YXBwZWFyYW5jZTpub25lO2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTYpOyBiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjA2KTsKICAgICAgcGFkZGluZzo2cHggMTBweDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6MTJweDtjdXJzb3I6cG9pbnRlcjtjb2xvcjppbmhlcml0O3RyYW5zaXRpb246LjJzO30KICAgIC5idG54OmhvdmVye2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMTIpO30KICAgIC5saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjZweDttYXJnaW4tdG9wOjZweDt9CiAgICAuaXRlbXtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMDgpO3BhZGRpbmc6NnB4O2JvcmRlci1yYWRpdXM6OHB4O30KICAgIC5iYWRnZXtiYWNrZ3JvdW5kOnJnYmEoMCwyNTUsMjU1LC4zKTtwYWRkaW5nOjJweCA2cHg7Ym9yZGVyLXJhZGl1czo2cHg7Zm9udC1zaXplOjEwcHg7bWFyZ2luLXJpZ2h0OjRweDt9CiAgICAuYmFkZ2Vze2Rpc3BsYXk6ZmxleDtnYXA6NHB4O30KICAgIC5zd2l0Y2h7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NHB4O30KICAgIC5zd2l0Y2ggaW5wdXR7bWFyZ2luLXJpZ2h0OjRweDt9CiAgICAvKiBJbmZvcm1hw6fDtWVzIGRlIHVzdcOhcmlvL2Fzc2lzdGVudGUgbm8gcGFpbmVsIGRlIGNoYXZlcyAqLwogICAgLnVzZXItaW5mb3sKICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgIG9wYWNpdHk6IDAuNzsKICAgIH0KICA8L3N0eWxlPgo8c3R5bGU+Ci8qIHY2LjIuOS1yZWZpbmUg4oCUIFVJIHJlZmluZW1lbnRzICovCi5yZXNwb25zZS1jb250cm9sc3sKICBkaXNwbGF5OmZsZXggIWltcG9ydGFudDsKICBhbGlnbi1pdGVtczpjZW50ZXIgIWltcG9ydGFudDsKICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyICFpbXBvcnRhbnQ7CiAgZ2FwOjE0cHggIWltcG9ydGFudDsKfQoucmVzcG9uc2UtY29udHJvbHMgLmNvbnRyb2wtYnV0dG9uc3sgZ2FwOjEwcHggIWltcG9ydGFudDsgfQoucmVzcG9uc2UtY29udHJvbHMgLnBhZ2luYXRpb257IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9Ci5yZXNwb25zZS1jb250YWluZXJ7CiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgYm9yZGVyLWltYWdlOiBub25lICFpbXBvcnRhbnQ7CiAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9Ci8qIGJsb2NrIHZpc3VhbCByaHl0aG0gKi8KLnJlc3BvbnNlLWJsb2NrewogIG1hcmdpbjogMThweCAwICFpbXBvcnRhbnQ7CiAgcGFkZGluZzogMTZweCAxOHB4ICFpbXBvcnRhbnQ7CiAgYm9yZGVyLXJhZGl1czogMTRweCAhaW1wb3J0YW50OwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMjU1LDI1NSwyNTUsMC4wNCksIHJnYmEoMCwwLDAsMC4xOCkpICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEyKSAhaW1wb3J0YW50Owp9Ci5yZXNwb25zZS1ibG9jayArIC5yZXNwb25zZS1ibG9ja3sKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnJlc3BvbnNlLWJsb2NrICsgLnJlc3BvbnNlLWJsb2NrOjpiZWZvcmV7CiAgY29udGVudDoiIjsKICBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDoxMCU7IHJpZ2h0OjEwJTsgdG9wOi0xMHB4OyBoZWlnaHQ6MXB4OwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgcmdiYSgwLDI1NSwyNTUsMCksIHJnYmEoMCwyNTUsMjU1LDAuMzUpLCByZ2JhKDI1NSwwLDI1NSwwKSk7CiAgb3BhY2l0eTouNjsKfQoucmVzcG9uc2UtYmxvY2suaW50cm97IGJvcmRlci1sZWZ0OjRweCBzb2xpZCAjMGZmICFpbXBvcnRhbnQ7IH0KLnJlc3BvbnNlLWJsb2NrLm1pZGRsZXsgYm9yZGVyLWxlZnQ6NHB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4zNSkgIWltcG9ydGFudDsgfQoucmVzcG9uc2UtYmxvY2suZW5kaW5neyBib3JkZXItbGVmdDo0cHggc29saWQgI2YwZiAhaW1wb3J0YW50OyB9CgovKiBuaWNlciBjb2RlIGFuZCBsaXN0IHN0eWxpbmcgaW5zaWRlIHJlc3BvbnNlICovCi5yZXNwb25zZS1ibG9jayBwcmUsIC5yZXNwb25zZS1ibG9jayBjb2RlewogIGZvbnQtZmFtaWx5OiB1aS1tb25vc3BhY2UsIFNGTW9uby1SZWd1bGFyLCBNZW5sbywgQ29uc29sYXMsICJMaWJlcmF0aW9uIE1vbm8iLCBtb25vc3BhY2U7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA2KTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTIpOwogIGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMnB4IDZweDsKfQoucmVzcG9uc2UtYmxvY2sgcHJleyBwYWRkaW5nOjEwcHggMTJweDsgb3ZlcmZsb3c6YXV0bzsgfQoucmVzcG9uc2UtYmxvY2sgdWwsIC5yZXNwb25zZS1ibG9jayBvbHsgcGFkZGluZy1sZWZ0OiAxLjNlbTsgfQoucmVzcG9uc2UtYmxvY2sgbGl7IG1hcmdpbjogNHB4IDA7IH0KPC9zdHlsZT4KCjxib2R5IGNsYXNzPSJwZXJmLW1lZGl1bSI+CjxkaXYgaWQ9ImFzc2lzdGFudE5hbWUiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJjb250ZW50Ij4KPGlmcmFtZSBjbGFzcz0iYWN0aXZlIiBpZD0iZnJhbWUiIHNyYz0iaW5kZXguaHRtbCIgdGl0bGU9IkNvbnRlw7pkbyBwcmluY2lwYWwgZG8gRHVhbCBJbmZvZG9zZSIgbG9hZGluZz0iZWFnZXIiIHJlZmVycmVycG9saWN5PSJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luIj4KPG5vc2NyaXB0PgogIDxwPlBhcmEgYSBtZWxob3IgZXhwZXJpw6puY2lhLCBhdGl2ZSBvIEphdmFTY3JpcHQuIENvbnRlw7pkbyBwcmluY2lwYWwgZGlzcG9uw612ZWwgZW0gPGEgaHJlZj0iaW5kZXguaHRtbCI+aW5kZXguaHRtbDwvYT4uPC9wPgo8L25vc2NyaXB0Pgo8L2lmcmFtZT4KPC9kaXY+CjxkaXYgY2xhc3M9InN5bWJvbC1iYXIiPgo8YnV0dG9uIGNsYXNzPSJzeW1ib2wtYnV0dG9uIiBvbmNsaWNrPSJsb2FkUGFnZSgnYWJvdXQ6YmxhbmsnKSI+zqY8L2J1dHRvbj4KPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ1dHRvbiIgb25jbGljaz0ibG9hZFBhZ2UoJ2R1YWwtZGVjb2Rlci0xMy5odG1sJykiPuqpnDwvYnV0dG9uPgo8YnV0dG9uIGNsYXNzPSJzeW1ib2wtYnV0dG9uIiBvbmNsaWNrPSJsb2FkUGFnZSgnU3BsYXNoX0ZJTkFMX1RFTUFfUFVMU08uaHRtbCcpIj7il4w8L2J1dHRvbj4KPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ1dHRvbiIgb25jbGljaz0ibG9hZFBhZ2UoJ1Jhcm9zLmh0bWwnKSI+4pi8PC9idXR0b24+CgoKPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ1dHRvbiIgb25jbGljaz0ibG9hZFBhZ2UoJ1NvbGFzaHNzLmh0bWwnKSI+4peRPC9idXR0b24+CjxidXR0b24gY2xhc3M9InN5bWJvbC1idXR0b24iIG9uY2xpY2s9ImxvYWRQYWdlKCdkdWFsLXR1YmUtMjUtMC5odG1sJykiPuKXmDwvYnV0dG9uPgoKPC9kaXY+CjxidXR0b24gY2xhc3M9ImxvY2stYnV0dG9uIiBvbmNsaWNrPSJsb2FkUGFnZSgnaW5kZXguaHRtbCcpIj48L2J1dHRvbj4KPCEtLSBCb3TDtWVzIC0tPgo8aW5wdXQgYWNjZXB0PSIuaHRtbCIgaWQ9InVwbG9hZEhUTUwiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIHR5cGU9ImZpbGUiLz4KPGJ1dHRvbiBpZD0idXBsb2FkQ29tcG9uZW50QnRuIj7ip4k8L2J1dHRvbj4KPGJ1dHRvbiBpZD0icmVtb3RlQ29tcG9uZW50QnRuIj7imI08L2J1dHRvbj4KPGJ1dHRvbiBpZD0idG9nZ2xlRGVjb2RlckJ0biI+4pymPC9idXR0b24+CjxidXR0b24gaWQ9ImJ0bi1leHBhbmRpci1yaXR1YWwiPuKXiTwvYnV0dG9uPgo8IS0tIENhaXhhIGRvIGRlY29kaWZpY2Fkb3IgLS0+CjxkaXYgaWQ9ImRlY29kZXJCb3giPgo8aW5wdXQgaWQ9ImNvZGVJbnB1dCIgcGxhY2Vob2xkZXI9IkRpZ2l0ZSBvIHNlbG8uLi4iIHR5cGU9InRleHQiLz4KPGJ1dHRvbiBvbmNsaWNrPSJkZWNvZGVTeW1ib2xpY0NvZGUoKSI+4pymIERlc2Jsb3F1ZWFyPC9idXR0b24+CjwvZGl2Pgo8IS0tIENPTVBPTkVOVEUgV0VCIC0tPgo8c2NyaXB0IHR5cGU9Im1vZHVsZSI+CiAgICBjbGFzcyBNeUZyYW1lTG9hZGVyIGV4dGVuZHMgSFRNTEVsZW1lbnQgewogICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pOwogICAgICAgIHNoYWRvdy5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgIC5vdmVybGF5IHsKICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgICAgaW5zZXQ6IDA7CiAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjYpOwogICAgICAgICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig4cHgpOwogICAgICAgICAgICAgIHotaW5kZXg6IDk5OTsKICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmNvbnRhaW5lciB7CiAgICAgICAgICAgICAgd2lkdGg6IDkyJTsKICAgICAgICAgICAgICBoZWlnaHQ6IDg2JTsKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMTExOwogICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDIwcHggIzBmZjsKICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZnJhbWUgewogICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmNsb3NlLWJ0biB7CiAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgIHRvcDogMTBweDsKICAgICAgICAgICAgICByaWdodDogMTBweDsKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmOwogICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgICBjb2xvcjogIzAwMDsKICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMHB4OwogICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICB6LWluZGV4OiAxMDsKICAgICAgICAgICAgfQogICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJsYXkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNsb3NlLWJ0biI+4pyWPC9idXR0b24+CiAgICAgICAgICAgICAgPGlmcmFtZT48L2lmcmFtZT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICBgOwogICAgICAgIHRoaXMuaWZyYW1lID0gc2hhZG93LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZScpOwogICAgICAgIHNoYWRvdy5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtYnRuJykub25jbGljayA9ICgpID0+IHRoaXMucmVtb3ZlKCk7CiAgICAgIH0KICAgICAgc2V0IHNyYyh2YWwpIHsKICAgICAgICB0aGlzLmlmcmFtZS5zcmMgPSB2YWw7CiAgICAgIH0KICAgIH0KICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZnJhbWUtbG9hZGVyJywgTXlGcmFtZUxvYWRlcik7CiAgPC9zY3JpcHQ+CjwhLS0gRnVuw6fDtWVzIEpTIC0tPgo8c2NyaXB0PgogICAgY29uc3QgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnJhbWUnKTsKICAgIGNvbnN0IGFjdGl2YXRpb25Tb3VuZCA9IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy9hY3RzL3dvdW5kcy9jb2RpZ28tTVQtT0xYLTAud2F2Jyk7CgogICAgZnVuY3Rpb24gcGxheVNvdW5kKCkgewogICAgICBhY3RpdmF0aW9uU291bmQudm9sdW1lID0gMTsKICAgICAgYWN0aXZhdGlvblNvdW5kLnBsYXkoKS5jYXRjaCgoKT0+e30pOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRQYWdlKHVybCkgewogICAgICBmcmFtZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZnJhbWUuc3JjID0gdXJsOwogICAgICAgIGZyYW1lLm9ubG9hZCA9ICgpID0+IGZyYW1lLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9LCAzMDApOwogICAgfQoKICAgIGNvbnN0IHVwbG9hZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZEhUTUwnKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRDb21wb25lbnRCdG4nKS5vbmNsaWNrID0gKCkgPT4gewogICAgICBwbGF5U291bmQoKTsKICAgICAgdXBsb2FkSW5wdXQuY2xpY2soKTsKICAgIH07CgogICAgdXBsb2FkSW5wdXQub25jaGFuZ2UgPSAoZSkgPT4gewogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIGlmIChmaWxlICYmIGZpbGUubmFtZS5lbmRzV2l0aCgnLmh0bWwnKSkgewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldikgPT4gewogICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtldi50YXJnZXQucmVzdWx0XSwgeyB0eXBlOiAndGV4dC9odG1sJyB9KTsKICAgICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgY29uc3QgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdteS1mcmFtZS1sb2FkZXInKTsKICAgICAgICAgIGZyYW1lLnNyYyA9IGJsb2JVcmw7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdTZWxlY2lvbmUgdW0gYXJxdWl2byAuaHRtbCB2w6FsaWRvLicpOwogICAgICB9CiAgICB9OwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1vdGVDb21wb25lbnRCdG4nKS5vbmNsaWNrID0gKCkgPT4gewogICAgICBwbGF5U291bmQoKTsKICAgICAgY29uc3QgdXJsID0gcHJvbXB0KCJVUkwgZG8gY29tcG9uZW50ZSByZW1vdG86Iik7CiAgICAgIGlmICh1cmwpIHsKICAgICAgICBjb25zdCBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ215LWZyYW1lLWxvYWRlcicpOwogICAgICAgIGZyYW1lLnNyYyA9IHVybDsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgfQogICAgfTsKCiAgICBjb25zdCB0b2dnbGVEZWNvZGVyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZURlY29kZXJCdG4nKTsKICAgIGNvbnN0IGRlY29kZXJCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVjb2RlckJveCcpOwogICAgdG9nZ2xlRGVjb2RlckJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICBwbGF5U291bmQoKTsKICAgICAgZGVjb2RlckJveC5zdHlsZS5kaXNwbGF5ID0gZGVjb2RlckJveC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnOwogICAgfTsKCiAgICBjb25zdCBDT0RFX01BUCA9IHsKICAgICAgIkRVQUwiOiAibWVudS5odG1sIiwKICAgICAgIktCWCI6ICJtZW51LXgtMS5odG1sIiwKICAgICAgIkFUVlIiOiAicmVuZGVyLXJlc3BvbnNlLmh0bWwiLAogICAgICAiQVRWRCI6ICJkZWNvZGlmaWNhZG9yLmh0bWwiLAogICAgICAiMzM3IjogIktPQkxMVVhfTWV0YUx1eF9DTEVBTkVELmh0bWwiLAogICAgICAiREJLIjogImR1YWwtYm9vay0xMi5odG1sIiwKICAgICAgIklNTiI6ICJpbmRleC1tYW5pZmVzdGFkby5odG1sIiwKICAgICAgIklNTk4iOiAiaW5kZXgtbWFuaWZlc3RhZG8tdGFuZ2xlLmh0bWwiLAogICAgICAiQlRTIjogImJvdGFvLXNpbWJvbGljby5odG1sIiwKICAgICAgIlNCSyI6ICJTbWJTLWJvb2stNC5odG1sIiwKICAgICAgIlNCTCI6ICJTbWJTLWJvb2stMi5odG1sIiwKICAgICAgIktEWCI6ICJtZW51LWtvYmxsdXgtdjItY29tcGxldG8uaHRtbCIsCiAgICAgICJLREkiOiAibWVudS1pbnRlZ3JhZG8ta29ibGx1eC5odG1sIiwKICAgICAgIktEUCI6ICJtZW51LXgtMS1FLTQuaHRtbCIsCiAgICAgICJLREYiOiAibWVudS14LTEtRS04Lmh0bWwiLAogICAgICAiS0RCIjogIm1lbnUteC0xLUUtMTAuaHRtbCIsCiAgICAgICJLREoiOiAibWVudS14LTEtRS00LWNvbS1ib3RvZXMtaW5qZXRhZG9zLmh0bWwiLAogICAgICAiSFRNIjogIktCTFgtSFRNTC12NC4xLUZVTExTQ1JFRU4tU0VQQVJBRE9SLmh0bWwiLAogICAgICAiTU42IjogIm1lbnUteC0xLUUtNi5odG1sIiwKICAgICAgIk1ONyI6ICJtZW51LXgtMS1FLTcuaHRtbCIsCiAgICAgICJNTjgiOiAibWVudS14LTEtRS04Lmh0bWwiLAogICAgICAiTU45IjogIm1lbnUteC0xLUUtOS5odG1sIiwKICAgICAgIk1OMTAiOiAibWVudS14LTEtRS0xMC5odG1sIiwKICAgICAgIk1OMTFlIjogIm1lbnUteC0xLUUtMTFlLmh0bWwiLAogICAgICAiTU4xMiI6ICJtZW51LXgtMS1FLTEyLmh0bWwiLAogICAgICAiTU4xMyI6ICJtZW51LWZpbmFsLWNvbS1wdWxzby5odG1sIiwKICAgICAgIk1OMTQiOiAibWVudS1wdWxzby1maW5hbC5odG1sIiwKICAgICAgIk1OMTUiOiAibWVudS14LTEtRS0xNS5odG1sIiwKICAgICAgIk1OMTYiOiAibWVudS14LTEtRS0xNi5odG1sIiwKICAgIH07CgogICAgZnVuY3Rpb24gZGVjb2RlU3ltYm9saWNDb2RlKCkgewogICAgICBwbGF5U291bmQoKTsKICAgICAgY29uc3QgY29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlSW5wdXQnKS52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgY29uc3QgZGVzdCA9IENPREVfTUFQW2NvZGVdOwogICAgICBpZiAoZGVzdCkgewogICAgICAgIGNvbnN0IGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbXktZnJhbWUtbG9hZGVyJyk7CiAgICAgICAgZnJhbWUuc3JjID0gZGVzdDsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICBkZWNvZGVyQm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ1NlbG8gZGVzY29uaGVjaWRvIG91IG7Do28gcmVnaXN0cmFkby4nKTsKICAgICAgfQogICAgfQogIDwvc2NyaXB0Pgo8c2NyaXB0Pgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnRuLWV4cGFuZGlyLXJpdHVhbCIpLm9uY2xpY2sgPSAoKSA9PiB7CiAgY29uc3QgYWx2byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb3Jwby1lc3BlbGhvIikgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInB1bHNvcyIpOwogIGlmIChhbHZvKSB7CiAgICBhbHZvLnN0eWxlLmRpc3BsYXkgPSBhbHZvLnN0eWxlLmRpc3BsYXkgPT09ICJub25lIiA/ICJibG9jayIgOiAibm9uZSI7CiAgICBsb2dNaXN0aWNvKCLip4kgRXhwYW5kaXUgbyBwbGFubyByaXR1YWwgb2N1bHRvLiIpOwogIH0KfTsKPC9zY3JpcHQ+CjwhLS0g8J+MjCBCb3TDtWVzIHNpbWJpw7N0aWNvcyAtLT4KPHN0eWxlPgojYnRuLWV4cGFuZGlyLXJpdHVhbCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGJvdHRvbTogMzNweDsKICAKICB6LWluZGV4OiA5OTk5OTsKYm9yZGVyLXJhZGl1czo1MCU7CgogIGZvbnQtc2l6ZTogMjFweDsKYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoNDJkZWcsIzBmZiwjZjBmKTsKICAgICAgYmFja2dyb3VuZC1jbGlwOnRleHQ7LXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6dGV4dDsKICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6dHJhbnNwYXJlbnQ7CgoKICBib3JkZXI6bm9uZTsKCiAgY3Vyc29yOiBwb2ludGVyOwogICAgb3BhY2l0eTogMC41OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlLCB0cmFuc2Zvcm0gMC4ycyBlYXNlOwp9CiNidG4tZXhwYW5kaXItcml0dWFsOmhvdmVyIHsKICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKfQojYnRuLWV4cGFuZGlyLXJpdHVhbCB7IHJpZ2h0OiA0MHB4OyB9CgpAa2V5ZnJhbWVzIHB1bHNlIHsKICAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IG9wYWNpdHk6IDAuNzsgfQogIDUwJSB7IHRyYW5zZm9ybTogc2NhbGUoMS4wMjEpOyBvcGFjaXR5OiAxOyB9CiAgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IG9wYWNpdHk6IDAuNzsgfQp9Cjwvc3R5bGU+CjxzY3JpcHQ+CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidG4tZXhwYW5kaXItcml0dWFsIikub25jbGljayA9ICgpID0+IHsKICBjb25zdCBhbHZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvcnBvLWVzcGVsaG8iKSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicHVsc29zIik7CiAgaWYgKGFsdm8pIHsKICAgIGFsdm8uc3R5bGUuZGlzcGxheSA9IGFsdm8uc3R5bGUuZGlzcGxheSA9PT0gIm5vbmUiID8gImJsb2NrIiA6ICJub25lIjsKICAgIGxvZ01pc3RpY28oIuKniSBFeHBhbmRpdSBvIHBsYW5vIHJpdHVhbCBvY3VsdG8uIik7CiAgfQp9Owo8L3NjcmlwdD4KPHN0eWxlPgojcHVsc29zLWNvbnRhaW5lciB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMTk4cHg7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICB3aWR0aDogYXV0bzsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNik7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBvcGFjaXR5OiB2YXIoLS1zbG93KTsKICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg0NWRlZywgI0YwRiwgIzBGRik7CiAgYm9yZGVyLWltYWdlLXNsaWNlOiAxOwoKICAtd2Via2l0LW1hc2staW1hZ2U6IHJhZGlhbC1ncmFkaWVudCh3aGl0ZSwgYmxhY2spOyAvKiBmb3LDp2EgbcOhc2NhcmEgYXJyZWRvbmRhZGEgbm8gU2FmYXJpICovCiAgbWFzay1pbWFnZTogcmFkaWFsLWdyYWRpZW50KHdoaXRlLCBibGFjayk7CgogIG92ZXJmbG93OiBoaWRkZW47CiAgei1pbmRleDo5OTk5MjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCiAgI3B1bHNvcyB7CiAgICBtYXgtaGVpZ2h0OiBjYWxjKDIuNSAqIDEuMmVtKTsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBwYWRkaW5nOiAwLjRlbTsKICAgIGZvbnQtc2l6ZTogMC45M2VtOwogICAgY29sb3I6ICMwZmY7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgfQoKICAjcHVsc29zLmV4cGFuZGVkIHsKICAgIG1heC1oZWlnaHQ6IGNhbGMoMTIgKiAxLjJlbSk7CiAgICBvdmVyZmxvdy15OiBhdXRvOwogIH0KCiAgLmRlYnVnLW1pc3RpY28gewogICAgbGluZS1oZWlnaHQ6IDEuMmVtOwogICAgbWFyZ2luLWJvdHRvbTogMGVtOyAKICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7CiAgfQoKICAvKiBGQURFIFZJU1VBTCBubyBmaW5hbCAqLwogICNwdWxzb3M6bm90KC5leHBhbmRlZCk6OmFmdGVyIHsKICAgIGNvbnRlbnQ6ICIiOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiBhdXRvOwogICAgaGVpZ2h0OiAxLjJlbTsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byB0b3AsIHJnYmEoMCwwLDAsMC45KSwgdHJhbnNwYXJlbnQpOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgfQoucHVsc28taXRlbSB7CiAgbWFyZ2luLWJvdHRvbTogMTJweDsKfQoucHVsc28taXRlbSBidXR0b24ucmVwbGF5LWJ0biB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgIzBmZjsKICBjb2xvcjogIzBmZjsKICBwYWRkaW5nOiA0cHggOHB4OwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZm9udC1zaXplOiAwLjhlbTsKfQoucHVsc28taXRlbSBidXR0b246aG92ZXIgewogIGJhY2tncm91bmQ6ICMwZmY7CiAgY29sb3I6ICMwMDA7Cn0KICAgICNrb2JsbHV4UGxheWVyIHsKcG9zaXRpb246IGZpeGVkOwp0b3A6IDMwcHg7CmxlZnQ6IDIwcHg7CnotaW5kZXg6IDk5OTk7CmJhY2tncm91bmQ6IHJnYmEoMCwgMTAsIDIwLCAwLjgpOwpiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTJweCkgc2F0dXJhdGUoMTgwJSk7CnBhZGRpbmc6IDE4cHg7CmJvcmRlci1yYWRpdXM6IDE2cHg7CmJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMjU1LCAyNTUsIDAuMTUpOwpib3gtc2hhZG93OiAwIDhweCAzMnB4IHJnYmEoMCwgMCwgMCwgMC4zKSwKMCAwIDAgMXB4IHJnYmEoMCwgMjU1LCAyNTUsIDAuMSksCjAgMCAzMHB4IHJnYmEoMCwgMjU1LCAyNTUsIDAuMDUpOwpjb2xvcjogI2UwZjdmZjsKZGlzcGxheTogZmxleDsKZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKZ2FwOiAxNHB4OwptYXgtd2lkdGg6IDI2MHB4Owp0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7Cn0KI2tvYmxsdXhQbGF5ZXIgYnV0dG9uLCAKI2tvYmxsdXhQbGF5ZXIgc2VsZWN0LCAKI2tvYmxsdXhQbGF5ZXIgaW5wdXRbdHlwZT0icmFuZ2UiXSB7CmJhY2tncm91bmQ6IHJnYmEoMCwgMjU1LCAyNTUsIDAuMDUpOwpib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDI1NSwgMjU1LCAwLjEpOwpib3JkZXItcmFkaXVzOiA4cHg7CmNvbG9yOiBpbmhlcml0OwpwYWRkaW5nOiA4cHggMTJweDsKZm9udC1zaXplOiAxM3B4Owp0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwp3aWR0aDogMTAwJTsKY3Vyc29yOiBwb2ludGVyOwp9CiNrb2JsbHV4UGxheWVyIGJ1dHRvbiB7CmJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMCwgMTUwLCAyNTUsIDAuMTUpLCByZ2JhKDAsIDgwLCAyMDAsIDAuMikpOwpiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTsKfQoja29ibGx1eFBsYXllciBidXR0b246aG92ZXIgewpiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDAsIDE4MCwgMjU1LCAwLjI1KSwgcmdiYSgwLCAxMDAsIDIyMCwgMC4zKSk7CmJvcmRlci1jb2xvcjogcmdiYSgwLCAyNTUsIDI1NSwgMC4zKTsKYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSgwLCAyMDAsIDI1NSwgMC4xKTsKdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpOwp9CiN0b2dnbGVQbGF5ZXIgewp3aWR0aDogNjBweDsKaGVpZ2h0OiA2MHB4Owpib3JkZXItcmFkaXVzOiA1MCUgIWltcG9ydGFudDsKYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CmJveC1zaGFkb3c6IDAgMCAyMHB4IHJnYmEoMCwgMjU1LCAyNTUsIDAuMykgIWltcG9ydGFudDsKYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgwLCAyNTUsIDI1NSwgMC4zKSwgcmdiYSgwLCAxMjAsIDI1NSwgMC4zNSkpICFpbXBvcnRhbnQ7CmRpc3BsYXk6IGZsZXg7CmFsaWduLWl0ZW1zOiBjZW50ZXI7Cmp1c3RpZnktY29udGVudDogY2VudGVyOwp0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTsKfQojdG9nZ2xlUGxheWVyOmhvdmVyIHsKdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwpiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDAsIDE4MCwgMjU1LCAwLjI1KSwgcmdiYSgwLCAxMDAsIDIyMCwgMC4zKSkgIWltcG9ydGFudDsKYm94LXNoYWRvdzogMCAwIDI1cHggcmdiYSgwLCAyNTUsIDI1NSwgMC41KSAhaW1wb3J0YW50Owp9CiN0b2dnbGVQbGF5ZXI6aG92ZXIgewp0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7CmJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMCwgMjU1LCAyNTUsIDAuMyksIHJnYmEoMCwgMTIwLCAyNTUsIDAuMzUpKSAhaW1wb3J0YW50Owpib3gtc2hhZG93OiAwIDAgMjBweCByZ2JhKDAsIDI1NSwgMjU1LCAwLjMpOwp9CiNwbGF5ZXJDb250cm9scyB7CmRpc3BsYXk6IG5vbmU7CmZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CmdhcDogMTJweDsKbWFyZ2luLXRvcDogMTBweDsKYW5pbWF0aW9uOiBmYWRlSW4gMC40cyBlYXNlLW91dDsKfQpAa2V5ZnJhbWVzIGZhZGVJbiB7CmZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0KdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KfQoja29ibGx1eFBsYXllciBpbnB1dFt0eXBlPSJyYW5nZSJdIHsKLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwpoZWlnaHQ6IDZweDsKYmFja2dyb3VuZDogcmdiYSgwLCAyNTUsIDI1NSwgMC4xKTsKYm9yZGVyLXJhZGl1czogMTBweDsKcGFkZGluZzogMDsKbWFyZ2luOiAxMHB4IDA7Cn0KI2tvYmxsdXhQbGF5ZXIgaW5wdXRbdHlwZT0icmFuZ2UiXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIgewotd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CndpZHRoOiAxNnB4OwpoZWlnaHQ6IDE2cHg7CmJvcmRlci1yYWRpdXM6IDUwJTsKYmFja2dyb3VuZDogIzAwZmZmZjsKY3Vyc29yOiBwb2ludGVyOwpib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDI1NSwgMjU1LCAwLjUpOwp0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwp9CiNrb2JsbHV4UGxheWVyIGlucHV0W3R5cGU9InJhbmdlIl06Oi13ZWJraXQtc2xpZGVyLXRodW1iOmhvdmVyIHsKdHJhbnNmb3JtOiBzY2FsZSgxLjIpOwpib3gtc2hhZG93OiAwIDAgMTVweCByZ2JhKDAsIDI1NSwgMjU1LCAwLjgpOwp9CiNrb2JsbHV4UGxheWVyIGxhYmVsIHsKZm9udC1zaXplOiAxMXB4OwpvcGFjaXR5OiAwLjc7CmxldHRlci1zcGFjaW5nOiAwLjVweDsKdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKY29sb3I6IHJnYmEoMCwgMjU1LCAyNTUsIDAuNyk7Cn0KI3RoZW1lU2VsZWN0b3IgewpiYWNrZ3JvdW5kOiByZ2JhKDAsIDI1NSwgMjU1LCAwLjA1KTsKYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAyNTUsIDI1NSwgMC4xNSk7CmJvcmRlci1yYWRpdXM6IDhweDsKY29sb3I6ICMwZmY7CnBhZGRpbmc6IDRweCA4cHg7CmZvbnQtc2l6ZTogMTNweDsKYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7CnRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7Cn0KI3RoZW1lU2VsZWN0b3I6aG92ZXIgewpiYWNrZ3JvdW5kOiByZ2JhKDAsIDI1NSwgMjU1LCAwLjEpOwpib3JkZXItY29sb3I6IHJnYmEoMCwgMjU1LCAyNTUsIDAuMyk7Cn0KLyogVWx0cmEgRm9kYSBLT0JMTFVYIFBsYXllciBTdHlsZXMgKi8KI2tvYmxsdXhQbGF5ZXIgewpwb3NpdGlvbjogZml4ZWQ7CnRvcDogMjBweDsKbGVmdDogMjBweDsKei1pbmRleDogOTk5OTk7CmJhY2tncm91bmQ6IHJnYmEoMCwgMTAsIDIwLCAwLjgpOwpiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTJweCkgc2F0dXJhdGUoMTgwJSk7CnBhZGRpbmc6IDE4cHg7CmJvcmRlci1yYWRpdXM6IDE2cHg7CmJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMjU1LCAyNTUsIDAuMTUpOwpib3gtc2hhZG93OiAwIDhweCAzMnB4IHJnYmEoMCwgMCwgMCwgMC4zKSwKMCAwIDAgMXB4IHJnYmEoMCwgMjU1LCAyNTUsIDAuMSksCjAgMCAzMHB4IHJnYmEoMCwgMjU1LCAyNTUsIDAuMDUpOwpjb2xvcjogI2UwZjdmZjsKZGlzcGxheTogZmxleDsKZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKZ2FwOiAxNHB4OwptYXgtd2lkdGg6IDI2MHB4Owp0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC4yMiwgMSwgMC4zNiwgMSk7Cn0KLyogQWRkaXRpb25hbCBvdmVycmlkZXMuLi4gKi8KLyogUmVtb3ZlIHBhcmVudCBib3JkZXIvc2hhZG93IGluZmx1ZW5jZSBvbiB0b2dnbGUgKi8KI2tvYmxsdXhQbGF5ZXIgI3RvZ2dsZVBsYXllciB7CmJvcmRlcjogbm9uZSAhaW1wb3J0YW50Owpib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CnBhZGRpbmc6IDAgIWltcG9ydGFudDsKbWFyZ2luOiAwICFpbXBvcnRhbnQ7Cn0KLyogRW5zdXJlIHBlcmZlY3QgY2lyY2xlICovCiN0b2dnbGVQbGF5ZXIgewp3aWR0aDogNjBweCAhaW1wb3J0YW50OwpoZWlnaHQ6IDYwcHggIWltcG9ydGFudDsKYXNwZWN0LXJhdGlvOiAxIC8gMSAhaW1wb3J0YW50Owpib3JkZXItcmFkaXVzOiA1MCUgIWltcG9ydGFudDsKYm94LXNpemluZzogYm9yZGVyLWJveCAhaW1wb3J0YW50Owp9Ci8qIFJlbW92ZSBpbmhlcml0ZWQgYm9yZGVycy9zaGFkb3dzIGFuZCBzZXQgZ3JhZGllbnQgYmFja2dyb3VuZCAqLwoja29ibGx1eFBsYXllciAjdG9nZ2xlUGxheWVyIHsKYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CmJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OwpiYWNrZ3JvdW5kOiB2YXIoLS1iZykgIWltcG9ydGFudDsKcGFkZGluZzogMCAhaW1wb3J0YW50OwptYXJnaW46IDAgIWltcG9ydGFudDsKfQovKiBFbnN1cmUgcGVyZmVjdCBjaXJjbGUgb2YgMzNweCAqLwojdG9nZ2xlUGxheWVyIHsKd2lkdGg6IDMzcHggIWltcG9ydGFudDsKaGVpZ2h0OiAzM3B4ICFpbXBvcnRhbnQ7CmFzcGVjdC1yYXRpbzogMSAvIDEgIWltcG9ydGFudDsKYm9yZGVyLXJhZGl1czogNTAlICFpbXBvcnRhbnQ7Cm92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7Cn0KLyogU2NhbGUgaW5uZXIgaWNvbiAqLwojdG9nZ2xlUGxheWVyIHN2ZywKI3RvZ2dsZVBsYXllciAud2F2ZXMtaWNvbiB7CndpZHRoOiAyMHB4ICFpbXBvcnRhbnQ7CmhlaWdodDogMjBweCAhaW1wb3J0YW50Owp9Ci8qIENsZWFyIGV4dHJhIHBhZGRpbmcvbWFyZ2luICovCiN0b2dnbGVQbGF5ZXIgPiAqIHsKcGFkZGluZzogMCAhaW1wb3J0YW50OwptYXJnaW46IDAgIWltcG9ydGFudDsKfQovKiBSZW1vdmUgYW55IGJvcmRlci9ib3gtc2hhZG93IG9uIGNvbnRhaW5lciB0aGF0IGFmZmVjdCBjaGlsZHJlbiAqLwoja29ibGx1eFBsYXllciB7CmJvcmRlcjogbm9uZSAhaW1wb3J0YW50Owpib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7Cm91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsKfQo8L3N0eWxlPgo8IS0tIPCfjIwgQ2FtYWRhIFNpbWJpw7N0aWNhIE9jdWx0YSAtLT4KPGRpdiBpZD0icHVsc29zLWNvbnRhaW5lciI+CjxkaXYgaWQ9InB1bHNvcyIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9kaXY+CjwvZGl2Pgo8c2NyaXB0PgogIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKCiAgZnVuY3Rpb24gbG9nTWlzdGljbyhtc2cpIHsKICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBlbC5jbGFzc05hbWUgPSAiZGVidWctbWlzdGljbyI7CiAgICBlbC5pbm5lclRleHQgPSAi4peJICIgKyBtc2c7CiAgICBwdWxzb3MuYXBwZW5kQ2hpbGQoZWwpOwogICAgaWYgKCFwdWxzb3MuY2xhc3NMaXN0LmNvbnRhaW5zKCJleHBhbmRlZCIpKSB7CiAgICAgIHB1bHNvcy5zY3JvbGxUb3AgPSBwdWxzb3Muc2Nyb2xsSGVpZ2h0OwogICAgfQogIH0KCiAgcHVsc29zLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgcHVsc29zLmNsYXNzTGlzdC50b2dnbGUoImV4cGFuZGVkIik7CiAgICBpZiAoIXB1bHNvcy5jbGFzc0xpc3QuY29udGFpbnMoImV4cGFuZGVkIikpIHsKICAgICAgcHVsc29zLnNjcm9sbFRvcCA9IHB1bHNvcy5zY3JvbGxIZWlnaHQ7CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIHNwYXduQ29zbWljRXhwbG9zaW9uKHgsIHkpIHsKICAgIGNvbnN0IGJvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGJvb20uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgYm9vbS5zdHlsZS5sZWZ0ID0geCArICJweCI7CiAgICBib29tLnN0eWxlLnRvcCA9IHkgKyAicHgiOwogICAgYm9vbS5zdHlsZS53aWR0aCA9IGJvb20uc3R5bGUuaGVpZ2h0ID0gIjEycHgiOwogICAgYm9vbS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNTAlIjsKICAgIGJvb20uc3R5bGUuYmFja2dyb3VuZCA9ICJyYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCAjMGZmLCAjZjBmMGZmLCB0cmFuc3BhcmVudCkiOwogICAgYm9vbS5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOwogICAgYm9vbS5zdHlsZS5hbmltYXRpb24gPSAicHVsc2UgMC40cyBlYXNlLW91dCI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJvb20pOwogICAgc2V0VGltZW91dCgoKSA9PiBib29tLnJlbW92ZSgpLCAxMDAwKTsKICB9CgogIC8vIFB1bHNvIG5hIHDDoWdpbmEgcHJpbmNpcGFsCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgIHNwYXduQ29zbWljRXhwbG9zaW9uKGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICAgIG5hdmlnYXRvci52aWJyYXRlPy4oWzUsIDE1LCA1XSk7CiAgICBsb2dNaXN0aWNvKCJQdWxzbyBzaW1iacOzdGljbyBlbSAiICsgZS5jbGllbnRYICsgIiwgIiArIGUuY2xpZW50WSk7CiAgfSk7CgogIC8vIFJlY2ViZSBjbGlxdWVzIGRvIGlmcmFtZQogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgIGlmIChldmVudC5kYXRhPy50eXBlID09PSAiaWZyYW1lQ2xpY2siKSB7CiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZXVJZnJhbWVJRCIpOyAvLyBUcm9xdWUgcGFyYSBvIElEIHJlYWwgZG8gc2V1IGlmcmFtZQogICAgICBpZiAoIWlmcmFtZSkgcmV0dXJuOwoKICAgICAgY29uc3QgcmVjdCA9IGlmcmFtZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3QgeEdsb2JhbCA9IHJlY3QubGVmdCArIGV2ZW50LmRhdGEueDsKICAgICAgY29uc3QgeUdsb2JhbCA9IHJlY3QudG9wICsgZXZlbnQuZGF0YS55OwoKICAgICAgc3Bhd25Db3NtaWNFeHBsb3Npb24oeEdsb2JhbCwgeUdsb2JhbCk7CiAgICAgIG5hdmlnYXRvci52aWJyYXRlPy4oWzUsIDE1LCA1XSk7CiAgICAgIGxvZ01pc3RpY28oIuKaoSBQdWxzbyBubyBpRnJhbWUgZW0gIiArIGV2ZW50LmRhdGEueCArICIsICIgKyBldmVudC5kYXRhLnkpOwogICAgfQogIH0pOwo8L3NjcmlwdD4KPGRpdiBpZD0ia29ibGx1eFBsYXllciIgc3R5bGU9InBvc2l0aW9uOmZpeGVkO3RvcDo0MnB4O2xlZnQ6MjBweDt6LWluZGV4Ojc7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuOCk7YmFja2Ryb3AtZmlsdGVyOmJsdXIoOXB4KTtwYWRkaW5nOjVweDtib3JkZXItcmFkaXVzOjEwcHg7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NnB4O3RyYW5zaXRpb246YWxsIDAuNnMgZWFzZTttYXgtd2lkdGg6MTk5cHg7Y29sb3I6dmFyKC0tdGV4dCk7Zm9udC1mYW1pbHk6bW9ub3NwYWNlOyI+CjxidXR0b24gaWQ9InRvZ2dsZVBsYXllciIgc3R5bGU9ImZvbnQtc2l6ZToyMHB4O2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjb2xvcjppbmhlcml0O2N1cnNvcjpwb2ludGVyOyI+CiAgICDiiYgKICAgPC9idXR0b24+CjxkaXYgY2xhc3M9ImhpZGRlbiIgaWQ9InBsYXllcldyYXBwZXIiPgo8L2Rpdj4KPGRpdiBpZD0icGxheWVyQ29udHJvbHMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo4cHg7Ij4KPGJ1dHRvbiBpZD0icGxheVBhdXNlIiBzdHlsZT0iZm9udC1zaXplOjIycHg7YmFja2dyb3VuZDpub25lOyI+CiAgICAg4pa6CiAgICA8L2J1dHRvbj4KPHNlbGVjdCBpZD0idHJhY2tTZWxlY3QiPgo8b3B0aW9uIHZhbHVlPSIiPgogICAgICDwn461IEVzY29saGEgdW1hIHRyaWxoYQogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJTb25vX1Byb2Z1bmRvIj4KICAgICAg8J+MmSBTb25vIFByb2Z1bmRvCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9Ik1hbmlmZXN0YcOnw6NvIj4KICAgICAg4pyoIE1hbmlmZXN0YcOnw6NvCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IkF0aXZhw6fDo29fUGluZWFsIj4KICAgICAg8J+noCBBdGl2YcOnw6NvIFBpbmVhbAogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJBbMOtdmlvX2RhX0Fuc2llZGFkZSI+CiAgICAgIPCfjL8gQWzDrXZpbyBkYSBBbnNpZWRhZGUKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iTWVkaXRhw6fDo29fVGhldGEiPgogICAgICDil4kgTWVkaXRhw6fDo28gVGhldGEKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iVmlhZ2VtX0FzdHJhbCI+CiAgICAgIPCfjIwgVmlhZ2VtIEFzdHJhbAogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJGb2NvX1Byb2Z1bmRvIj4KICAgICAg8J+OryBGb2NvIFByb2Z1bmRvCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IkZsb3dfU3RhdGUiPgogICAgICDwn4yKIEZsb3cgU3RhdGUKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iUmVsYXhhbWVudG9fUsOhcGlkbyI+CiAgICAgIPCfkqQgUmVsYXhhbWVudG8gUsOhcGlkbwogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJDb25jZW50cmHDp8Ojb19TdXN0ZW50YWRhIj4KICAgICAg8J+TmiBDb25jZW50cmHDp8OjbyBTdXN0ZW50YWRhCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IkN1cmFfRW1vY2lvbmFsIj4KICAgICAg8J+SliBDdXJhIEVtb2Npb25hbAogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJSZWN1cGVyYcOnw6NvX0bDrXNpY2EiPgogICAgICDwn4+L77iPIFJlY3VwZXJhw6fDo28gRsOtc2ljYQogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJtYXRyaXgiPgogICAgICDwn6eqIE1hdHJpeAogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJ0ZXNzZXJhY3QiPgogICAgICDwn6e/IFRlc3NlcmFjdAogICAgIDwvb3B0aW9uPgo8L3NlbGVjdD4KPHNlbGVjdCBpZD0iYmluYXVyYWxTZWxlY3QiPgo8b3B0aW9uIHZhbHVlPSIiPgogICAgICDwn462IEJpbmF1cmFsIERlc2F0aXZhZG8KICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iU29ub19Qcm9mdW5kbyI+CiAgICAgIPCfjJkgU29ubyBQcm9mdW5kbwogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJNYW5pZmVzdGHDp8OjbyI+CiAgICAgIOKcqCBNYW5pZmVzdGHDp8OjbwogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJBdGl2YcOnw6NvX1BpbmVhbCI+CiAgICAgIPCfp6AgQXRpdmHDp8OjbyBQaW5lYWwKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iQWzDrXZpb19kYV9BbnNpZWRhZGUiPgogICAgICDwn4y/IEFsw612aW8gZGEgQW5zaWVkYWRlCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9Ik1lZGl0YcOnw6NvX1RoZXRhIj4KICAgICAg4peJIE1lZGl0YcOnw6NvIFRoZXRhCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IlZpYWdlbV9Bc3RyYWwiPgogICAgICDwn4yMIFZpYWdlbSBBc3RyYWwKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iRm9jb19Qcm9mdW5kbyI+CiAgICAgIPCfjq8gRm9jbyBQcm9mdW5kbwogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJGbG93X1N0YXRlIj4KICAgICAg8J+MiiBGbG93IFN0YXRlCiAgICAgPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IlJlbGF4YW1lbnRvX1LDoXBpZG8iPgogICAgICDwn5KkIFJlbGF4YW1lbnRvIFLDoXBpZG8KICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iQ29uY2VudHJhw6fDo29fU3VzdGVudGFkYSI+CiAgICAgIPCfk5ogQ29uY2VudHJhw6fDo28gU3VzdGVudGFkYQogICAgIDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJDdXJhX0Vtb2Npb25hbCI+CiAgICAgIPCfkpYgQ3VyYSBFbW9jaW9uYWwKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iUmVjdXBlcmHDp8Ojb19Gw61zaWNhIj4KICAgICAg8J+Pi++4jyBSZWN1cGVyYcOnw6NvIEbDrXNpY2EKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0ibWF0cml4Ij4KICAgICAg8J+nqiBNYXRyaXgKICAgICA8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0idGVzc2VyYWN0Ij4KICAgICAg8J+nvyBUZXNzZXJhY3QKICAgICA8L29wdGlvbj4KPC9zZWxlY3Q+CjxsYWJlbD4KICAgICDwn461IFZvbHVtZSBUcmlsaGEKICAgICA8aW5wdXQgaWQ9InRyYWNrVm9sdW1lIiBtYXg9IjEiIG1pbj0iMCIgc3RlcD0iMC4wMSIgdHlwZT0icmFuZ2UiIHZhbHVlPSIxIi8+CjwvbGFiZWw+CjxsYWJlbD4KICAgICDwn6eYIFZvbHVtZSBCaW5hdXJhbAogICAgIDxpbnB1dCBpZD0iYmluYXVyYWxWb2x1bWUiIG1heD0iMSIgbWluPSIwIiBzdGVwPSIwLjAxIiB0eXBlPSJyYW5nZSIgdmFsdWU9IjEiLz4KPC9sYWJlbD4KPC9kaXY+CjwvZGl2Pgo8YnV0dG9uIGlkPSJ0aGVtZVRvZ2dsZSIgdGl0bGU9IkFsdGVybmFyIHRlbWEiPjwvYnV0dG9uPgo8ZGl2IGlkPSJwYXJ0aWNsZXMtanMiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJzdmctY29udGFpbmVyIiBpZD0ibG9nb0NvbnRhaW5lciI+CjxvYmplY3QgZGF0YT0iYXNzZXRzL2ljb25zLzNEX2xvZ29fRHVhbF9JbmZvZG9zZV8xMC5wbmciIGlkPSJsb2dvT2JqIiB0eXBlPSJpbWFnZS9wbmciPjwvb2JqZWN0Pgo8L2Rpdj4KPGRpdiBjbGFzcz0icmVzcG9uc2UtY29udGFpbmVyIiBpZD0icmVzcG9uc2UiPgo8ZGl2IGNsYXNzPSJwYWdlcy13cmFwcGVyIj4KPGRpdiBjbGFzcz0icGFnZSBpbml0aWFsIGFjdGl2ZSI+CjxzdHJvbmc+Q2xpcXVlIG5vIOKXiSBlIGRpZ2Eg4oCcT2ksIER1YWzigJ0uPC9zdHJvbmc+CjwvZGl2Pgo8L2Rpdj4KPHAgY2xhc3M9ImZvb3Rlci10ZXh0Ij4KPGVtPkRvIHNldSBqZWl0by4gPHN0cm9uZz5TZW1wcmU8L3N0cm9uZz4gw7puaWNvLiA8c3Ryb25nPlNlbXByZTwvc3Ryb25nPiBzZXUuPC9lbT4KPC9wPgo8ZGl2IGNsYXNzPSJyZXNwb25zZS1jb250cm9scyI+CjxkaXYgY2xhc3M9ImNvbnRyb2wtYnV0dG9ucyI+CjxidXR0b24gY2xhc3M9ImNvcHktYnV0dG9uIiB0aXRsZT0iQ29waWFyIj4KPG9iamVjdCBkYXRhPSJhc3NldHMvaWNvbnMvQldfcXVhZF9EdWFsX0luZm9kb3NlLnN2ZyIgaGVpZ2h0PSIyNyIgdHlwZT0iaW1hZ2Uvc3ZnK3htbCIgd2lkdGg9IjI3Ij48L29iamVjdD4KPC9idXR0b24+CjxidXR0b24gY2xhc3M9InBhc3RlLWJ1dHRvbiIgdGl0bGU9IkNvbGFyIj4KPG9iamVjdCBkYXRhPSJhc3NldHMvaWNvbnMvQldfRHVhbF9JbmZvZG9zZS5zdmciIGhlaWdodD0iMjQiIHR5cGU9ImltYWdlL3N2Zyt4bWwiIHdpZHRoPSIyNCI+PC9vYmplY3Q+CjwvYnV0dG9uPgo8YnV0dG9uIGNsYXNzPSJ0b2dnbGUtYnV0dG9uIiBpZD0idG9nZ2xlQnRuIiB0aXRsZT0iTG9naW4gSW5mb2Rvc2UiPgo8b2JqZWN0IGRhdGE9ImFzc2V0cy9pY29ucy9LQkxYLXBhY2svU3VTLWxvZ28tMS5QTkciIGhlaWdodD0iMzMiIHR5cGU9ImltYWdlL3BuZyIgd2lkdGg9IjMzIj48L29iamVjdD4KPC9idXR0b24+CjxidXR0b24gY2xhc3M9ImtpdHR5LWJ1dHRvbiIgaWQ9ImtpdHR5QnRuIiB0aXRsZT0iRXN0dWRvcyI+CjxvYmplY3QgZGF0YT0iYXNzZXRzL2ljb25zL0R1YWxLaXR0eUthcmQtaWNvbi0zLnBuZyIgaGVpZ2h0PSIzMyIgdHlwZT0iaW1hZ2UvcG5nIiB3aWR0aD0iMzMiPjwvb2JqZWN0Pgo8L2J1dHRvbj4KCjxidXR0b24gY2xhc3M9InVwbG9hZC1zeW1ib2xpYy1idXR0b24iIGlkPSJ1cGxvYWRGaWxlQnRuIiB0aXRsZT0iRW52aWFyIEFycXVpdm8iPgogIOKniQo8L2J1dHRvbj4KPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJzeW1ib2xpY0ZpbGVJbnB1dCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IiBhY2NlcHQ9Ii50eHQsLmh0bWwsLmpzb24sLnBkZiwucG5nLC5qcGcsLmpwZWciLz4KCiAgPCEtLSBCb3TDo28gcGFyYSBhYnJpciBvIGdlcmVuY2lhZG9yIGRlIGNoYXZlcyBlIHRyZWluYW1lbnRvcyAtLT4KICA8YnV0dG9uIGNsYXNzPSJrZXltZ3ItYnRuIiBpZD0ia2V5bWdyT3BlbiIgdGl0bGU9IkNoYXZlcyAmYW1wOyBUcmVpbmFtZW50b3MiPgogICAgPCEtLSDDjWNvbmUgcmVwcmVzZW50YW5kbyBjaGF2ZXMgLS0+CiAgICA8c3ZnIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPgogICAgICA8cGF0aCBkPSJNMyAxMmE2IDYgMCAxIDEgMTEuMzEgM0gyMnYzaC0zdjNoLTN2LTNoLTMuNjlBNiA2IDAgMCAxIDMgMTJaIi8+CiAgICAgIDxjaXJjbGUgY3g9IjkiIGN5PSIxMiIgcj0iMiIvPgogICAgPC9zdmc+CiAgPC9idXR0b24+Cgo8L2Rpdj4KPGRpdiBjbGFzcz0icGFnaW5hdGlvbiI+CjxidXR0b24gZGF0YS1hY3Rpb249InByZXYiPuKftTwvYnV0dG9uPgo8c3BhbiBpZD0icGFnZUluZGljYXRvciI+MSAvIDE8L3NwYW4+CjxidXR0b24gZGF0YS1hY3Rpb249Im5leHQiPuKftjwvYnV0dG9uPgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJpbnB1dC1jb250YWluZXIiPgo8aW5wdXQgaWQ9InVzZXJJbnB1dCIgcGxhY2Vob2xkZXI9IkRpZ2E6ICdvaSwgRHVhbCcuLi4iIHR5cGU9InRleHQiLz4KPGJ1dHRvbiBpZD0ic2VuZEJ0biIgdGl0bGU9IkVudmlhciI+4p6kPC9idXR0b24+CjxidXR0b24gaWQ9InZvaWNlQnRuIiB0aXRsZT0iRmFsYXIiPgo8b2JqZWN0IGRhdGE9ImFzc2V0cy9pY29ucy9SZXNldF9idXR0b21fRHVhbC1JbmZvZG9zZS5zdmciIGhlaWdodD0iMzYiIHR5cGU9ImltYWdlL3N2Zyt4bWwiIHdpZHRoPSIzNiI+PC9vYmplY3Q+CjwvYnV0dG9uPgo8L2Rpdj4KPGRpdiBjbGFzcz0ibG9naW4tY29udGFpbmVyIiBpZD0ibG9naW5Cb3giPgoKPGRpdiBpZD0iYWR2YW5jZWRUb2dnbGVPcHRpb25zIiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbi10b3A6MTJweDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjEwcHg7Ij4KICA8aW5wdXQgaWQ9InNrSW5wdXQiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSLwn5SRIE5vdmEgY2hhdmUgU0suLi4iIHN0eWxlPSJwYWRkaW5nOjhweDtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6MXB4IHNvbGlkICMwZmY7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7Y29sb3I6IzBmZjsiLz4KICA8aW5wdXQgaWQ9InJvbGVTeXN0ZW1JbnB1dCIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IvCfk5wgUm9sZSBTeXN0ZW0uLi4iIHN0eWxlPSJwYWRkaW5nOjhweDtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6MXB4IHNvbGlkICMwZmY7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7Y29sb3I6IzBmZjsiLz4KICA8c2VsZWN0IGlkPSJtb2RlbFNlbGVjdG9yIiBzdHlsZT0icGFkZGluZzo4cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7Y29sb3I6IzBmZjtib3JkZXI6MXB4IHNvbGlkICMwZmY7Ij4KICAgIDxvcHRpb24gdmFsdWU9IiI+8J+kliBTZWxlY2lvbmUgbW9kZWxvPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJkZWVwc2Vlay9kZWVwc2Vlay1jaGF0LXYzLTAzMjQ6ZnJlZSI+RGVlcHNlZWsgdjM8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9Im9wZW5jaGF0L29wZW5jaGF0LTMuNS0xMjEwOmZyZWUiPk9wZW5DaGF0IDMuNTwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0ibWlzdHJhbGFpL21peHRyYWwtOHg3YjpmcmVlIj5NaXh0cmFsPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJtZXRhLWxsYW1hL2xsYW1hLTMtNzBiLWluc3RydWN0OmZyZWUiPkxMYU1BIDMgNzBCPC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgPGJ1dHRvbiBvbmNsaWNrPSJzYWx2YXJDb25maWd1cmFjb2VzQXZhbmNhZGFzKCkiIHN0eWxlPSJwYWRkaW5nOjhweDtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6MXB4IHNvbGlkICMwZmY7YmFja2dyb3VuZDojMGZmO2NvbG9yOiMwMDA7Zm9udC13ZWlnaHQ6Ym9sZDsiPvCfkr4gQXRpdmFyIENvbmZpZ3VyYcOnw7VlczwvYnV0dG9uPgo8L2Rpdj4KCjxmb3JtIGlkPSJsb2dpbkZvcm0iPgo8aW5wdXQgaWQ9InVzZXJOYW1lIiBwbGFjZWhvbGRlcj0iTm9tZSBkbyB1c3XDoXJpbyIgcmVxdWlyZWQ9IiIgdHlwZT0idGV4dCIvPgo8aW5wdXQgaWQ9ImFzc2lzdGFudElucHV0IiBwbGFjZWhvbGRlcj0iTm9tZSBkdWFsLmluZm9kb3NlIiByZXF1aXJlZD0iIiB0eXBlPSJ0ZXh0Ii8+CjxidXR0b24gdHlwZT0ic3VibWl0Ij5BdGl2YXI8L2J1dHRvbj4KPC9mb3JtPgo8L2Rpdj4KPHNjcmlwdD4KICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsICgpID0+IHsKY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvZ2dsZVBsYXllciIpOwpjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5ZXJDb250cm9scyIpOwpjb25zdCBwbGF5UGF1c2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGxheVBhdXNlIik7CmNvbnN0IHRyYWNrU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRyYWNrU2VsZWN0Iik7CmNvbnN0IGJpbmF1cmFsU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJpbmF1cmFsU2VsZWN0Iik7CmNvbnN0IHRyYWNrVm9sdW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRyYWNrVm9sdW1lIik7CmNvbnN0IGJpbmF1cmFsVm9sdW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJpbmF1cmFsVm9sdW1lIik7CmNvbnN0IHRyYWNrQXVkaW8gPSBuZXcgQXVkaW8oKTsKY29uc3QgYmluYXVyYWxBdWRpbyA9IG5ldyBBdWRpbygpOwp0b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CmNvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSBjb250cm9scy5zdHlsZS5kaXNwbGF5ID09PSAiZmxleCIgPyAibm9uZSIgOiAiZmxleCI7Cn0pOwpwbGF5UGF1c2VCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CmlmICh0cmFja0F1ZGlvLnNyYykgdHJhY2tBdWRpby5wYXVzZWQgPyB0cmFja0F1ZGlvLnBsYXkoKSA6IHRyYWNrQXVkaW8ucGF1c2UoKTsKaWYgKGJpbmF1cmFsQXVkaW8uc3JjKSBiaW5hdXJhbEF1ZGlvLnBhdXNlZCA/IGJpbmF1cmFsQXVkaW8ucGxheSgpIDogYmluYXVyYWxBdWRpby5wYXVzZSgpOwpwbGF5UGF1c2VCdG4udGV4dENvbnRlbnQgPSAodHJhY2tBdWRpby5wYXVzZWQgJiYgYmluYXVyYWxBdWRpby5wYXVzZWQpID8gIuKWuiIgOiAi4o+4IjsKfSk7CnRyYWNrU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsICgpID0+IHsKaWYgKHRyYWNrU2VsZWN0LnZhbHVlKSB7CnRyYWNrQXVkaW8uc3JjID0gYGFzc2V0cy9zb3VuZHMvdHJpbGhhcy8ke3RyYWNrU2VsZWN0LnZhbHVlfS5tcDNgOwp0cmFja0F1ZGlvLmxvb3AgPSB0cnVlOwp0cmFja0F1ZGlvLnZvbHVtZSA9IHRyYWNrVm9sdW1lLnZhbHVlOwp0cmFja0F1ZGlvLnBsYXkoKTsKcGxheVBhdXNlQnRuLnRleHRDb250ZW50ID0gIuKPuCI7Cn0gZWxzZSB7CnRyYWNrQXVkaW8ucGF1c2UoKTsKdHJhY2tBdWRpby5zcmMgPSAiIjsKfQp9KTsKYmluYXVyYWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgKCkgPT4gewppZiAoYmluYXVyYWxTZWxlY3QudmFsdWUpIHsKYmluYXVyYWxBdWRpby5zcmMgPSBgYXNzZXRzL3NvdW5kcy9iaW5hdXJhbC8ke2JpbmF1cmFsU2VsZWN0LnZhbHVlfS53YXZgOwpiaW5hdXJhbEF1ZGlvLmxvb3AgPSB0cnVlOwpiaW5hdXJhbEF1ZGlvLnZvbHVtZSA9IGJpbmF1cmFsVm9sdW1lLnZhbHVlOwpiaW5hdXJhbEF1ZGlvLnBsYXkoKTsKfSBlbHNlIHsKYmluYXVyYWxBdWRpby5wYXVzZSgpOwpiaW5hdXJhbEF1ZGlvLnNyYyA9ICIiOwp9Cn0pOwp0cmFja1ZvbHVtZS5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsICgpID0+IHsKdHJhY2tBdWRpby52b2x1bWUgPSB0cmFja1ZvbHVtZS52YWx1ZTsKfSk7CmJpbmF1cmFsVm9sdW1lLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwgKCkgPT4gewpiaW5hdXJhbEF1ZGlvLnZvbHVtZSA9IGJpbmF1cmFsVm9sdW1lLnZhbHVlOwp9KTsKfSk7CiAgPC9zY3JpcHQ+CjxzY3JpcHQ+CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbihlKSB7CiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsKICAgICAgdHlwZTogImlmcmFtZUNsaWNrIiwKICAgICAgeDogZS5jbGllbnRYLAogICAgICB5OiBlLmNsaWVudFkKICAgIH0sICIqIik7CiAgfSk7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGZ1bmN0aW9uKGUpIHsKICAgIGNvbnN0IHQgPSBlLnRvdWNoZXNbMF07CiAgICBpZiAodCkgewogICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAiaWZyYW1lQ2xpY2siLAogICAgICAgIHg6IHQuY2xpZW50WCwKICAgICAgICB5OiB0LmNsaWVudFkKICAgICAgfSwgIioiKTsKICAgIH0KICB9KTsKPC9zY3JpcHQ+CjxzY3JpcHQ+CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ0bi1leHBhbmRpci1yaXR1YWwiKT8uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICBjb25zdCBwdWxzb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicHVsc29zIik7CiAgICBpZiAocHVsc29zKSB7CiAgICAgIHB1bHNvcy5jbGFzc0xpc3QudG9nZ2xlKCJleHBhbmRlZCIpOwogICAgICBpZiAoIXB1bHNvcy5jbGFzc0xpc3QuY29udGFpbnMoImV4cGFuZGVkIikpIHsKICAgICAgICBwdWxzb3Muc2Nyb2xsVG9wID0gcHVsc29zLnNjcm9sbEhlaWdodDsKICAgICAgfQogICAgfQogIH0pOwo8L3NjcmlwdD4KPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGFydGljbGVzLmpzQDIuMC4wL3BhcnRpY2xlcy5taW4uanMiIGRlZmVyPjwvc2NyaXB0Pgo8c2NyaXB0PgogICAoZnVuY3Rpb24oKXsKICAgIGNvbnN0IFNUT1JBR0VfS0VZICA9ICdpbmZvZG9zZUVuYWJsZWQnLAogICAgICAgICAgVEhFTUVfS0VZICAgID0gJ2luZm9kb3NlVGhlbWUnLAogICAgICAgICAgS0lUX1BSSU1BUlkgID0gJ2Fzc2V0cy9pY29ucy9EdWFsS2l0dHlLYXJkLWljb24tMy5wbmcnLAogICAgICAgICAgS0lUX0ZBTExCQUNLID0gJ2Fzc2V0cy9pY29ucy9kdWFsX0R1YWxfSW5mb2Rvc2Uuc3ZnJywKICAgICAgICAgIENPTkZJRyA9IHsKICAgICAgICAgICAgVFJBSU5JTkdfRklMRTonZGF0YS9TdXBlcl9UcmVpbmFtZW50b19Vbml2ZXJzYWxfRHVhbF9JbmZvZG9zZV92MS0yOS50eHQnLAogICAgICAgICAgICBBUElfVVJMICAgICAgOidodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2NoYXQvY29tcGxldGlvbnMnLAogICAgICAgICAgICBNT0RFTCAgICAgICAgOidkZWVwc2Vlay9kZWVwc2Vlay1jaGF0LXYzLTAzMjQ6ZnJlZScsCiAgICAgICAgICAgIFRFTVAgICAgICAgICA6IDAuMiwKICAgICAgICAgICAgQ0hVTktfU0laRSAgIDoxMjAwMCwKICAgICAgICAgICAgQVVUSF9UT0tFTiAgIDonJwogICAgICAgICAgfTsKCiAgICBsZXQgdHJhaW5pbmcgPSAnJywgY2h1bmtzID0gW10sIGNodW5rSW5kZXggPSAwOwogICAgbGV0IGlzRW5hYmxlZCA9IGZhbHNlLCBpc1N0dWR5aW5nID0gZmFsc2U7CiAgICBsZXQgdXNlck5hbWUgPSAnJywgYXNzaXN0YW50QmFzZSA9ICcnOwogICAgbGV0IGNvbnZlcnNhdGlvbiA9IFtdOwogICAgbGV0IHBhZ2VzID0gW10sIGN1cnJlbnRQYWdlID0gMCwgYXV0b0FkdmFuY2UgPSB0cnVlOwogICAgbGV0IG9yaWdpbmFsTG9nbyA9ICcnOwoKICAgIGNvbnN0ICQgPSBzID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocyk7CiAgICBjb25zdCBjcmVhdGUgPSAodCxjLGgpID0+IHsKICAgICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7CiAgICAgIGlmKGMpIGUuY2xhc3NOYW1lID0gYzsKICAgICAgaWYoaCkgZS5pbm5lckhUTUwgPSBoOwogICAgICByZXR1cm4gZTsKICAgIH07CiAgICBwYXJ0aWNsZXNKUygncGFydGljbGVzLWpzJyx7CiAgICAgIHBhcnRpY2xlczp7IG51bWJlcjp7dmFsdWU6NDB9LCBjb2xvcjp7dmFsdWU6WycjMGZmJywnI2YwZiddfSwKICAgICAgICBzaGFwZTp7dHlwZTonY2lyY2xlJ30sIG9wYWNpdHk6e3ZhbHVlOjAuNH0sIHNpemU6e3ZhbHVlOjIuNH0sCiAgICAgICAgbW92ZTp7ZW5hYmxlOnRydWUsc3BlZWQ6MS41fQogICAgICB9LCByZXRpbmFfZGV0ZWN0OnRydWUKICAgIH0pOwoKICAgIGZ1bmN0aW9uIGFwcGx5VGhlbWUodGhlbWUpewogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xpZ2h0JywnbWVkaXVtJywndmliZScpOwogICAgICBpZih0aGVtZSE9PSdkYXJrJykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKHRoZW1lKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRvZ2dsZVRoZW1lKCl7CiAgICAgIGNvbnN0IG9yZGVyPVsnZGFyaycsJ2xpZ2h0JywnbWVkaXVtJywndmliZSddOwogICAgICBjb25zdCBjdXI9bG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKXx8J2RhcmsnOwogICAgICBjb25zdCBuZXh0PW9yZGVyWyhvcmRlci5pbmRleE9mKGN1cikrMSklb3JkZXIubGVuZ3RoXTsKICAgICAgYXBwbHlUaGVtZShuZXh0KTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVEhFTUVfS0VZLG5leHQpOwogICAgfQogICAgZnVuY3Rpb24gY2hhbmdlTG9nbyhzcmNzKXsKICAgICAgY29uc3QgY29udD0kKCcjbG9nb0NvbnRhaW5lcicpLCBvYmo9JCgnI2xvZ29PYmonKTsKICAgICAgY29udC5jbGFzc0xpc3QuYWRkKCdmYWRpbmcnKTsKICAgICAgY29udC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJyxmdW5jdGlvbiBvbmNlKCl7CiAgICAgICAgY29udC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJyxvbmNlKTsKICAgICAgICBpZihBcnJheS5pc0FycmF5KHNyY3MpKXsKICAgICAgICAgIG9iai5kYXRhPXNyY3NbMF07CiAgICAgICAgICBvYmoub25lcnJvcj0oKT0+b2JqLmRhdGE9c3Jjc1sxXTsKICAgICAgICB9IGVsc2Ugb2JqLmRhdGE9c3JjczsKICAgICAgICBjb250LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGluZycpOwogICAgICB9KTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBpbml0KCl7CiAgICAgIGFwcGx5VGhlbWUobG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKXx8J2RhcmsnKTsKICAgICAgJCgnI3RoZW1lVG9nZ2xlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRvZ2dsZVRoZW1lKTsKICAgICAgb3JpZ2luYWxMb2dvID0gJCgnI2xvZ29PYmonKS5kYXRhOwoKICAgICAgdHJ5IHsKICAgICAgICB0cmFpbmluZyA9IGF3YWl0IGZldGNoKENPTkZJRy5UUkFJTklOR19GSUxFKS50aGVuKHI9PnIudGV4dCgpKTsKICAgICAgICBmb3IobGV0IGk9MDtpPHRyYWluaW5nLmxlbmd0aDtpKz1DT05GSUcuQ0hVTktfU0laRSl7CiAgICAgICAgICBjaHVua3MucHVzaCh0cmFpbmluZy5zbGljZShpLGkrQ09ORklHLkNIVU5LX1NJWkUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoJ0ZhbGhhIG5vIHRyZWlubzonLGUpOyB9CgogICAgICBsb2FkQ29uZmlnKCk7CiAgICAgIGlmKCFjb252ZXJzYXRpb24ubGVuZ3RoKXsKICAgICAgICBjb252ZXJzYXRpb24ucHVzaCh7CiAgICAgICAgICByb2xlOidzeXN0ZW0nLAogICAgICAgICAgY29udGVudDooY2h1bmtzWzBdfHx0cmFpbmluZykrJ1xuXG5Wb2PDqiDDqSBvIGFzc2lzdGVudGUgRHVhbC5pbmZvZG9zZS4nCiAgICAgICAgfSk7CiAgICAgICAgY2h1bmtJbmRleD0xOwogICAgICB9CiAgICAgIGJpbmRVSSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRDb25maWcoKXsKICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVkpPT09JzEnKXsKICAgICAgICBpc0VuYWJsZWQ9dHJ1ZTsKICAgICAgICB1c2VyTmFtZT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlck5hbWUnKXx8Jyc7CiAgICAgICAgYXNzaXN0YW50QmFzZT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXNzaXN0YW50QmFzZScpfHwnJzsKICAgICAgICBjb252ZXJzYXRpb249W3sKICAgICAgICAgIHJvbGU6J3N5c3RlbScsCiAgICAgICAgICBjb250ZW50OihjaHVua3NbMF18fHRyYWluaW5nKQogICAgICAgICAgICArYFxuXG5Vc3XDoXJpbzogJHt1c2VyTmFtZX0uXG5Bc3Npc3RlbnRlOiAke2Fzc2lzdGFudEJhc2V9IGR1YWwuaW5mb2Rvc2UuYAogICAgICAgIH1dOwogICAgICAgIGNodW5rSW5kZXg9MTsKICAgICAgICB1cGRhdGVVSSgpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlVUkoKXsKICAgICAgJCgnI3RvZ2dsZUJ0bicpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsaXNFbmFibGVkKTsKICAgICAgJCgnI2tpdHR5QnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyxpc1N0dWR5aW5nKTsKICAgICAgJCgnI2Fzc2lzdGFudE5hbWUnKS50ZXh0Q29udGVudCA9IGlzU3R1ZHlpbmcKICAgICAgICA/ICdFc3R1ZG9zIGR1YWwuaW5mb2Rvc2UnCiAgICAgICAgOiAoaXNFbmFibGVkID8gYCR7YXNzaXN0YW50QmFzZX0gZHVhbC5pbmZvZG9zZWAgOiAnJyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd0xvYWRpbmcobXNnKXsKICAgICAgY29uc3Qgd3JhcD0kKCcucGFnZXMtd3JhcHBlcicpOwogICAgICB3cmFwLmlubmVySFRNTD0nJzsKICAgICAgY29uc3QgcD1jcmVhdGUoJ2RpdicsJ3BhZ2UgYWN0aXZlJyksIGZvb3Q9Y3JlYXRlKCdwJywnZm9vdGVyLXRleHQgbG9hZGluZycsJycpOwogICAgICBtc2cuc3BsaXQoJycpLmZvckVhY2goKGNoLGkpPT57CiAgICAgICAgY29uc3Qgc3A9Y3JlYXRlKCdzcGFuJyk7IHNwLnRleHRDb250ZW50PWNoOwogICAgICAgIHNwLnN0eWxlLmFuaW1hdGlvbkRlbGF5PShpKjAuMDIpKydzJzsgc3AuY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpOwogICAgICAgIGZvb3QuYXBwZW5kQ2hpbGQoc3ApOwogICAgICB9KTsKICAgICAgcC5hcHBlbmRDaGlsZChmb290KTsgd3JhcC5hcHBlbmRDaGlsZChwKTsKICAgICAgJCgnI3BhZ2VJbmRpY2F0b3InKS50ZXh0Q29udGVudCA9ICcxIC8gMSc7CiAgICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTsKICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UobXNnKSk7CiAgICB9CgogICAgZnVuY3Rpb24gc3BsaXRUZXh0KHQpewogICAgICBsZXQgcHMgPSB0LnNwbGl0KC9cblxzKlxuLykuZmlsdGVyKHA9PnAudHJpbSgpKTsKICAgICAgaWYocHMubGVuZ3RoICUgMyAhPT0gMCl7CiAgICAgICAgcHMgPSAodC5tYXRjaCgvW15cLiFcP10rW1wuIVw/XSsvZyl8fFtdKS5tYXAocz0+cy50cmltKCkpOwogICAgICB9CiAgICAgIGNvbnN0IG91dD1bXTsKICAgICAgZm9yKGxldCBpPTA7aTxwcy5sZW5ndGg7aSs9Myl7CiAgICAgICAgb3V0LnB1c2gocHMuc2xpY2UoaSxpKzMpKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclJlc3BvbnNlKHR4dCl7CiAgICAgIGNvbnN0IHdyYXA9JCgnLnBhZ2VzLXdyYXBwZXInKTsKICAgICAgd3JhcC5pbm5lckhUTUw9Jyc7IHBhZ2VzPVtdOyBjdXJyZW50UGFnZT0wOyBhdXRvQWR2YW5jZT10cnVlOwogICAgICB0eHQgPSB0eHQgCiAgICAgICAgLnJlcGxhY2UoL2AoW15gXSspYC9nLCc8Y29kZT4kMTwvY29kZT4nKSAKICAgICAgICAucmVwbGFjZSgvXCpcKiguKz8pXCpcKi9nLCc8c3Ryb25nPiQxPC9zdHJvbmc+JykgCiAgICAgICAgLnJlcGxhY2UoL1wqKC4rPylcKi9nLCc8ZW0+JDE8L2VtPicpOwogICAgICAvLyBBSlVTVEUgMjogU3Vic3RpdHVpciBlbW9qaXMgcG9yIHPDrW1ib2xvcyBVbmljb2RlIGRlIGZvcm1hIGNvbnNpc3RlbnRlLgogICAgICAvLyBFc3RlIG1hcGVhbWVudG8gY29udmVydGUgb3MgZW1vamlzIHRlbcOhdGljb3MgZW0gc8OtbWJvbG9zIFVuaWNvZGUgbWFpcyAibGltcG9zIi4KICAgICAgY29uc3QgZW1vamlNYXAgPSB7ICfwn46BJzon4peHJywgJ/CfkYHvuI8nOifil4YnLCAn4pqh77iPJzon4pymJywgJ+KaoSc6J+KcpicgfTsKICAgICAgdHh0ID0gdHh0LnJlcGxhY2UoLyhbXHUxRjMwMC1cdTFGOUZGXHUyNjAwLVx1MjZGRlx1MjcwMC1cdTI3QkZdKS9nLCBtID0+IGVtb2ppTWFwW21dIHx8IG0pOwogICAgICBjb25zdCBncm91cHMgPSBzcGxpdFRleHQodHh0KSwgCiAgICAgICAgICAgIHRpdGxlcyA9IFsn8J+OgSBSZWNvbXBlbnNhIEluaWNpYWwnLCfwn5GB77iPIEV4cGxvcmHDp8OjbycsJ+Kaoe+4jyBBbnRlY2lwYcOnw6NvJ107CgogICAgICAvLyBBSlVTVEUgMTogQ29tYmluYXIgYmxvY29zIGNvbnNlY3V0aXZvcyBzZSBhIHNvbWEgZG8gY29udGXDumRvIGZvciBtdWl0byBjdXJ0YS4KICAgICAgZnVuY3Rpb24gbWVyZ2VTaG9ydFBhcmFncmFwaHMocGFyYWdyYXBocywgdGhyZXNob2xkID0gMzApIHsKICAgICAgICBjb25zdCBtZXJnZWQgPSBbXTsKICAgICAgICBsZXQgYnVmZmVyID0gJyc7CiAgICAgICAgcGFyYWdyYXBocy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgLy8gcmVtb3ZlIHRhZ3MgcGFyYSBjYWxjdWxhciBjb21wcmltZW50byByZWFsCiAgICAgICAgICBjb25zdCBwbGFpbiA9IHAucmVwbGFjZSgvPFtePl0rPi9nLCcnKS50cmltKCk7CiAgICAgICAgICBpZihwbGFpbi5sZW5ndGggPCB0aHJlc2hvbGQpIHsKICAgICAgICAgICAgYnVmZmVyICs9IChidWZmZXIgPyAnICcgOiAnJykgKyBwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYoYnVmZmVyKSB7IG1lcmdlZC5wdXNoKGJ1ZmZlci50cmltKCkpOyBidWZmZXI9Jyc7IH0KICAgICAgICAgICAgbWVyZ2VkLnB1c2gocCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYoYnVmZmVyKSBtZXJnZWQucHVzaChidWZmZXIudHJpbSgpKTsKICAgICAgICByZXR1cm4gbWVyZ2VkOwogICAgICB9CiAgICAgIGdyb3Vwcy5mb3JFYWNoKChncnAsIGdpKT0+eyAKICAgICAgICAvLyB1bmlyIHBlcXVlbm9zIHBhcsOhZ3JhZm9zIGFudGVzIGRlIHJlbmRlcml6YXIKICAgICAgICBjb25zdCBtZXJnZWRHcnAgPSBtZXJnZVNob3J0UGFyYWdyYXBocyhncnApOyAKICAgICAgICBjb25zdCBwZyA9IGNyZWF0ZSgnZGl2JywncGFnZScrKGdpPT09MD8nIGFjdGl2ZSc6JycpLCcnKTsgCiAgICAgICAgbWVyZ2VkR3JwLmZvckVhY2goKHBhcmEsaik9PnsgCiAgICAgICAgICBjb25zdCBjbHMgPSBqPT09MD8naW50cm8nOmo9PT0xPydtaWRkbGUnOidlbmRpbmcnOyAKICAgICAgICAgIC8vIEFKVVNURSAzOiBkZXRlY3RhciB0b2tlbnMgZGUgY29yICgjUkdCIG91ICNSUkdHQkIpIGRlbnRybyBkbyBwYXLDoWdyYWZvIGUgYXBsaWPDoS1sb3Mgbm8gZXN0aWxvCiAgICAgICAgICBsZXQgY29sb3JNYXRjaCA9IHBhcmEubWF0Y2goLyMoWzAtOWEtZkEtRl17Myw2fSkvKTsKICAgICAgICAgIGxldCBjb2xvclRva2VuID0gbnVsbDsKICAgICAgICAgIGlmKGNvbG9yTWF0Y2gpewogICAgICAgICAgICBjb2xvclRva2VuID0gY29sb3JNYXRjaFswXTsKICAgICAgICAgICAgcGFyYSA9IHBhcmEucmVwbGFjZShjb2xvclRva2VuLCcnKTsKICAgICAgICAgICAgLy8gbm9ybWFsaXphciB0b2tlbnMgYWJyZXZpYWRvcyAoI2YwZiAtPiAjZmYwMGZmKQogICAgICAgICAgICBpZihjb2xvclRva2VuLmxlbmd0aCA9PT0gNCl7CiAgICAgICAgICAgICAgY29uc3QgciA9IGNvbG9yVG9rZW5bMV0sIGcgPSBjb2xvclRva2VuWzJdLCBiID0gY29sb3JUb2tlblszXTsKICAgICAgICAgICAgICBjb2xvclRva2VuID0gJyMnICsgciArIHIgKyBnICsgZyArIGIgKyBiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBibG9jayA9IGNyZWF0ZSgnZGl2JyxgcmVzcG9uc2UtYmxvY2sgJHtjbHN9YCxgPHA+JHtwYXJhfTwvcD5gKTsgCiAgICAgICAgICBpZihjb2xvclRva2VuKXsKICAgICAgICAgICAgYmxvY2suc3R5bGUuY29sb3IgPSBjb2xvclRva2VuOwogICAgICAgICAgICBibG9jay5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBjb2xvclRva2VuOwogICAgICAgICAgICBibG9jay5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjNzIGVhc2UnOwogICAgICAgICAgfQogICAgICAgICAgYmxvY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57CiAgICAgICAgICAgIGF1dG9BZHZhbmNlPWZhbHNlOwogICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblBhcmEgPSBwYXJhCiAgICAgICAgICAucmVwbGFjZSgvWyLigJzigJ3igJjigJldL2csICcnKSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzcGFzCiAgICAgICAgICAucmVwbGFjZSgvW1x1MUYzMDAtXHUxRjZGRlx1MUY5MDAtXHUxRjlGRlx1MjYwMC1cdTI2RkZcdTI3MDAtXHUyN0JGXS9nLCAnJyk7IC8vIGVtb2ppcwogICAgICAKICAgICAgICBjb25zdCB1dHRlciA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoY2xlYW5QYXJhKTsKICAgICAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7CiAgICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyKTsKICAgICAgCiAgICAgICAgaWYgKCFibG9jay5kYXRhc2V0LnNwb2tlbikgewogICAgICAgICAgYmxvY2suZGF0YXNldC5zcG9rZW4gPSAnMSc7CiAgICAgICAgICBibG9jay5jbGFzc0xpc3QuYWRkKCdjbGlja2VkJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJyk7CiAgICAgICAgICBpZiAoIWlzRW5hYmxlZCkgewogICAgICAgICAgICBpc0VuYWJsZWQgPSB0cnVlOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgJzEnKTsKICAgICAgICAgICAgdXBkYXRlVUkoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2hvd0xvYWRpbmcoJyBQdWxzbyBlbSBFeHBhbnPDo28uLi4nKTsKICAgICAgICAgICAgICBjb252ZXJzYXRpb24ucHVzaCh7cm9sZTondXNlcicsY29udGVudDpgJHt0aXRsZXNbal19XG5cbiR7cGFyYX1gfSk7CiAgICAgICAgICAgICAgY2FsbEFJKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcGcuYXBwZW5kQ2hpbGQoYmxvY2spOwogICAgICAgIH0pOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQocGcpOwogICAgICAgIHBhZ2VzLnB1c2gocGcpOwogICAgICB9KTsKCiAgICAgICQoJyNwYWdlSW5kaWNhdG9yJykudGV4dENvbnRlbnQgPSBgMSAvICR7cGFnZXMubGVuZ3RofWA7CiAgICAgIGF1dG9TcGVha1BhZ2UoMCk7CiAgICB9CgogICAgZnVuY3Rpb24gYXV0b1NwZWFrUGFnZShpKXsKICBjb25zdCB0eHRzID0gQXJyYXkuZnJvbShwYWdlc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCdwJykpCiAgICAubWFwKHA9PnAudGV4dENvbnRlbnQpLmpvaW4oJyAnKTsKICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7CiAgY29uc3QgdXR0ZXIgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHR4dHMpOwogIAogIHV0dGVyLm9uZW5kID0gKCkgPT4gewogICAgaWYgKGF1dG9BZHZhbmNlICYmIGkgPCBwYWdlcy5sZW5ndGggLSAxKSB7CiAgICAgIGNoYW5nZVBhZ2UoMSk7CiAgICB9IGVsc2UgaWYgKGkgPT09IHBhZ2VzLmxlbmd0aCAtIDEpIHsKICAgICAgLy8gQXF1aSwgc8OzIGFww7NzIGEgw5pMVElNQSBww6FnaW5hOgogICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsoCiAgICAgICAgbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSgnRG8gc2V1IGplaXRvLiBTZW1wcmUgw7puaWNvLiBTZW1wcmUgc2V1LicpCiAgICAgICk7CiAgICB9CiAgfTsKCiAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyKTsKfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVBhZ2UoZCl7CiAgICAgIGNvbnN0IG5wID0gY3VycmVudFBhZ2UgKyBkOwogICAgICBpZihucDwwfHxucD49cGFnZXMubGVuZ3RoKSByZXR1cm47CiAgICAgIHBhZ2VzW2N1cnJlbnRQYWdlXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgcGFnZXNbbnBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICBjdXJyZW50UGFnZT1ucDsKICAgICAgJCgnI3BhZ2VJbmRpY2F0b3InKS50ZXh0Q29udGVudCA9IGAke25wKzF9IC8gJHtwYWdlcy5sZW5ndGh9YDsKICAgICAgaWYoYXV0b0FkdmFuY2UpIGF1dG9TcGVha1BhZ2UobnApCiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gY2FsbEFJKCl7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goQ09ORklHLkFQSV9VUkwsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAvLyBBIGNoYXZlIGRlIGF1dG9yaXphw6fDo28gc2Vyw6EgaW5qZXRhZGEgZGluYW1pY2FtZW50ZSBwZWxvIGdlcmVuY2lhZG9yIGRlIGNoYXZlcyAoZmV0Y2ggd3JhcHBlcikKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgfSwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgbW9kZWw6IENPTkZJRy5NT0RFTCwKICAgICAgICAgICAgbWVzc2FnZXM6IGNvbnZlcnNhdGlvbiwKICAgICAgICAgICAgdGVtcGVyYXR1cmU6IENPTkZJRy5URU1QCiAgICAgICAgICB9KQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHBheWxvYWQuZXJyb3I/Lm1lc3NhZ2UgfHwgcmVzLnN0YXR1c1RleHQpOwogICAgICAgIGlmICghcGF5bG9hZC5jaG9pY2VzPy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignUmVzcG9zdGEgdmF6aWEgZGEgQVBJJyk7CiAgICAgICAgY29uc3QgYW5zID0gcGF5bG9hZC5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudC50cmltKCk7CiAgICAgICAgY29udmVyc2F0aW9uLnB1c2goeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYW5zIH0pOwogICAgICAgIHJlbmRlclJlc3BvbnNlKGFucyk7CgogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdjYWxsQUkgZXJybzonLCBlcnIpOwogICAgICAgIGNvbnN0IGZhbGxiYWNrID0gJ0Rlc2N1bHBlLCBuw6NvIGNvbnNlZ3VpIG9idGVyIHJlc3Bvc3RhLiBUZW50ZSBub3ZhbWVudGUuJzsKICAgICAgICBjb252ZXJzYXRpb24ucHVzaCh7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBmYWxsYmFjayB9KTsKICAgICAgICByZW5kZXJSZXNwb25zZShmYWxsYmFjayk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiaW5kVUkoKXsKICAgICAgJCgnI3NlbmRCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsb25TZW5kKTsKICAgICAgJCgnI3VzZXJJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJyxlPT57IGlmKGUua2V5PT09J0VudGVyJykgb25TZW5kKCk7IH0pOwogICAgICAkKCcjdm9pY2VCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PnsKICAgICAgICBjb25zdCByZWMgPSBuZXcgKHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbnx8d2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uKSgpOwogICAgICAgIHJlYy5sYW5nPSdwdC1CUic7IHJlYy5zdGFydCgpOwogICAgICAgIHJlYy5vbnJlc3VsdD1ldnQ9PnsKICAgICAgICAgICQoJyN1c2VySW5wdXQnKS52YWx1ZT1ldnQucmVzdWx0c1swXVswXS50cmFuc2NyaXB0OyBvblNlbmQoKTsKICAgICAgICB9OwogICAgICB9KTsKCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sLWJ1dHRvbnMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZT0+ewogICAgICAgIGlmKGUudGFyZ2V0LmNsb3Nlc3QoJy5jb3B5LWJ1dHRvbicpKXsKICAgICAgICAgIGNvbnN0IHR4dD1wYWdlcy5tYXAocD0+cC5pbm5lclRleHQudHJpbSgpKS5qb2luKCdcblxuJyk7CiAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0eHQpOwogICAgICAgIH0KICAgICAgICBpZihlLnRhcmdldC5jbG9zZXN0KCcucGFzdGUtYnV0dG9uJykpewogICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4odHh0PT4kKCcjdXNlcklucHV0JykudmFsdWU9dHh0KTsKICAgICAgICB9CiAgICAgICAgaWYoZS50YXJnZXQuY2xvc2VzdCgnI3RvZ2dsZUJ0bicpKXsKICAgICAgICAgIGlmKCFpc0VuYWJsZWQpICQoJyNsb2dpbkJveCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlzRW5hYmxlZD1mYWxzZTsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpOwogICAgICAgICAgICBjb252ZXJzYXRpb249W107IHVwZGF0ZVVJKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGUudGFyZ2V0LmNsb3Nlc3QoJyNraXR0eUJ0bicpKXsKICAgICAgICAgIGlzU3R1ZHlpbmc9IWlzU3R1ZHlpbmc7CiAgICAgICAgICBpZihpc1N0dWR5aW5nKXsKICAgICAgICAgICAgY29udmVyc2F0aW9uPVt7CiAgICAgICAgICAgICAgcm9sZTonc3lzdGVtJywKICAgICAgICAgICAgICBjb250ZW50OihjaHVua3NbMF18fHRyYWluaW5nKSsnXG5cblZvY8OqIMOpIEFzc2lzdGVudGUgZGUgRXN0dWRvcyBkdWFsLmluZm9kb3NlLicKICAgICAgICAgICAgfV07CiAgICAgICAgICAgIGNoYW5nZUxvZ28oW0tJVF9QUklNQVJZLEtJVF9GQUxMQkFDS10pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hhbmdlTG9nbyhvcmlnaW5hbExvZ28pOyBsb2FkQ29uZmlnKCk7CiAgICAgICAgICB9CiAgICAgICAgICB1cGRhdGVVSSgpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxlPT57CiAgICAgICAgaWYoZS50YXJnZXQuZGF0YXNldC5hY3Rpb249PT0ncHJldicpIGNoYW5nZVBhZ2UoLTEpOwogICAgICAgIGlmKGUudGFyZ2V0LmRhdGFzZXQuYWN0aW9uPT09J25leHQnKSBjaGFuZ2VQYWdlKDEpOwogICAgICAgIGF1dG9BZHZhbmNlPWZhbHNlOwogICAgICB9KTsKCiAgICAgICQoJyNsb2dpbkZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLGU9PnsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgdT0kKCcjdXNlck5hbWUnKS52YWx1ZS50cmltKCksIGE9JCgnI2Fzc2lzdGFudElucHV0JykudmFsdWUudHJpbSgpOwogICAgICAgIGlmKCF1fHwhYSkgcmV0dXJuIGFsZXJ0KCdQcmVlbmNoYSBvcyBkYWRvcycpOwogICAgICAgIGlzRW5hYmxlZD10cnVlOyB1c2VyTmFtZT11OyBhc3Npc3RhbnRCYXNlPWE7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksJzEnKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlck5hbWUnLHUpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhc3Npc3RhbnRCYXNlJyxhKTsKICAgICAgICBsb2FkQ29uZmlnKCk7ICQoJyNsb2dpbkJveCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICB9KTsKCiAgICAgIC8vIHRvZ2dsZSBhcGVuYXMgZGEgw6FyZWEgZGUgcmVzcG9zdGEgKGJsb2Nvcy9sb2FkaW5nKQogICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxlPT57CiAgICAgICAgaWYoZS50YXJnZXQuY2xvc2VzdCgnLmZvb3Rlci10ZXh0JykpewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2VzLXdyYXBwZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdjb2xsYXBzZWQnKTsKICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5mb290ZXItdGV4dCcpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25TZW5kKCl7CiAgICAgIGNvbnN0IHJhdz0kKCcjdXNlcklucHV0JykudmFsdWUudHJpbSgpOyBpZighcmF3KSByZXR1cm47CiAgICAgICQoJyN1c2VySW5wdXQnKS52YWx1ZT0nJzsgYXV0b0FkdmFuY2U9ZmFsc2U7CiAgICAgIHNob3dMb2FkaW5nKCdQdWxzbyBlbnZpYWRvLi4uUmVjZWJlbmRvIGludGVuw6fDo2/igKYnKTsKICAgICAgY29udmVyc2F0aW9uLnB1c2goe3JvbGU6J3VzZXInLGNvbnRlbnQ6cmF3fSk7CiAgICAgIGNhbGxBSSgpOwogICAgfQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLGluaXQpOwogIH0pKCk7CiAgPC9zY3JpcHQ+CjxzY3JpcHQ+CmZ1bmN0aW9uIHJlbmRlclJlc3BvbnNlQmxvY2tzKHsgaW50cm8gPSAiIiwgbWlkZGxlID0gIiIsIGVuZGluZyA9ICIiIH0pIHsKICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucGFnZXMtd3JhcHBlciIpOwoKICBmdW5jdGlvbiBjcmVhdGVCbG9jayhjb250ZW50LCBjbGFzc05hbWUpIHsKICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBibG9jay5jbGFzc05hbWUgPSAicmVzcG9uc2UtYmxvY2sgIiArIGNsYXNzTmFtZTsKCiAgICBjb25zdCBwYXJzZWQgPSBjb250ZW50CiAgICAgIC5yZXBsYWNlKC8oXHB7RW1vamlfUHJlc2VudGF0aW9ufXxccHtFbW9qaX0pL2d1LCBtYXRjaCA9PiB7CiAgICAgICAgcmV0dXJuIGA8YnV0dG9uIGNsYXNzPSJzeW1ib2wtYnRuIiBvbmNsaWNrPSJyZWdpc3RyYXJQdWxzb0VFbnZpYXIoJ0Vtb2ppOiAke21hdGNofScpIj4ke21hdGNofTwvYnV0dG9uPmA7CiAgICAgIH0pCiAgICAgIC5yZXBsYWNlKC9cWyguKz8pXF0vZywgKG1hdGNoLCBwMSkgPT4gewogICAgICAgIHJldHVybiBgPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ0biIgb25jbGljaz0icmVnaXN0cmFyUHVsc29FRW52aWFyKCdbJHtwMX1dJykiPlske3AxfV08L2J1dHRvbj5gOwogICAgICB9KTsKCiAgICBibG9jay5pbm5lckhUTUwgPSBwYXJzZWQ7CgogICAgYmxvY2suYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICAgIGJsb2NrLmNsYXNzTGlzdC50b2dnbGUoImV4cGFuZGVkIik7CiAgICAgIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKICAgICAgaWYgKHB1bHNvcykgcHVsc29zLmNsYXNzTGlzdC50b2dnbGUoImV4cGFuZGVkIik7CiAgICAgIGxvZ01pc3RpY28oIuKXiSBFeHBhbmRpdSBibG9jbzogIiArIGNsYXNzTmFtZSk7CiAgICB9KTsKCiAgICByZXR1cm4gYmxvY2s7CiAgfQoKICBpZiAoaW50cm8pICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQmxvY2soaW50cm8sICJpbnRybyIpKTsKICBpZiAobWlkZGxlKSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQmxvY2sobWlkZGxlLCAibWlkZGxlIikpOwogIGlmIChlbmRpbmcpIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVCbG9jayhlbmRpbmcsICJlbmRpbmciKSk7Cn0KPC9zY3JpcHQ+CjxzY3JpcHQ+CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiB7CiAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmZvb3Rlci10ZXh0Iik7CiAgY29uc3QgaW5wdXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW5wdXQtY29udGFpbmVyIik7CiAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuY29udHJvbC1idXR0b25zIik7CiAgY29uc3QgcGFnaW5hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wYWdpbmF0aW9uIik7CmNvbnN0IHJpdHVhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidG4tZXhwYW5kaXItcml0dWFsIik7CgogIC8vIEVzdGFkbyBpbmljaWFsOiBvY3VsdGFyIFVJIGUgYm90w7Vlcy/DrWNvbmVzCiAgaWYgKGlucHV0Q29udGFpbmVyKSBpbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICBpZiAoY29udHJvbHMpIGNvbnRyb2xzLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogIGlmIChwYWdpbmF0aW9uKSBwYWdpbmF0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogIGlmIChyaXR1YWxCdG4pIHJpdHVhbEJ0bi5jbGFzc0xpc3QuYWRkKCdtb3ZlLXRvLWJvdHRvbS1yaXR1YWwnKTsKICBpZiAoZm9vdGVyKSBmb290ZXIuY2xhc3NMaXN0LmFkZCgnbW92ZS10by1ib3R0b20nKTsKICAvLyBPY3VsdGFyIGxvZ28sIHN5bWJvbCBiYXIgZSBib3TDtWVzIGxhdGVyYWlzCiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN2Zy1jb250YWluZXIsIC5zeW1ib2wtYmFyLCAjdXBsb2FkQ29tcG9uZW50QnRuLCAjcmVtb3RlQ29tcG9uZW50QnRuLCAjdG9nZ2xlRGVjb2RlckJ0bicpLmZvckVhY2goZWwgPT4gewogICAgaWYgKGVsKSBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIH0pOwoKICBpZiAoZm9vdGVyICYmIGlucHV0Q29udGFpbmVyICYmIGNvbnRyb2xzICYmIHBhZ2luYXRpb24pIHsKICAgIGZvb3Rlci5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgICAgaW5wdXRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZGVuIik7CiAgICAgIGNvbnRyb2xzLmNsYXNzTGlzdC50b2dnbGUoImhpZGRlbiIpOwogICAgICBwYWdpbmF0aW9uLmNsYXNzTGlzdC50b2dnbGUoImhpZGRlbiIpOwogICAgcml0dWFsQnRuLmNsYXNzTGlzdC50b2dnbGUoIm1vdmUtdG8tYm90dG9tLXJpdHVhbCIpOwogICAgICBmb290ZXIuY2xhc3NMaXN0LnRvZ2dsZSgibW92ZS10by1ib3R0b20iKTsKICAgIH0pOwogIH0KfSk7Cjwvc2NyaXB0Pgo8c2NyaXB0PgogICAvLyDwn46nIFNvbnMgZGUgaW50ZXJmYWNlIC0gQ29ibHV4IFVJIFNhbXBsZXMKY29uc3QgdWlTb3VuZHMgPSB7CmNsaWNrOiBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMvdWlTYW1wbGVzL25hdmlnYXRpb24ud2F2JyksCmhvdmVyOiBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMvdWlTYW1wbGVzL2hvdmVyLndhdicpLApjb25maXJtOiBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMvdWlTYW1wbGVzL2NvbmZpcm0ud2F2JyksCmJhY2s6IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy91aVNhbXBsZXMvYmFjay53YXYnKSwKdGVtYVVwOiBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMvdWlTYW1wbGVzL2JhY2stYWN0aW9uLndhdicpLAp0ZW1hRG93bjogbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL3VpU2FtcGxlcy9iYWNrLWFjdGlvbi53YXYnKSwKfTsKLy8gVm9sdW1lIHBhZHLDo28KZm9yIChjb25zdCBrZXkgaW4gdWlTb3VuZHMpIHsKdWlTb3VuZHNba2V5XS52b2x1bWUgPSAwLjQ7Cn0KLy8g4puUIFJlbW92ZXIgbWljcm9mb25lIGF1dG9tw6F0aWNvCi8vIHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiA9IG51bGw7Ci8vIHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbiA9IG51bGw7Ci8vIPCfjq8gU29ucyBhbyBpbnRlcmFnaXIKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsICgpID0+IHsKLy8gQ2xpcXVlIGVtIHF1YWxxdWVyIGJvdMOjbwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJidXR0b24iKS5mb3JFYWNoKGJ0biA9PiB7CmJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKdWlTb3VuZHMuY2xpY2suY3VycmVudFRpbWUgPSAwOwp1aVNvdW5kcy5jbGljay5wbGF5KCkuY2F0Y2goKCkgPT4ge30pOwp9KTsKYnRuLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsICgpID0+IHsKdWlTb3VuZHMuaG92ZXIuY3VycmVudFRpbWUgPSAwOwp1aVNvdW5kcy5ob3Zlci5wbGF5KCkuY2F0Y2goKCkgPT4ge30pOwp9KTsKfSk7Ci8vIEVudmlhciBtZW5zYWdlbSAoY29uZmlybWFyKQpjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRCdG4iKTsKaWYgKHNlbmRCdG4pIHsKc2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKdWlTb3VuZHMuY29uZmlybS5jdXJyZW50VGltZSA9IDA7CnVpU291bmRzLmNvbmZpcm0ucGxheSgpLmNhdGNoKCgpID0+IHt9KTsKfSk7Cn0KLy8gVHJvY2FyIHRlbWEgbWFudWFsbWVudGUgKHRlbWFTZWxlY3RvcikKY29uc3QgdGhlbWVTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0aGVtZVNlbGVjdG9yIik7CmlmICh0aGVtZVNlbGVjdG9yKSB7CmxldCBsYXN0SW5kZXggPSB0aGVtZVNlbGVjdG9yLnNlbGVjdGVkSW5kZXg7CnRoZW1lU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgKCkgPT4gewpjb25zdCBuZXdJbmRleCA9IHRoZW1lU2VsZWN0b3Iuc2VsZWN0ZWRJbmRleDsKaWYgKG5ld0luZGV4ID4gbGFzdEluZGV4KSB7CnVpU291bmRzLnRlbWFVcC5jdXJyZW50VGltZSA9IDA7CnVpU291bmRzLnRlbWFVcC5wbGF5KCkuY2F0Y2goKCkgPT4ge30pOwp9IGVsc2UgaWYgKG5ld0luZGV4IDwgbGFzdEluZGV4KSB7CnVpU291bmRzLnRlbWFEb3duLmN1cnJlbnRUaW1lID0gMDsKdWlTb3VuZHMudGVtYURvd24ucGxheSgpLmNhdGNoKCgpID0+IHt9KTsKfQpsYXN0SW5kZXggPSBuZXdJbmRleDsKfSk7Cn0KLy8gTmF2ZWdhw6fDo28gZW50cmUgcMOhZ2luYXMKZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uPSJwcmV2Il0nKS5mb3JFYWNoKGJ0biA9PgpidG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CnVpU291bmRzLmJhY2suY3VycmVudFRpbWUgPSAwOwp1aVNvdW5kcy5iYWNrLnBsYXkoKS5jYXRjaCgoKSA9PiB7fSk7Cn0pCik7CmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWFjdGlvbj0ibmV4dCJdJykuZm9yRWFjaChidG4gPT4KYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewp1aVNvdW5kcy5jb25maXJtLmN1cnJlbnRUaW1lID0gMDsKdWlTb3VuZHMuY29uZmlybS5wbGF5KCkuY2F0Y2goKCkgPT4ge30pOwp9KQopOwp9KTsKICA8L3NjcmlwdD4KPHNjcmlwdD4KICAgLy8g8J+OpyBOb3ZvcyBzb25zIGNvbSBiYXNlIGVtIElEcwpjb25zdCB1aUJMID0gewp0b2dnbGU6IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy91aVNhbXBsZXMvdG9nZ2xlQnRuLXNmeC53YXYnKSwKa2l0dHk6IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy91aVNhbXBsZXMva2l0dHlCdG4tc2Z4LndhdicpLAphdGl2YXI6IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy91aVNhbXBsZXMvYXRpdmFyLWNsaWNrLXRvZ2dsZUJ0bi53YXYnKSwKbmF2OiBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMvdWlTYW1wbGVzL25hdmlnYXRpb24ud2F2JyksCmNhbmNlbDogbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL3VpU2FtcGxlcy9jYW5jZWwud2F2JykKfTsKLy8gVm9sdW1lIHBhZHLDo28KZm9yIChjb25zdCBrIGluIHVpQkwpIHVpQkxba10udm9sdW1lID0gMC40NTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsICgpID0+IHsKLy8gQm90w6NvIHRvZ2dsZSAobG9naW4pCmNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b2dnbGVCdG4iKTsKaWYgKHRvZ2dsZSkgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewp1aUJMLnRvZ2dsZS5jdXJyZW50VGltZSA9IDA7CnVpQkwudG9nZ2xlLnBsYXkoKS5jYXRjaCgoKT0+e30pOwp9KTsKLy8gQm90w6NvIGtpdHR5CmNvbnN0IGtpdHR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtpdHR5QnRuIik7CmlmIChraXR0eSkga2l0dHkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CnVpQkwua2l0dHkuY3VycmVudFRpbWUgPSAwOwp1aUJMLmtpdHR5LnBsYXkoKS5jYXRjaCgoKT0+e30pOwp9KTsKLy8gQm90w6NvIGF0aXZhciBubyBsb2dpbgpjb25zdCBsb2dpbkZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9naW5Gb3JtIik7CmlmIChsb2dpbkZvcm0pIHsKbG9naW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsICgpID0+IHsKdWlCTC5hdGl2YXIuY3VycmVudFRpbWUgPSAwOwp1aUJMLmF0aXZhci5wbGF5KCkuY2F0Y2goKCk9Pnt9KTsKfSk7Cn0KLy8gQ29waWFyIC8gY29sYXIKZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvcHktYnV0dG9uLCAucGFzdGUtYnV0dG9uJykuZm9yRWFjaChidG4gPT4KYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewp1aUJMLmNhbmNlbC5jdXJyZW50VGltZSA9IDA7CnVpQkwuY2FuY2VsLnBsYXkoKS5jYXRjaCgoKT0+e30pOwp9KQopOwp9KTsKICA8L3NjcmlwdD4KPHN0eWxlPgojYnRuLWV4cGFuZGlyLXJpdHVhbC5tb3ZlLXRvLWJvdHRvbS1yaXR1YWwgewogIGJvdHRvbTogMThweCAhaW1wb3J0YW50OwogIGFuaW1hdGlvbjogbW92ZVJpdHVhbERvd24gMC40cyBlYXNlIGZvcndhcmRzICFpbXBvcnRhbnQ7Cn0KQGtleWZyYW1lcyBtb3ZlUml0dWFsRG93biB7CiAgZnJvbSB7IGJvdHRvbTogMTkzcHg7IG9wYWNpdHk6IDAuNDsgfQogIHRvICAgeyBib3R0b206IDE4cHg7IG9wYWNpdHk6IDAuNjsgfQp9Cjwvc3R5bGU+CjxzdHlsZT4KI2xheW91dFRvZ2dsZVBhbmVsIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiA1MHB4OwogIHJpZ2h0OiAyMHB4OwogIGJhY2tncm91bmQ6IHZhcigtLWJnKTsKICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgZm9udC1mYW1pbHk6IE1vbnRzZXJyYXQsIHNhbnMtc2VyaWY7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmcpOwogIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgcGFkZGluZzogMTRweDsKICB6LWluZGV4OiA5OTk5OTk7CiAgZGlzcGxheTogbm9uZTsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGdhcDogMTBweDsKfQojbGF5b3V0VG9nZ2xlUGFuZWwgbGFiZWwgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBnYXA6IDZweDsKICBmb250LXNpemU6IDEzcHg7Cn0KI2xheW91dFRvZ2dsZVBhbmVsIGlucHV0W3R5cGU9ImNoZWNrYm94Il0gewogIHRyYW5zZm9ybTogc2NhbGUoMS4yKTsKICBhY2NlbnQtY29sb3I6ICMwZmY7Cn0KI3VzZXJCdXR0b24gewogIGRpc3BsYXk6IG5vbmU7CiAgcG9zaXRpb246IGZpeGVkOwogIGJvdHRvbTogNDBweDsKICBsZWZ0OiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwZmYsICNmMGYpOwogIGNvbG9yOiAjMDAwOwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIHBhZGRpbmc6IDEwcHggMTRweDsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIHotaW5kZXg6IDk5OTk7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZvbnQtc2l6ZTogMTRweDsKICBib3gtc2hhZG93OiAwIDAgMTJweCAjMGZmOwp9CgovKiBCb3TDo28gZGUgVG9nZ2xlIGRvIFBhaW5lbCAqLwojdG9nZ2xlUGFuZWxCdG4gewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDIwcHg7CiAgcmlnaHQ6IDMzcHg7CiAgYmFja2dyb3VuZDogdmFyKC0tYmcpOwogIGNvbG9yOiB2YXIoLS10ZXh0KTsKICBib3JkZXI6IG5vbmU7CiAgcGFkZGluZzogOHB4IDEycHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXNpemU6IDE2cHg7CiAgei1pbmRleDogOTk5OwogIGJveC1zaGFkb3c6IDAgMCAxMHB4IHZhcigtLWJnKTsKfQovKiAtLS0gQ3VzdG9taXphw6fDtWVzIGRlIGRlc2VtcGVuaG8gZSB2aXNpYmlsaWRhZGUgLS0tICovCi8qIE9jdWx0YSBvIGJvdMOjbyBTw5xNQsOcUyBwb3IgcGFkcsOjbyAqLwojc3VtYnVzLXRvZ2dsZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9Ci8qIENvbmZpZ3VyYcOnw7VlcyBkZSBwZXJmb3JtYW5jZTogbG93L21lZGl1bS9oaWdoICovCmJvZHkucGVyZi1sb3cgI3BhcnRpY2xlcy1qcyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CmJvZHkucGVyZi1sb3cgLnJlc3BvbnNlLWJsb2NrLApib2R5LnBlcmYtbG93IC5zdmctY29udGFpbmVyIG9iamVjdCB7CiAgYW5pbWF0aW9uOiBub25lICFpbXBvcnRhbnQ7Cn0KLyogbWVkaXVtIGUgaGlnaCBwZXJtaXRlbSBwYXJ0w61jdWxhcyAobmFkYSBhIGZhemVyKSAqLwo8L3N0eWxlPgoKPCEtLSBCb3TDo28gZGUgVG9nZ2xlIC0tPgo8YnV0dG9uIGlkPSJ0b2dnbGVQYW5lbEJ0biI+4pqZ77iPPC9idXR0b24+Cgo8IS0tIFBhaW5lbCBkZSBjb250cm9sZSBzaW1iacOzdGljbyAtLT4KPGRpdiBpZD0ibGF5b3V0VG9nZ2xlUGFuZWwiPgogIDxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG9uY2hhbmdlPSJ0b2dnbGVFbGVtZW50KCcjcmVzcG9uc2UnLCB0aGlzKSI+IE1vc3RyYXIgSUE8L2xhYmVsPgogIDxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG9uY2hhbmdlPSJ0b2dnbGVFbGVtZW50KCcuc3ZnLWNvbnRhaW5lcicsIHRoaXMpIj4gTW9zdHJhciBMb2dvPC9sYWJlbD4KICA8bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0idG9nZ2xlRWxlbWVudCgnI2tvYmxsdXhQbGF5ZXInLCB0aGlzKSI+IE1vc3RyYXIgUGxheWVyPC9sYWJlbD4KICA8bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0idG9nZ2xlRWxlbWVudCgnI3VwbG9hZENvbXBvbmVudEJ0biwjcmVtb3RlQ29tcG9uZW50QnRuLCN0b2dnbGVEZWNvZGVyQnRuJywgdGhpcykiPiBNb3N0cmFyIEJvdMO1ZXMgTGF0ZXJhaXM8L2xhYmVsPgogIDxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG9uY2hhbmdlPSJ0b2dnbGVFbGVtZW50KCcuc3ltYm9sLWJhcicsIHRoaXMpIj4gTW9zdHJhciBTeW1ib2xCYXI8L2xhYmVsPgogIDxoci8+CiAgICA8IS0tIE9ww6fDtWVzIGRlIGRlc2VtcGVuaG86IExvdy9NZWRpdW0vSGlnaCAtLT4KICAgIDxmaWVsZHNldCBpZD0icGVyZm9ybWFuY2VPcHRpb25zIiBzdHlsZT0iYm9yZGVyOm5vbmU7cGFkZGluZzowOyI+CiAgICAgIDxsZWdlbmQgc3R5bGU9ImZvbnQtc2l6ZTowLjllbTttYXJnaW4tYm90dG9tOjRweDsiPkRlc2VtcGVuaG88L2xlZ2VuZD4KICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJwZXJmb3JtYW5jZSIgdmFsdWU9ImxvdyI+IExvdzwvbGFiZWw+CiAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0icGVyZm9ybWFuY2UiIHZhbHVlPSJtZWRpdW0iIGNoZWNrZWQ+IE1lZGl1bTwvbGFiZWw+CiAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InBlcmZvcm1hbmNlIiB2YWx1ZT0iaGlnaCI+IEhpZ2g8L2xhYmVsPgogICAgPC9maWVsZHNldD4KICAgIDxoci8+CiAgPGJ1dHRvbiBvbmNsaWNrPSJtb3N0cmFyVG9kb3MoKSI+TW9zdHJhciBUb2RvczwvYnV0dG9uPgogIDxidXR0b24gb25jbGljaz0ib2N1bHRhclRvZG9zKCkiPk9jdWx0YXIgVG9kb3M8L2J1dHRvbj4KICA8aHIvPgogIDxidXR0b24gb25jbGljaz0ic2FsdmFyRXN0YWRvVUkoKSI+U2FsdmFyIFByZWZlcsOqbmNpYTwvYnV0dG9uPgo8L2Rpdj4KCjwhLS0gQm90w6NvIHNpbWJpw7N0aWNvIGRvIHVzdcOhcmlvIC0tPgo8YnV0dG9uIGlkPSJ1c2VyQnV0dG9uIj7imK8gVXNlckJ1dHRvbjwvYnV0dG9uPgoKPHNjcmlwdD4KLy8gVG9nZ2xlIGRvIHBhaW5lbCBkZSBjb250cm9sZQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlUGFuZWxCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlvdXRUb2dnbGVQYW5lbCcpOwogIHBhbmVsLnN0eWxlLmRpc3BsYXkgPSAocGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IGdldENvbXB1dGVkU3R5bGUocGFuZWwpLmRpc3BsYXkgPT09ICdub25lJykgPyAnZmxleCcgOiAnbm9uZSc7Cn0pOwoKLy8gRnVuw6fDtWVzIGLDoXNpY2FzIGRlIG1vc3RyYXIvb2N1bHRhcgpmdW5jdGlvbiB0b2dnbGVFbGVtZW50KHNlbGVjdG9yLCBpbnB1dCkgewogIHNlbGVjdG9yLnNwbGl0KCcsJykuZm9yRWFjaChzZWwgPT4gewogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWwpLmZvckVhY2goZWwgPT4gewogICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gaW5wdXQuY2hlY2tlZCA/ICcnIDogJ25vbmUnOwogICAgfSk7CiAgfSk7Cn0KZnVuY3Rpb24gb2N1bHRhclRvZG9zKCkgewogIFsnI3Jlc3BvbnNlJywgJy5zdmctY29udGFpbmVyJywgJyNrb2JsbHV4UGxheWVyJywgJyN1cGxvYWRDb21wb25lbnRCdG4nLCAnI3JlbW90ZUNvbXBvbmVudEJ0bicsICcjdG9nZ2xlRGVjb2RlckJ0bicsICcuc3ltYm9sLWJhciddCiAgICAuZm9yRWFjaChzZWwgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWwpLmZvckVhY2goZWwgPT4gZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJykpOwp9CmZ1bmN0aW9uIG1vc3RyYXJUb2RvcygpIHsKICBbJyNyZXNwb25zZScsICcuc3ZnLWNvbnRhaW5lcicsICcja29ibGx1eFBsYXllcicsICcjdXBsb2FkQ29tcG9uZW50QnRuJywgJyNyZW1vdGVDb21wb25lbnRCdG4nLCAnI3RvZ2dsZURlY29kZXJCdG4nLCAnLnN5bWJvbC1iYXInXQogICAgLmZvckVhY2goc2VsID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsKS5mb3JFYWNoKGVsID0+IGVsLnN0eWxlLmRpc3BsYXkgPSAnJykpOwp9CgovLyBMb2NhbFN0b3JhZ2UKZnVuY3Rpb24gc2FsdmFyRXN0YWRvVUkoKSB7CiAgY29uc3QgZXN0YWRvID0gewogICAgcmVzcG9uc2U6IGdldERpc3BsYXlTdGF0ZSgnI3Jlc3BvbnNlJyksCiAgICBzdmc6IGdldERpc3BsYXlTdGF0ZSgnLnN2Zy1jb250YWluZXInKSwKICAgIHBsYXllcjogZ2V0RGlzcGxheVN0YXRlKCcja29ibGx1eFBsYXllcicpLAogICAgYm90b2VzOiBnZXREaXNwbGF5U3RhdGUoJyN1cGxvYWRDb21wb25lbnRCdG4sI3JlbW90ZUNvbXBvbmVudEJ0biwjdG9nZ2xlRGVjb2RlckJ0bicpLAogICAgYmFyOiBnZXREaXNwbGF5U3RhdGUoJy5zeW1ib2wtYmFyJykKICB9OwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXlvdXRDb25maWcnLCBKU09OLnN0cmluZ2lmeShlc3RhZG8pKTsKICBsb2dNaXN0aWNvPy4oIvCfjpvvuI8gUHJlZmVyw6puY2lhIGRlIGxheW91dCBzYWx2YS4iKTsKfQpmdW5jdGlvbiBnZXREaXNwbGF5U3RhdGUoc2VsZWN0b3IpIHsKICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3Iuc3BsaXQoJywnKVswXSk7CiAgcmV0dXJuIGVsPy5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7Cn0KZnVuY3Rpb24gY2FycmVnYXJFc3RhZG9VSSgpIHsKICBjb25zdCBzYXZlZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xheW91dENvbmZpZycpIHx8ICd7fScpOwogIE9iamVjdC5lbnRyaWVzKHNhdmVkKS5mb3JFYWNoKChba2V5LCB2aXNpYmxlXSkgPT4gewogICAgbGV0IHNlbDsKICAgIGlmIChrZXkgPT09ICdyZXNwb25zZScpIHNlbCA9ICcjcmVzcG9uc2UnOwogICAgaWYgKGtleSA9PT0gJ3N2ZycpIHNlbCA9ICcuc3ZnLWNvbnRhaW5lcic7CiAgICBpZiAoa2V5ID09PSAncGxheWVyJykgc2VsID0gJyNrb2JsbHV4UGxheWVyJzsKICAgIGlmIChrZXkgPT09ICdib3RvZXMnKSBzZWwgPSAnI3VwbG9hZENvbXBvbmVudEJ0biwjcmVtb3RlQ29tcG9uZW50QnRuLCN0b2dnbGVEZWNvZGVyQnRuJzsKICAgIGlmIChrZXkgPT09ICdiYXInKSBzZWwgPSAnLnN5bWJvbC1iYXInOwogICAgc2VsICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsKS5mb3JFYWNoKGVsID0+IGVsLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZScpOwogIH0pOwp9CgovLyBNT0RPIFNJTUJJw5NUSUNPIFBSRVNFVApmdW5jdGlvbiBhdGl2YXJNb2RvKG1vZG8pIHsKICBvY3VsdGFyVG9kb3MoKTsKICBjb25zdCBtb2RvcyA9IHsKICAgIHB1bHNlOiBbJyNrb2JsbHV4UGxheWVyJ10sCiAgICBoYXBweUhvdXI6IFsnI3Jlc3BvbnNlJywgJy5zeW1ib2wtYmFyJ10sCiAgICByaXR1YWw6IFsnI3Jlc3BvbnNlJywgJyNrb2JsbHV4UGxheWVyJ10sCiAgICBleHBsb3JhY2FvOiBbJyNyZXNwb25zZScsICcuc3ltYm9sLWJhcicsICcja29ibGx1eFBsYXllcicsICcjdXBsb2FkQ29tcG9uZW50QnRuJywgJyNyZW1vdGVDb21wb25lbnRCdG4nLCAnI3RvZ2dsZURlY29kZXJCdG4nLCAnLnN2Zy1jb250YWluZXInXQogIH07CiAgKG1vZG9zW21vZG9dIHx8IFtdKS5mb3JFYWNoKHNlbCA9PiB7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbCkuZm9yRWFjaChlbCA9PiBlbC5zdHlsZS5kaXNwbGF5ID0gJycpOwogIH0pOwogIGxvZ01pc3RpY28/Ligi4pqZ77iPIE1vZG8gYXRpdmFkbzogIiArIG1vZG8pOwp9CgovLyBDYXJyZWdhciBjb25maWcgYW8gaW5pY2lhcgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgKCkgPT4gewogIGNhcnJlZ2FyRXN0YWRvVUkoKTsKICAvLyBJbmljaWFsaXphciBuw612ZWwgZGUgZGVzZW1wZW5obyBlIGxpc3RlbmVycyBkZSBwZXJmb3JtYW5jZQogIGNvbnN0IHBlcmZSYWRpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcGVyZm9ybWFuY2VPcHRpb25zIGlucHV0W25hbWU9InBlcmZvcm1hbmNlIl0nKTsKICBwZXJmUmFkaW9zLmZvckVhY2gocmFkaW8gPT4gewogICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICBjb25zdCBsZXZlbCA9IHJhZGlvLnZhbHVlOwogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BlcmYtbG93JywncGVyZi1tZWRpdW0nLCdwZXJmLWhpZ2gnKTsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwZXJmLScgKyBsZXZlbCk7CiAgICB9KTsKICB9KTsKfSk7Cjwvc2NyaXB0Pgo8c2NyaXB0PgovLyA9PT09PT09PT0gTWFya2Rvd24gc2ltYmnDs3RpY28gPT09PT09PT09CmZ1bmN0aW9uIHJlbmRlck1hcmtkb3duKHJhdykgewogIHJldHVybiByYXcKICAgIC5yZXBsYWNlKC8oWyLigJzigJ0nXSkoLis/KVwxL2csICc8YnV0dG9uIGNsYXNzPSJyZXNwb25zZS1idXR0b24iPiIkMiI8L2J1dHRvbj4nKQogICAgLnJlcGxhY2UoL1xbKC4rPylcXS9nLCAnPGJ1dHRvbiBjbGFzcz0icmVzcG9uc2UtYnV0dG9uIj5bJDFdPC9idXR0b24+JykKICAgIC5yZXBsYWNlKC8oW1x1MjMxQS1cdTJCNTVcdXsxRjMwMH0tXHV7MUY2RkZ9XHV7MUY5MDB9LVx1ezFGOUZGfV0pL2d1LCAnPGJ1dHRvbiBjbGFzcz0iZW1vamktYnV0dG9uIj4kMTwvYnV0dG9uPicpCiAgICAucmVwbGFjZSgvXiMjIyAoLiopL2dtLCAnPGgzPiQxPC9oMz4nKQogICAgLnJlcGxhY2UoL14jIyAoLiopL2dtLCAnPGgyPiQxPC9oMj4nKQogICAgLnJlcGxhY2UoL14jICguKikvZ20sICc8aDE+JDE8L2gxPicpCiAgICAucmVwbGFjZSgvXCpcKiguKj8pXCpcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpCiAgICAucmVwbGFjZSgvXCooLio/KVwqL2csICc8ZW0+JDE8L2VtPicpCiAgICAucmVwbGFjZSgvYChbXmBdKylgL2csICc8Y29kZT4kMTwvY29kZT4nKQogICAgLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7Cn0KCi8vID09PT09PT09PSBTZXBhcmFkb3IgZGUgcGFyw6FncmFmb3Mgcm9idXN0byA9PT09PT09PT0KZnVuY3Rpb24gc3BsaXRUZXh0KHQpIHsKICByZXR1cm4gdAogICAgLnNwbGl0KC9cblxzKlxufCg/PCFcZClcLiB8ISB8XD8gLykKICAgIC5tYXAocCA9PiBwLnRyaW0oKSkKICAgIC5maWx0ZXIoQm9vbGVhbikKICAgIC5yZWR1Y2UoKGFjYywgY3VyLCBpKSA9PiB7CiAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihpIC8gMyk7CiAgICAgIGFjY1tpbmRleF0gPSBhY2NbaW5kZXhdIHx8IFtdOwogICAgICBhY2NbaW5kZXhdLnB1c2goY3VyKTsKICAgICAgcmV0dXJuIGFjYzsKICAgIH0sIFtdKTsKfQoKLy8gPT09PT09PT09IEZ1bsOnw6NvIHJlbmRlclJlc3BvbnNlIHNpbWJpw7N0aWNhID09PT09PT09PQpmdW5jdGlvbiByZW5kZXJSZXNwb25zZSh0eHQpIHsKICBjb25zdCB3cmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnBhZ2VzLXdyYXBwZXIiKTsKICB3cmFwLmlubmVySFRNTCA9ICIiOwogIGxldCBwYWdlcyA9IFtdLCBjdXJyZW50UGFnZSA9IDA7CiAgdHh0ID0gcmVuZGVyTWFya2Rvd24odHh0KTsKICAvLyBBSlVTVEUgMjogU3Vic3RpdHVpciBlbW9qaXMgcG9yIHPDrW1ib2xvcyBVbmljb2RlIHBhcmEgbGltcGV6YSB2aXN1YWwuCiAgY29uc3QgZW1vamlNYXAyID0geyAn8J+OgSc6J+KXhycsICfwn5GB77iPJzon4peGJywgJ+Kaoe+4jyc6J+KcpicsICfimqEnOifinKYnIH07CiAgdHh0ID0gdHh0LnJlcGxhY2UoLyhbXHUxRjMwMC1cdTFGOUZGXHUyNjAwLVx1MjZGRlx1MjcwMC1cdTI3QkZdKS9nLCBtID0+IGVtb2ppTWFwMlttXSB8fCBtKTsKCiAgLy8gQUpVU1RFIDE6IENvbWJpbmFyIGJsb2NvcyBjb25zZWN1dGl2b3MgcGVxdWVub3MKICBmdW5jdGlvbiBtZXJnZVNob3J0UGFyYWdyYXBoczIocGFyYWdyYXBocywgdGhyZXNob2xkID0gMzApIHsKICAgIGNvbnN0IG1lcmdlZCA9IFtdOwogICAgbGV0IGJ1ZmZlciA9ICcnOwogICAgcGFyYWdyYXBocy5mb3JFYWNoKHAgPT4gewogICAgICBjb25zdCBwbGFpbiA9IHAucmVwbGFjZSgvPFtePl0rPi9nLCcnKS50cmltKCk7CiAgICAgIGlmKHBsYWluLmxlbmd0aCA8IHRocmVzaG9sZCkgewogICAgICAgIGJ1ZmZlciArPSAoYnVmZmVyID8gJyAnIDogJycpICsgcDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihidWZmZXIpIHsgbWVyZ2VkLnB1c2goYnVmZmVyLnRyaW0oKSk7IGJ1ZmZlcj0nJzsgfQogICAgICAgIG1lcmdlZC5wdXNoKHApOwogICAgICB9CiAgICB9KTsKICAgIGlmKGJ1ZmZlcikgbWVyZ2VkLnB1c2goYnVmZmVyLnRyaW0oKSk7CiAgICByZXR1cm4gbWVyZ2VkOwogIH0KCiAgY29uc3QgZ3JvdXBzID0gc3BsaXRUZXh0KHR4dCksCiAgICAgICAgdGl0bGVzID0gWyLwn46BIFJlY29tcGVuc2EgSW5pY2lhbCIsICLwn5GB77iPIEV4cGxvcmHDp8OjbyIsICLimqHvuI8gQW50ZWNpcGHDp8OjbyJdOwoKICBncm91cHMuZm9yRWFjaCgoZ3JwLCBnaSkgPT4gewogICAgY29uc3QgbWVyZ2VkR3JwID0gbWVyZ2VTaG9ydFBhcmFncmFwaHMyKGdycCk7CiAgICBjb25zdCBwZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgcGcuY2xhc3NOYW1lID0gInBhZ2UiICsgKGdpID09PSAwID8gIiBhY3RpdmUiIDogIiIpOwoKICAgIG1lcmdlZEdycC5mb3JFYWNoKChwYXJhLCBqKSA9PiB7CiAgICAgIGNvbnN0IGNscyA9IGogPT09IDAgPyAiaW50cm8iIDogaiA9PT0gMSA/ICJtaWRkbGUiIDogImVuZGluZyI7CiAgICAgIC8vIEFKVVNURSAzOiBpbnRlcnByZXRhciB0b2tlbnMgZGUgY29yIG5vIHRleHRvIGUgYXBsaWNhciBubyBlc3RpbG8KICAgICAgbGV0IGNvbG9yTWF0Y2gyID0gcGFyYS5tYXRjaCgvIyhbMC05YS1mQS1GXXszLDZ9KS8pOwogICAgICBsZXQgY29sb3JUb2tlbjIgPSBudWxsOwogICAgICBpZihjb2xvck1hdGNoMil7CiAgICAgICAgY29sb3JUb2tlbjIgPSBjb2xvck1hdGNoMlswXTsKICAgICAgICBwYXJhID0gcGFyYS5yZXBsYWNlKGNvbG9yVG9rZW4yLCcnKTsKICAgICAgICBpZihjb2xvclRva2VuMi5sZW5ndGggPT09IDQpewogICAgICAgICAgY29uc3Qgcj1jb2xvclRva2VuMlsxXSwgZz1jb2xvclRva2VuMlsyXSwgYj1jb2xvclRva2VuMlszXTsKICAgICAgICAgIGNvbG9yVG9rZW4yID0gJyMnICsgciArIHIgKyBnICsgZyArIGIgKyBiOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBibG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBibG9jay5jbGFzc05hbWUgPSAicmVzcG9uc2UtYmxvY2sgIiArIGNsczsKICAgICAgYmxvY2suaW5uZXJIVE1MID0gIjxwPiIgKyBwYXJhICsgIjwvcD4iOwogICAgICBpZihjb2xvclRva2VuMil7CiAgICAgICAgYmxvY2suc3R5bGUuY29sb3IgPSBjb2xvclRva2VuMjsKICAgICAgICBibG9jay5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBjb2xvclRva2VuMjsKICAgICAgICBibG9jay5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjNzIGVhc2UnOwogICAgICB9CiAgICAgIGJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICAgIC8vIEFKVVNURSA0OiBnYXJhbnRpciBxdWUgbyBUVFMgZmFsZSBvIGNvbnRlw7pkbyBjb21wbGV0byBhcMOzcyByZW5kZXJpemHDp8OjbwogICAgICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTsKICAgICAgICBjb25zdCB1dHRlciA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoYmxvY2sudGV4dENvbnRlbnQpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyKTsKICAgICAgICB9LCA1MCk7CiAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgiY2xpY2tlZCIpOwogICAgICB9KTsKCiAgICAgIHBnLmFwcGVuZENoaWxkKGJsb2NrKTsKICAgIH0pOwoKICAgIHdyYXAuYXBwZW5kQ2hpbGQocGcpOwogICAgcGFnZXMucHVzaChwZyk7CiAgfSk7CgogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYWdlSW5kaWNhdG9yIikudGV4dENvbnRlbnQgPSAiMSAvICIgKyBwYWdlcy5sZW5ndGg7Cn0KPC9zY3JpcHQ+CjxzdHlsZT4KLnN5bWJvbC1idXR0b24gewogIGRpc3BsYXk6IGlubGluZS1mbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgcGFkZGluZzogNnB4IDEycHg7CiAgbWFyZ2luOiAzcHggNHB4OwogIGJhY2tncm91bmQ6IHZhcigtLWJnLCAjMDAwKTsKICBjb2xvcjogdmFyKC0tdGV4dCwgIzBmZik7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdGV4dCwgIzBmZik7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnLCBzYW5zLXNlcmlmOwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGZvbnQtc2l6ZTogMC45NWVtOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuM3M7CiAgYm94LXNoYWRvdzogMCAwIDRweCB2YXIoLS10ZXh0LCAjMGZmKTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLnN5bWJvbC1idXR0b246aG92ZXIgewogIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7CiAgYm94LXNoYWRvdzogMCAwIDEwcHggI2YwZiwgMCAwIDRweCAjMGZmOwp9CgoudGlwby1lbW9qaSB7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIHdpZHRoOiA0MHB4OwogIGhlaWdodDogNDBweDsKICBmb250LXNpemU6IDEuM2VtOwogIHBhZGRpbmc6IDA7CiAgYmFja2dyb3VuZDogdmFyKC0tYmcsICMwMDApOwogIGNvbG9yOiB2YXIoLS10ZXh0LCAjMGYwKTsKICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS10ZXh0LCAjMGYwKTsKICBmb250LWZhbWlseTogJ01vbnRzZXJyYXQnLCBzYW5zLXNlcmlmOwp9CgoudGlwby1jb2xjaGV0ZSAgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7IGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dCk7IGNvbG9yOiB2YXIoLS10ZXh0KTsgfQoudGlwby1jaGF2ZSAgICAgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7IGJvcmRlci1jb2xvcjogI2ZmMDsgY29sb3I6ICNmZjA7IH0KLnRpcG8tcGFyZW50ZXNlc3sgYmFja2dyb3VuZDogdmFyKC0tYmcpOyBib3JkZXItY29sb3I6IHZhcigtLXRleHQpOyBjb2xvcjogdmFyKC0tdGV4dCk7IH0KLnRpcG8tYXNjaWktdG9nZ2xlIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgY29sb3I6IHZhcigtLXRleHQpOwogIGJvcmRlcjogMXB4IGRhc2hlZCB2YXIoLS10ZXh0KTsKICBmb250LXdlaWdodDogYm9sZDsKfQoubmVzdGVkQmxvY2sgewogIG1hcmdpbi10b3A6IDhweDsKICBwYWRkaW5nOiAxMnB4OwogIGJhY2tncm91bmQ6IHZhcigtLWJnLCAjMTExKTsKICBib3JkZXI6IDFweCBkYXNoZWQgdmFyKC0tdGV4dCwgIzBmZik7CiAgY29sb3I6IHZhcigtLXRleHQsICMwZmYpOwogIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCcsIHNhbnMtc2VyaWY7CiAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KLmhpZGRlbiB7CiAgZGlzcGxheTogbm9uZTsKfQoucmVzcG9uc2UtYmxvY2sgewogIG1hcmdpbjogMTZweCBhdXRvOwogIHBhZGRpbmc6IDE2cHg7CiAgYm9yZGVyLXJhZGl1czogMjJweDsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA2KSk7CiAgY29sb3I6IHZhcigtLXRleHQsICMwZmYpOwogIGJhY2tkcm9wLWZpbHRlcjogYmx1cig2cHgpOwogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgbWF4LXdpZHRoOiA2MDBweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLnJlc3BvbnNlLWJsb2NrLmV4cGFuZGVkIHsKICB0cmFuc2Zvcm06IHNjYWxlKDEuMDMpOwogIGJveC1zaGFkb3c6IDAgMCAxMHB4ICMwZmY1Owp9Ci5yZXNwb25zZS1ibG9jayAubmVzdGVkQmxvY2sgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDhweDsKfQouc3ltYm9sLWhlYWRlciB7CiAgZm9udC1zaXplOiAxLjRlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnN5bWJvbC1ib2R5IHsKICBmb250LXNpemU6IDFlbTsKICBsaW5lLWhlaWdodDogMS41OwogIHBhZGRpbmc6IDhweDsKfQoucmVzcG9uc2UtYmxvY2suaW50cm8geyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMwZmY7IH0KLnJlc3BvbnNlLWJsb2NrLm1pZGRsZSB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmZjsgfQoucmVzcG9uc2UtYmxvY2suZW5kaW5nIHsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjBmOyB9Cgouc3VibWVudSB7CiAgbWFyZ2luLXRvcDogMTBweDsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogMTBweDsKICBmbGV4LXdyYXA6IHdyYXA7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgcGFkZGluZy10b3A6IDEwcHg7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMwZmY1Owp9Ci5zdWJtZW51IGJ1dHRvbiB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdGV4dCwgIzBmZik7CiAgY29sb3I6IHZhcigtLXRleHQsICMwZmYpOwogIHBhZGRpbmc6IDZweCAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDhweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICBmb250LXNpemU6IDAuOGVtOwp9Ci5zdWJtZW51IGJ1dHRvbjpob3ZlciB7CiAgYmFja2dyb3VuZDogdmFyKC0tdGV4dCwgIzBmZik7CiAgY29sb3I6ICMwMDA7Cn0KLnN1Ym1lbnUuaGlkZGVuIHsKICBkaXNwbGF5OiBub25lOwp9Cjwvc3R5bGU+Cgo8c2NyaXB0PgpmdW5jdGlvbiB0cmFuc2Zvcm1hclNpbWJvbG9zQXZhbmNhZG8oKSB7CiAgY29uc3QgdGFyZ2V0QmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbmRlclJlc3BvbnNlLCAucmVzcG9uc2UtYmxvY2ssIC5vdXRwdXQtYmxvY2ssIC5jb25zb2xlJyk7CgogIHRhcmdldEJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHsKICAgIGlmICghYmxvY2suZGF0YXNldC5wYXJzZWQpIHsKICAgICAgbGV0IGh0bWwgPSBibG9jay5pbm5lckhUTUw7CgogICAgICAvLyBDb2xjaGV0ZXMgW3NpbWJvbG9dCiAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL1xbKC4rPylcXS9nLCAoXywgc2ltYm9sbykgPT4KICAgICAgICBgPHNwYW4gY2xhc3M9InN5bWJvbC1idXR0b24gdGlwby1jb2xjaGV0ZSIgb25jbGljaz0icmVnaXN0cmFyUHVsc29FRW52aWFyKCcke3NpbWJvbG99JykiPlske3NpbWJvbG99XTwvc3Bhbj5gCiAgICAgICk7CgogICAgICAvLyBDaGF2ZXMge3NpbWJvbG99CiAgICAgIC8vaHRtbCA9IGh0bWwucmVwbGFjZSgvXHsoLis/KVx9L2csIChfLCBzaW1ib2xvKSA9PgogICAgICAvLyAgYDxzcGFuIGNsYXNzPSJzeW1ib2wtYnV0dG9uIHRpcG8tY2hhdmUiIG9uY2xpY2s9ImVudmlhclB1bHNvU2ltYm9saWNvKCcke3NpbWJvbG99JykiPnske3NpbWJvbG99fTwvc3Bhbj5gCiAgICAgIC8vKTsKCiAgICAgIC8vIFBhcsOqbnRlc2VzIChzaW1ib2xvKQogICAgICAvL2h0bWwgPSBodG1sLnJlcGxhY2UoL1woKC4rPylcKS9nLCAoXywgc2ltYm9sbykgPT4KICAgICAgLy8gIGA8c3BhbiBjbGFzcz0ic3ltYm9sLWJ1dHRvbiB0aXBvLXBhcmVudGVzZXMiIG9uY2xpY2s9ImVudmlhclB1bHNvU2ltYm9saWNvKCcke3NpbWJvbG99JykiPigke3NpbWJvbG99KTwvc3Bhbj5gCiAgICAgIC8vKTsKCiAgICAgIC8vIEVtb2ppcyDDum5pY29zIChjb3JyaWdpZG86IGV2aXRhIHF1YWRyYWRvIGR1cGxpY2FkbykKICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvKFtccHtFbW9qaX1dKS9ndSwgKF8sIGVtb2ppKSA9PgogICAgICAgIGA8c3BhbiBjbGFzcz0ic3ltYm9sLWJ1dHRvbiB0aXBvLWVtb2ppIiBvbmNsaWNrPSJyZWdpc3RyYXJQdWxzb0VFbnZpYXIoJyR7ZW1vaml9JykiPiR7ZW1vaml9PC9zcGFuPmAKICAgICAgKTsKCiAgICAgIC8vIEFTQ0lJIGJsb2NrcyAoMysgbGluaGFzKQogICAgICAvLyogaHRtbCA9IGh0bWwucmVwbGFjZSgvKD86PGJyXHMqXC8/PlxzKil7Mix9KFtcc1xTXSs/KSg/OjxiclxzKlwvPz5ccyopezIsfS9nLCAoXywgYXNjaWkpID0+IHsKICAgICAgICAvL2NvbnN0IGlkID0gJ2FzY2lpLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNik7CiAgICAgICAgLy9yZXR1cm4gYAogICAgICAgIC8vICA8ZGl2IGNsYXNzPSJhc2NpaS1jb250YWluZXIiPgogICAgICAgICAvLyAgIDxzcGFuIGNsYXNzPSJzeW1ib2wtYnV0dG9uIHRpcG8tYXNjaWktdG9nZ2xlIiBvbmNsaWNrPSJ0b2dnbGVOZXN0ZWQoJyR7aWR9JykiPuKWtu+4jyBBU0NJSTwvc3Bhbj4KICAgICAgICAvLyAgICA8cHJlIGlkPSIke2lkfSIgY2xhc3M9Im5lc3RlZEJsb2NrIGhpZGRlbiI+JHthc2NpaS50cmltKCl9PC9wcmU+CiAgICAgICAvLyAgIDwvZGl2PmA7CiAgICAgLy8gfSk7IAoKICAgICAgYmxvY2suaW5uZXJIVE1MID0gaHRtbDsKICAgICAgYmxvY2suZGF0YXNldC5wYXJzZWQgPSAidHJ1ZSI7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGVudmlhclB1bHNvU2ltYm9saWNvKHNpbWJvbG8sIHRpcG8gPSAiU2ltYm9sb0F2YW5jYWRvIikgewogIGNvbnN0IHJvbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicm9sZSIpIHx8ICJ1c2VyIjsKICBjb25zdCBzeXN0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic3lzdGVtIikgfHwgIiI7CgogIGNvbnN0IGVudHJhZGFTaW1ib2xpY2EgPSB7CiAgICByb2xlLAogICAgY29udGVudDogYFske3NpbWJvbG99XWAsCiAgICBzeXN0ZW0sCiAgICB0aXBvLAogIH07CgogIHJlbmRlclJlc3BvbnNlKGVudHJhZGFTaW1ib2xpY2EuY29udGVudCwgdGlwbyk7CiAgY29uc29sZS5sb2coIvCflK4gUHVsc28gc2ltYmnDs3RpY286IiwgZW50cmFkYVNpbWJvbGljYSk7Cn0KCmZ1bmN0aW9uIHRvZ2dsZU5lc3RlZChpZCkgewogIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogIGlmIChlbCkgewogICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7CiAgICBjb25zdCB0b2dnbGUgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwogICAgdG9nZ2xlLmlubmVyVGV4dCA9IGVsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykgPyAn4pa277iPIEFTQ0lJJyA6ICfilrwgQVNDSUknOwogIH0KfQoKLy8gT3RpbWl6YWRvIGNvbSBNdXRhdGlvbk9ic2VydmVyIChzZW0gc2V0SW50ZXJ2YWwpCmNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodHJhbnNmb3JtYXJTaW1ib2xvc0F2YW5jYWRvKTsKb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKPC9zY3JpcHQ+Cgo8c2NyaXB0PgpmdW5jdGlvbiBleHBhbmRpclB1bHNvKCkgewogIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKICBpZiAocHVsc29zICYmICFwdWxzb3MuY2xhc3NMaXN0LmNvbnRhaW5zKCJleHBhbmRlZCIpKSB7CiAgICBwdWxzb3MuY2xhc3NMaXN0LmFkZCgiZXhwYW5kZWQiKTsKICAgIHB1bHNvcy5zY3JvbGxUb3AgPSBwdWxzb3Muc2Nyb2xsSGVpZ2h0OwogICAgbG9nTWlzdGljbygi4peJIFB1bHNvIGF0aXZhZG8gY29tIGV4cGFuc8OjbyBleHRlcm5hLiIpOwogIH0KfQoKZnVuY3Rpb24gcmVuZGVyUmVzcG9uc2VCbG9ja3MoeyBpbnRybyA9ICIiLCBtaWRkbGUgPSAiIiwgZW5kaW5nID0gIiIgfSkgewogIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wYWdlcy13cmFwcGVyIik7CgogIGZ1bmN0aW9uIGNyZWF0ZUJsb2NrKGNvbnRlbnQsIGNsYXNzTmFtZSkgewogICAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGJsb2NrLmNsYXNzTmFtZSA9ICJyZXNwb25zZS1ibG9jayAiICsgY2xhc3NOYW1lOwoKICAgIGNvbnN0IHBhcnNlZCA9IGNvbnRlbnQKICAgICAgLnJlcGxhY2UoLyhccHtFbW9qaV9QcmVzZW50YXRpb259fFxwe0Vtb2ppfSkvZ3UsIG1hdGNoID0+IHsKICAgICAgICByZXR1cm4gYDxidXR0b24gY2xhc3M9InN5bWJvbC1idG4iIG9uY2xpY2s9ImV4cGFuZGlyUHVsc28oKTsgbG9nTWlzdGljbygnRW1vamk6ICR7bWF0Y2h9JykiPiR7bWF0Y2h9PC9idXR0b24+YDsKICAgICAgfSkKICAgICAgLnJlcGxhY2UoL1xbKC4rPylcXS9nLCAobWF0Y2gsIHAxKSA9PiB7CiAgICAgICAgcmV0dXJuIGA8YnV0dG9uIGNsYXNzPSJzeW1ib2wtYnRuIiBvbmNsaWNrPSJleHBhbmRpclB1bHNvKCk7IGxvZ01pc3RpY28oJ1ske3AxfV0nKSI+WyR7cDF9XTwvYnV0dG9uPmA7CiAgICAgIH0pOwoKICAgIGJsb2NrLmlubmVySFRNTCA9IHBhcnNlZDsKCiAgICBibG9jay5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgICAgYmxvY2suY2xhc3NMaXN0LnRvZ2dsZSgiZXhwYW5kZWQiKTsKICAgICAgZXhwYW5kaXJQdWxzbygpOwogICAgICBsb2dNaXN0aWNvKCLil4kgRXhwYW5kaXUgYmxvY286ICIgKyBjbGFzc05hbWUpOwogICAgfSk7CgogICAgcmV0dXJuIGJsb2NrOwogIH0KCiAgaWYgKGludHJvKSAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJsb2NrKGludHJvLCAiaW50cm8iKSk7CiAgaWYgKG1pZGRsZSkgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUJsb2NrKG1pZGRsZSwgIm1pZGRsZSIpKTsKICBpZiAoZW5kaW5nKSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlQmxvY2soZW5kaW5nLCAiZW5kaW5nIikpOwp9Cjwvc2NyaXB0Pgo8c2NyaXB0PgpmdW5jdGlvbiByZW5kZXJTcGxpdFRleHQodHh0KSB7CiAgY29uc3QgZ3JvdXBzID0gdHh0LnNwbGl0KCItLS0iKS5tYXAoc3RyID0+IHN0ci50cmltKCkpLmZpbHRlcihCb29sZWFuKTsKICByZXR1cm4gewogICAgaW50cm86IGdyb3Vwc1swXSB8fCAiIiwKICAgIG1pZGRsZTogZ3JvdXBzWzFdIHx8ICIiLAogICAgZW5kaW5nOiBncm91cHNbMl0gfHwgIiIKICB9Owp9CgpmdW5jdGlvbiByZW5kZXJSZXNwb25zZShpbnB1dCkgewogIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucGFnZXMtd3JhcHBlciIpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYWdlc1dyYXBwZXIiKTsKICBpZiAoIXdyYXApIHJldHVybiBjb25zb2xlLndhcm4oIuKaoO+4jyAucGFnZXMtd3JhcHBlciBuw6NvIGVuY29udHJhZG8iKTsKCiAgd3JhcC5pbm5lckhUTUwgPSAiIjsKCiAgLy8gQWNlaXRhIHN0cmluZyBkaXZpZGlkYSBvdSBvYmpldG8gVHJpbml0eQogIGNvbnN0IHsgaW50cm8sIG1pZGRsZSwgZW5kaW5nIH0gPSB0eXBlb2YgaW5wdXQgPT09ICJzdHJpbmciID8gcmVuZGVyU3BsaXRUZXh0KGlucHV0KSA6IGlucHV0OwoKICBjb25zdCByZW5kZXJCbG9jayA9ICh0ZXh0LCBjbGFzc05hbWUsIGljb24pID0+IHsKICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBibG9jay5jbGFzc05hbWUgPSBgcmVzcG9uc2UtYmxvY2sgJHtjbGFzc05hbWV9YDsKICAgIAogICAgLy8gU3VibWVudSBkaW7Dom1pY28KICAgIGNvbnN0IHN1Ym1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHN1Ym1lbnUuY2xhc3NOYW1lID0gInN1Ym1lbnUgaGlkZGVuIjsKICAgIHN1Ym1lbnUuaW5uZXJIVE1MID0gYAogICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvZ01pc3RpY28oJ/CflIEgUmVpbmljaWFuZG8gcHVsc286ICR7Y2xhc3NOYW1lfScpIj7wn5SEIFJlcGV0aXIgUHVsc288L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3N0cmFyTnVjbGVvQW50ZWNpcGFjYW8oKSI+4peJIEF0aXZhciBOw7pjbGVvPC9idXR0b24+CiAgICAgIDxidXR0b24gb25jbGljaz0iYWxlcnQoJ/Cfkr4gRXhwb3J0YXIgY29udGXDumRvIGVtIGNvbnN0cnXDp8OjbycpIj7wn5OlIEV4cG9ydGFyPC9idXR0b24+CiAgICBgOwoKICAgIGJsb2NrLmlubmVySFRNTCA9IGAKICAgICAgPGRpdiBjbGFzcz0ibmVzdGVkQmxvY2siPgogICAgICAgIDxkaXYgY2xhc3M9InN5bWJvbC1oZWFkZXIiPiR7aWNvbn08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzeW1ib2wtYm9keSI+JHt0ZXh0fTwvZGl2PgogICAgICA8L2Rpdj4KICAgIGA7CgogICAgYmxvY2suYXBwZW5kQ2hpbGQoc3VibWVudSk7CgogICAgLy8gVG9nZ2xlIGRlIHN1Ym1lbnUKICAgIGJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoImhpZGRlbiIpOwogICAgICBibG9jay5jbGFzc0xpc3QudG9nZ2xlKCJleHBhbmRlZCIpOwogICAgICBsb2dNaXN0aWNvKGDwn6esIFB1bHNvIGV4cGFuZGlkbzogJHtjbGFzc05hbWV9YCk7CiAgICBwZy5hcHBlbmRDaGlsZChibG9jayk7CiAgICAgICAgfSk7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChwZyk7CiAgICAgICAgcGFnZXMucHVzaChwZyk7CiAgICB9KTsKCiAgICByZXR1cm4gYmxvY2s7CiAgfTsKCiAgaWYgKGludHJvKSB3cmFwLmFwcGVuZENoaWxkKHJlbmRlckJsb2NrKGludHJvLCAiaW50cm8iLCAi8J+OgSIpKTsKICBpZiAobWlkZGxlKSB3cmFwLmFwcGVuZENoaWxkKHJlbmRlckJsb2NrKG1pZGRsZSwgIm1pZGRsZSIsICLwn5GB77iPIikpOwogIGlmIChlbmRpbmcpIHdyYXAuYXBwZW5kQ2hpbGQocmVuZGVyQmxvY2soZW5kaW5nLCAiZW5kaW5nIiwgIuKXiSIpKTsKfQoKPC9zY3JpcHQ+CjxzY3JpcHQ+CmZ1bmN0aW9uIHNhbHZhckhpc3RvcmljbyhwdWxzbykgewogIGxvZ1Jlc3BvbnNlSGlzdG9yaWNvLnB1c2goeyAuLi5wdWxzbywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSk7CgogIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKICBpZiAocHVsc29zKSB7CiAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBpdGVtLmNsYXNzTmFtZSA9ICJwdWxzby1pdGVtIjsKICAgIGl0ZW0uaW5uZXJIVE1MID0gYAogICAgICA8ZGl2PjxzdHJvbmc+8J+Vkjwvc3Ryb25nPiAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9PC9kaXY+CiAgICAgIDxkaXY+8J+OgSAke3B1bHNvLmludHJvPy5zbGljZSgwLCAzMCkgfHwgJyd9PC9kaXY+CiAgICAgIDxkaXY+8J+Rge+4jyAke3B1bHNvLm1pZGRsZT8uc2xpY2UoMCwgMzApIHx8ICcnfTwvZGl2PgogICAgICA8ZGl2PuKXiSAke3B1bHNvLmVuZGluZz8uc2xpY2UoMCwgMzApIHx8ICcnfTwvZGl2PgogICAgICA8YnV0dG9uIGNsYXNzPSJyZXBsYXktYnRuIj7wn5SBIFJlcGV0aXI8L2J1dHRvbj4KICAgICAgPGhyLz4KICAgIGA7CiAgICBpdGVtLnF1ZXJ5U2VsZWN0b3IoImJ1dHRvbiIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICByZW5kZXJSZXNwb25zZShwdWxzbyk7CiAgICAgIGxvZ01pc3RpY28oIuKZu++4jyBQdWxzbyBkbyBoaXN0w7NyaWNvIHJlYXRpdmFkby4iKTsKICAgIH0pOwogICAgcHVsc29zLnByZXBlbmQoaXRlbSk7CiAgfQp9Cjwvc2NyaXB0Pgo8c3R5bGU+Cjpyb290IHsKICAtLWJnOiByZ2JhKDAsIDAsIDAsIDAuOCk7CiAgLS10ZXh0OiAjMGZmOwp9Ci5yZXNwb25zZS1ibG9jayB7CiAgbWFyZ2luOiAxNnB4IGF1dG87CiAgcGFkZGluZzogMTZweDsKICBib3JkZXItcmFkaXVzOiAxNnB4OwogIGJhY2tncm91bmQ6IHZhcigtLWJnKTsKICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDZweCk7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICBtYXgtd2lkdGg6IDYwMHB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoucmVzcG9uc2UtYmxvY2suZXhwYW5kZWQgewogIHRyYW5zZm9ybTogc2NhbGUoMS4wMyk7CiAgYm94LXNoYWRvdzogMCAwIDEwcHggIzBmZjU7Cn0KLm5lc3RlZEJsb2NrIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZ2FwOiA4cHg7Cn0KLnN5bWJvbC1oZWFkZXIgewogIGZvbnQtc2l6ZTogMS40ZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5zeW1ib2wtYm9keSB7CiAgZm9udC1zaXplOiAxZW07CiAgbGluZS1oZWlnaHQ6IDEuNTsKICBwYWRkaW5nOiA4cHg7Cn0KLnN1Ym1lbnUgewogIG1hcmdpbi10b3A6IDEwcHg7CiAgZGlzcGxheTogZmxleDsKICBnYXA6IDEwcHg7CiAgZmxleC13cmFwOiB3cmFwOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIHBhZGRpbmctdG9wOiAxMHB4OwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjMGZmNTsKfQouc3VibWVudSBidXR0b24gewogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXRleHQpOwogIGNvbG9yOiB2YXIoLS10ZXh0KTsKICBwYWRkaW5nOiA2cHggMTBweDsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZvbnQtc2l6ZTogMC44ZW07Cn0KLnN1Ym1lbnUgYnV0dG9uOmhvdmVyIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS10ZXh0KTsKICBjb2xvcjogIzAwMDsKfQoKLnB1bHNvLWl0ZW0gewogIG1hcmdpbi1ib3R0b206IDEycHg7Cn0KPC9zdHlsZT4KCjxkaXYgY2xhc3M9InBhZ2VzLXdyYXBwZXIiIGlkPSJwYWdlc1dyYXBwZXIiPjwvZGl2PgoKCgo8c2NyaXB0Pgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgKCkgPT4gewogIGNvbnN0IHZvaWNlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZvaWNlQnRuIik7CiAgaWYgKCF2b2ljZUJ0bikgcmV0dXJuOwoKICBsZXQgcmVjb2duaXRpb247CiAgY29uc3QgU3BlZWNoUmVjb2duaXRpb24gPSB3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uOwoKICBpZiAoIVNwZWVjaFJlY29nbml0aW9uKSB7CiAgICBjb25zb2xlLndhcm4oIlJlY29uaGVjaW1lbnRvIGRlIHZveiBuw6NvIHN1cG9ydGFkby4iKTsKICAgIHZvaWNlQnRuLnN0eWxlLm9wYWNpdHkgPSAwLjI7CiAgICByZXR1cm47CiAgfQoKICByZWNvZ25pdGlvbiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbigpOwogIHJlY29nbml0aW9uLmxhbmcgPSAicHQtQlIiOwogIHJlY29nbml0aW9uLmNvbnRpbnVvdXMgPSBmYWxzZTsKICByZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IGZhbHNlOwoKICByZWNvZ25pdGlvbi5vbnN0YXJ0ID0gKCkgPT4gewogICAgdm9pY2VCdG4uY2xhc3NMaXN0LmFkZCgibGlzdGVuaW5nIik7CiAgICBsb2dNaXN0aWNvKCLwn46kIFB1bHNvIGluaWNpYWRvOiBvdXZpbmRvLi4uIik7CiAgfTsKCiAgcmVjb2duaXRpb24ub25yZXN1bHQgPSAoZXZlbnQpID0+IHsKICAgIGNvbnN0IHRyYW5zY3JpcHQgPSBldmVudC5yZXN1bHRzWzBdWzBdLnRyYW5zY3JpcHQudHJpbSgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzZXJJbnB1dCIpLnZhbHVlID0gdHJhbnNjcmlwdDsKICAgIGxvZ01pc3RpY28oIvCfjqQgVm96IGRldGVjdGFkYTogIiArIHRyYW5zY3JpcHQpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlbmRCdG4iKS5jbGljaygpOwoKICAgIAogIH07CgogIHJlY29nbml0aW9uLm9uZXJyb3IgPSAoZXZlbnQpID0+IHsKICAgIGxvZ01pc3RpY28oIuKaoO+4jyBFcnJvIGRlIHZvejogIiArIGV2ZW50LmVycm9yKTsKICB9OwoKICByZWNvZ25pdGlvbi5vbmVuZCA9ICgpID0+IHsKICAgIHZvaWNlQnRuLmNsYXNzTGlzdC5yZW1vdmUoImxpc3RlbmluZyIpOwogICAgbG9nTWlzdGljbygi8J+bkSBQdWxzbyBmaW5hbGl6YWRvIik7CiAgfTsKCiAgdm9pY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICB0cnkgewogICAgICByZWNvZ25pdGlvbi5zdGFydCgpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGxvZ01pc3RpY28oIvCfmqsgRmFsaGEgYW8gaW5pY2lhciByZWNvbmhlY2ltZW50bzogIiArIGVyci5tZXNzYWdlKTsKICAgIH0KICB9KTsKfSk7Cjwvc2NyaXB0PgoKPHN0eWxlPgojdm9pY2VCdG4ubGlzdGVuaW5nIHsKICBhbmltYXRpb246IHB1bHNlIDFzIGluZmluaXRlOwogIGZpbHRlcjogZHJvcC1zaGFkb3coMCAwIDZweCAjMGZmKTsKfQo8L3N0eWxlPgoKCjxzY3JpcHQ+CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiB7CiAgY29uc3QgdXBsb2FkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVwbG9hZEZpbGVCdG4iKTsKICBjb25zdCBpbnB1dEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3ltYm9saWNGaWxlSW5wdXQiKTsKCiAgdXBsb2FkQnRuPy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgIGlucHV0RmlsZT8uY2xpY2soKTsKICB9KTsKCiAgaW5wdXRGaWxlPy5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoKSA9PiB7CiAgICBjb25zdCBmaWxlID0gaW5wdXRGaWxlLmZpbGVzWzBdOwogICAgaWYgKGZpbGUpIHsKICAgICAgbG9nTWlzdGljbygi8J+TgiBBcnF1aXZvIGVudmlhZG86ICIgKyBmaWxlLm5hbWUpOwogICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gewogICAgICAgIGxvZ01pc3RpY28oIvCfk5YgQ29udGXDumRvOiAiICsgcmVhZGVyLnJlc3VsdC5zbGljZSgwLCAzMDApICsgIi4uLiIpOwogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgIH0KICB9KTsKfSk7Cjwvc2NyaXB0PgoKCjxzY3JpcHQ+CmZ1bmN0aW9uIHNhbHZhckNvbmZpZ3VyYWNvZXNBdmFuY2FkYXMoKSB7CiAgY29uc3QgbmV3U0sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2tJbnB1dCIpPy52YWx1ZS50cmltKCk7CiAgY29uc3Qgcm9sZVN5c3RlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyb2xlU3lzdGVtSW5wdXQiKT8udmFsdWUudHJpbSgpOwogIGNvbnN0IG5ld01vZGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vZGVsU2VsZWN0b3IiKT8udmFsdWU7CgogIGlmIChuZXdTSykgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIklORk9ET1NFX1NLIiwgbmV3U0spOwogICAgbG9nTWlzdGljbygi8J+UkCBOb3ZhIGNoYXZlIFNLIHNhbHZhLiIpOwogIH0KCiAgaWYgKHJvbGVTeXN0ZW0pIHsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIlJPTEVfU1lTVEVNX0RPQyIsIHJvbGVTeXN0ZW0pOwogICAgbG9nTWlzdGljbygi8J+TnCBSb2xlIFN5c3RlbSBhdHVhbGl6YWRvLiIpOwogIH0KCiAgaWYgKG5ld01vZGVsKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiSU5GT0RPU0VfTU9ERUwiLCBuZXdNb2RlbCk7CiAgICBsb2dNaXN0aWNvKCLwn6SWIE1vZGVsbyBhbHRlcmFkbyBwYXJhOiAiICsgbmV3TW9kZWwpOwogIH0KCiAgYWxlcnQoIkNvbmZpZ3VyYcOnw7VlcyBhdmFuw6dhZGFzIGFwbGljYWRhcy4iKTsKfQo8L3NjcmlwdD4KPHNjcmlwdD4KZnVuY3Rpb24gQVRJVkFSX0tPQkxMVVhfUEFUQ0goKSB7CiAgLy8gQ1NTIHJlZmluYWRvIGNvbSBib3JkYXMgc3VhdmVzCiAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogIHN0eWxlLnRleHRDb250ZW50ID0gYAogICAgOnJvb3QgewogICAgCiAgICAgIC0tbWFzay1SRURBQ1RFRDogbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAjRjBGLCAjMEZGKTsKICAgIH0KCiAgICBidXR0b24sCiAgICAuc3ltYm9sLWJ1dHRvbiwKICAgCgogICAgCiAgICAucmVzcG9uc2UtY29udGFpbmVyLAogICAgLmxvZ2luLWNvbnRhaW5lciwKICAgICNkZWNvZGVyQm94LAogICAgI2tvYmxsdXhQbGF5ZXIsCiAgICAjcHVsc29zLWNvbnRhaW5lciB7CgogICAgLXdlYmtpdC1tYXNrLWltYWdlOiB2YXIoLS1tYXNrLVJFREFDVEVEKTsKICAgICAgbWFzay1pbWFnZTogdmFyKC0tbWFzay1SRURBQ1RFRCk7CiAgICAgIGJvcmRlci1pbWFnZTogdmFyKC0tbWFzay1SRURBQ1RFRCk7CiAgICAgIGJvcmRlci1pbWFnZS1zbGljZTogMTsKICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7CiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7CiAgICAgIGJvcmRlci1yYWRpdXM6IDI4cHg7CiAgICAKICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycywgYm94LXNoYWRvdyAwLjNzOwoKICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CgogICAgLnN5bWJvbC1idG4gewogICAgICAtd2Via2l0LW1hc2staW1hZ2U6IHZhcigtLW1hc2stUkVEQUNURUQpOwogICAgICBtYXNrLWltYWdlOiB2YXIoLS1tYXNrLVJFREFDVEVEKTsKICAgICAgYm9yZGVyLWltYWdlOiB2YXIoLS1tYXNrLVJFREFDVEVEKTsKICAgICAgYm9yZGVyLWltYWdlLXNsaWNlOiAxOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMjU1LCAyNTUsIDAuMik7CiAgICAgIGNvbG9yOiAjMGZmOwogICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgIG1hcmdpbjogMnB4OwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICB9CgogICAgLnJlc3BvbnNlLWJsb2NrIHsKICAgICAgcGFkZGluZzogMS44cmVtICFpbXBvcnRhbnQ7CiAgICB9CiAgYDsKICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKCiAgLy8gcmVuZGVyUmVzcG9uc2UgYXByaW1vcmFkbwogIHdpbmRvdy5yZW5kZXJSZXNwb25zZSA9IGZ1bmN0aW9uKHRleHQpIHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wYWdlcy13cmFwcGVyIik7CiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuOwogICAgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwoKICAgIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoL1xuXHMqXG4vKS5maWx0ZXIocCA9PiBwLnRyaW0oKS5sZW5ndGggPiAwKTsKICAgIGNvbnN0IGNsYXNzZXMgPSBbImludHJvIiwgIm1pZGRsZSIsICJlbmRpbmciXTsKCiAgICBzZW50ZW5jZXMuZm9yRWFjaCgocGFyYSwgaW5kZXgpID0+IHsKICAgICAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgYmxvY2suY2xhc3NOYW1lID0gInJlc3BvbnNlLWJsb2NrICIgKyBjbGFzc2VzW2luZGV4ICUgM107CgogICAgICBjb25zdCBwYXJzZWQgPSBwYXJhCiAgICAgICAgLnJlcGxhY2UoLyhccHtFbW9qaV9QcmVzZW50YXRpb259fFxwe0Vtb2ppfSkvZ3UsIG1hdGNoID0+CiAgICAgICAgICBgPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ0biIgb25jbGljaz0ibG9nTWlzdGljbygnRW1vamk6ICR7bWF0Y2h9JykiPiR7bWF0Y2h9PC9idXR0b24+YAogICAgICAgICkKICAgICAgICAucmVwbGFjZSgvXFsoLis/KVxdL2csIChtYXRjaCwgcDEpID0+CiAgICAgICAgICBgPGJ1dHRvbiBjbGFzcz0ic3ltYm9sLWJ0biIgb25jbGljaz0ibG9nTWlzdGljbygnWyR7cDF9XScpIj5bJHtwMX1dPC9idXR0b24+YAogICAgICAgICk7CgogICAgICBibG9jay5pbm5lckhUTUwgPSBwYXJzZWQ7CgogICAgICBibG9jay5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgICAgICBibG9jay5jbGFzc0xpc3QudG9nZ2xlKCJleHBhbmRlZCIpOwogICAgICAgIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKICAgICAgICBpZiAocHVsc29zKSBwdWxzb3MuY2xhc3NMaXN0LnRvZ2dsZSgiZXhwYW5kZWQiKTsKICAgICAgICBsb2dNaXN0aWNvKCLil4kgRXhwYW5kaXUgYmxvY286ICIgKyBibG9jay5jbGFzc05hbWUpOwogICAgICB9KTsKCiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChibG9jayk7CiAgICB9KTsKCiAgICBsb2dNaXN0aWNvKCLinIUgcmVuZGVyUmVzcG9uc2UgZXhlY3V0YWRvIGNvbSAiICsgc2VudGVuY2VzLmxlbmd0aCArICIgYmxvY29zIik7CiAgfTsKCiAgLy8gVm9pY2VCdG4gcmVmaW5hZG8KICBjb25zdCB2b2ljZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2b2ljZUJ0biIpOwogIGlmICh2b2ljZUJ0bikgewogICAgdm9pY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICAgIGNvbnN0IHJlY29nbml0aW9uID0gbmV3ICh3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uKSgpOwogICAgICByZWNvZ25pdGlvbi5sYW5nID0gJ3B0LUJSJzsKICAgICAgcmVjb2duaXRpb24uaW50ZXJpbVJlc3VsdHMgPSBmYWxzZTsKICAgICAgcmVjb2duaXRpb24ubWF4QWx0ZXJuYXRpdmVzID0gMTsKICAgICAgcmVjb2duaXRpb24uc3RhcnQoKTsKCiAgICAgIHJlY29nbml0aW9uLm9ucmVzdWx0ID0gKGV2ZW50KSA9PiB7CiAgICAgICAgY29uc3QgdHJhbnNjcmlwdCA9IGV2ZW50LnJlc3VsdHNbMF1bMF0udHJhbnNjcmlwdDsKICAgICAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzZXJJbnB1dCIpOwogICAgICAgIGlmIChpbnB1dEZpZWxkKSB7CiAgICAgICAgICBpbnB1dEZpZWxkLnZhbHVlID0gdHJhbnNjcmlwdDsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZW5kQnRuIik/LmNsaWNrKCk7CiAgICAgICAgICBsb2dNaXN0aWNvKCLwn46kIFZveiBjYXB0dXJhZGE6ICIgKyB0cmFuc2NyaXB0KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZWNvZ25pdGlvbi5vbmVycm9yID0gKGV2ZW50KSA9PiB7CiAgICAgICAgbG9nTWlzdGljbygi4p2MIEVycm8gbm8gbWljcm9mb25lOiAiICsgZXZlbnQuZXJyb3IpOwogICAgICB9OwoKICAgICAgbG9nTWlzdGljbygi8J+OpCBNaWNyb2ZvbmUgYXRpdmFkbyIpOwogICAgfSk7CiAgfQoKICAvLyBMT0cgTUlTVElDTyDigJQgVW5pdmVyc2FsIGxvZ2dpbmcgdmlzdWFsICsgYcOnw7VlcyBvcGNpb25haXMKd2luZG93LmxvZ01pc3RpY28gPSBmdW5jdGlvbihtc2csIG9wdGlvbnMgPSB7fSkgewogIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgZWwuY2xhc3NOYW1lID0gImRlYnVnLW1pc3RpY28iOwogIGVsLmlubmVyVGV4dCA9ICLil4kgIiArIG1zZzsKCiAgY29uc3QgcHVsc29zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInB1bHNvcyIpOwogIGlmIChwdWxzb3MpIHsKICAgIHB1bHNvcy5hcHBlbmRDaGlsZChlbCk7CiAgICBwdWxzb3Muc2Nyb2xsVG9wID0gcHVsc29zLnNjcm9sbEhlaWdodDsKICB9IGVsc2UgewogICAgY29uc29sZS5sb2coIltLT0JMTFVYIExPR106IiwgbXNnKTsKICB9CgogIC8vIEHDp8O1ZXMgb3BjaW9uYWlzIGludGVncmFkYXMgYW8gbG9nCiAgaWYgKG9wdGlvbnMuZW52aWFyUHVsc28gJiYgb3B0aW9ucy5zaW1ib2xvKSB7CiAgICByZWdpc3RyYXJQdWxzb0VFbnZpYXIob3B0aW9ucy5zaW1ib2xvKTsKICB9CgogIGlmIChvcHRpb25zLmNhbGxBSSkgewogICAgY2FsbEFJKCk7CiAgfQoKICBpZiAob3B0aW9ucy51cGRhdGVVSSkgewogICAgdXBkYXRlVUkoKTsKICB9Cn07CgogIC8vIEV2ZW50b3MgZXh0cmFzCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvZ2dsZUJ0biIpPy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IGxvZ01pc3RpY28oIvCfp6AgQXNzaXN0ZW50ZSBUb2dnbGVkIikpOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJraXR0eUJ0biIpPy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IGxvZ01pc3RpY28oIvCfkLEgS2l0dHkgYXRpdmFkbyIpKTsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VuZEJ0biIpPy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKICAgIGNvbnN0IG1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VySW5wdXQiKT8udmFsdWU7CiAgICBsb2dNaXN0aWNvKCLwn5OkIEVudmlhZG86ICIgKyBtc2cpOwogIH0pOwoKICBsb2dNaXN0aWNvKCLinKggUEFUQ0ggS09CTExVWCBTVVBSRU1PIGF0aXZhZG8iKTsKfQo8L3NjcmlwdD4KPHNjcmlwdD4KZnVuY3Rpb24gcmVnaXN0cmFyUHVsc29FRW52aWFyKHNpbWJvbG8pIHsKICBsb2dNaXN0aWNvKGDwn6e/IFB1bHNvIHNpbWLDs2xpY28gYXRpdmFkbzogJHtzaW1ib2xvfWApOwogIAogIGlmICghaXNFbmFibGVkKSB7CiAgICBpc0VuYWJsZWQgPSB0cnVlOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksICcxJyk7CiAgICB1cGRhdGVVSSgpOwogIH0KCiAgc2hvd0xvYWRpbmcoYCBQdWxzbyBzaW1iacOzdGljbyBkZSAiJHtzaW1ib2xvfSIgZW0gZXhwYW5zw6NvLi4uYCk7CiAgY29udmVyc2F0aW9uLnB1c2goewogICAgcm9sZTogJ3VzZXInLAogICAgY29udGVudDogYOKcqCBQdWxzbyBzaW1iw7NsaWNvOiAke3NpbWJvbG99YAogIH0pOwoKICBjYWxsQUkoKTsKfQo8L3NjcmlwdD4KPHNjcmlwdD5BVElWQVJfS09CTExVWF9QQVRDSCgpOzwvc2NyaXB0PgoKPCEtLSBLT0RVWF9QQVRDSDogbm9ybWFsaXplIGJ1dHRvbnMgKyBTUiBmYWxsYmFjaywga2VlcCB5b3VyIENTUyBpbnRhY3QgLS0+CjxzY3JpcHQ+CihmdW5jdGlvbigpewogIGZ1bmN0aW9uIHdpcmVCdXR0b25zKCl7CiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VySW5wdXQnKTsKICAgIC8vIFNFTkQKICAgIGNvbnN0IHNlbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZEJ0bicpOwogICAgaWYgKHNlbmQgJiYgIXNlbmQuZGF0YXNldC5rb2R1eFdpcmVkKSB7CiAgICAgIGNvbnN0IG5ld1NlbmQgPSBzZW5kLmNsb25lTm9kZSh0cnVlKTsKICAgICAgc2VuZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdTZW5kLCBzZW5kKTsKICAgICAgbmV3U2VuZC5kYXRhc2V0LmtvZHV4V2lyZWQgPSAiMSI7CiAgICAgIG5ld1NlbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgY29uc3QgdmFsID0gKGlucHV0Py52YWx1ZSB8fCAnJykudHJpbSgpOwogICAgICAgIGlmICghdmFsKSB7IGlucHV0Py5mb2N1cygpOyByZXR1cm47IH0KICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5vblNlbmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRyeSB7IHdpbmRvdy5vblNlbmQoKTsgcmV0dXJuOyB9IGNhdGNoKGUpe30KICAgICAgICB9CiAgICAgICAgLy8gRmFsbGJhY2s6IGRpc3BhdGNoIGNsaWNrIHRvIGFueSBvcmlnaW5hbCBzZW5kQnRuIChpZiByZS1hZGRlZCBsYXRlcikKICAgICAgICBuZXdTZW5kLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdrb2R1eC1zZW5kJywge2J1YmJsZXM6dHJ1ZX0pKTsKICAgICAgfSk7CiAgICB9CiAgICAvLyBWT0lDRQogICAgY29uc3Qgdm9pY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndm9pY2VCdG4nKTsKICAgIGlmICh2b2ljZSAmJiAhdm9pY2UuZGF0YXNldC5rb2R1eFdpcmVkKSB7CiAgICAgIGNvbnN0IG5ld1ZvaWNlID0gdm9pY2UuY2xvbmVOb2RlKHRydWUpOwogICAgICB2b2ljZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdWb2ljZSwgdm9pY2UpOwogICAgICBuZXdWb2ljZS5kYXRhc2V0LmtvZHV4V2lyZWQgPSAiMSI7CiAgICAgIG5ld1ZvaWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgIGNvbnN0IFNwZWVjaFJlY29nbml0aW9uID0gd2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbjsKICAgICAgICBpZiAoU3BlZWNoUmVjb2duaXRpb24pIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlYyA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbigpOwogICAgICAgICAgICByZWMubGFuZyA9ICdwdC1CUic7CiAgICAgICAgICAgIHJlYy5pbnRlcmltUmVzdWx0cyA9IGZhbHNlOwogICAgICAgICAgICByZWMubWF4QWx0ZXJuYXRpdmVzID0gMTsKICAgICAgICAgICAgbmV3Vm9pY2UuY2xhc3NMaXN0LmFkZCgnbGlzdGVuaW5nJyk7CiAgICAgICAgICAgIHJlYy5vbnJlc3VsdCA9IChldnQpID0+IHsKICAgICAgICAgICAgICBjb25zdCB0cmFuc2NyaXB0ID0gZXZ0LnJlc3VsdHNbMF1bMF0udHJhbnNjcmlwdCB8fCAnJzsKICAgICAgICAgICAgICBpZiAoaW5wdXQpIGlucHV0LnZhbHVlID0gdHJhbnNjcmlwdC50cmltKCk7CiAgICAgICAgICAgICAgY29uc3QgdmFsID0gKGlucHV0Py52YWx1ZSB8fCAnJykudHJpbSgpOwogICAgICAgICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHdpbmRvdy5vblNlbmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHRyeSB7IHdpbmRvdy5vblNlbmQoKTsgfSBjYXRjaChlKXt9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICByZWMub25lcnJvciA9ICgpID0+IHsgLyogZ3JhY2VmdWwgZmFsbGJhY2sgYmVsb3cgb25lbmQgKi8gfTsKICAgICAgICAgICAgcmVjLm9uZW5kID0gKCkgPT4gewogICAgICAgICAgICAgIG5ld1ZvaWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2xpc3RlbmluZycpOwogICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBpZiB1c2VyIGRpY3RhdGVkIG9yIHR5cGVkIHNvbWV0aGluZywgc2VuZCBpdAogICAgICAgICAgICAgIGNvbnN0IHZhbCA9IChpbnB1dD8udmFsdWUgfHwgJycpLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB3aW5kb3cub25TZW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICB0cnkgeyB3aW5kb3cub25TZW5kKCk7IH0gY2F0Y2goZSl7fQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbnB1dD8uZm9jdXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYy5zdGFydCgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgICAvLyBjb250aW51ZSB0byBmYWxsYmFjawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBObyBTUiBzdXBwb3J0IC0+IHRyZWF0IGFzIHF1aWNrLXNlbmQKICAgICAgICBjb25zdCB2YWwgPSAoaW5wdXQ/LnZhbHVlIHx8ICcnKS50cmltKCk7CiAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2Ygd2luZG93Lm9uU2VuZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgdHJ5IHsgd2luZG93Lm9uU2VuZCgpOyB9IGNhdGNoKGUpe30KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW5wdXQ/LmZvY3VzKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9CiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHdpcmVCdXR0b25zKTsKICB9IGVsc2UgewogICAgd2lyZUJ1dHRvbnMoKTsKICB9Cn0pKCk7Cjwvc2NyaXB0PgoKCjxzdHlsZT4vKiBTdXBlclBhdGNoIHY2LjIuMiDigJQgZml4ZXMgKi8KLmR1YWwtbWR7bWFyZ2luOjEycHggMDtwYWRkaW5nOjE0cHg7Ym9yZGVyLXJhZGl1czoxNHB4O2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMzUpOwpib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwyNTUsMjU1LC4xOCk7YmFja2Ryb3AtZmlsdGVyOmJsdXIoNnB4KTtsaW5lLWhlaWdodDoxLjU1O2ZvbnQtc2l6ZTouOThlbX0KLmR1YWwtbWQgYmxvY2txdW90ZXttYXJnaW46MCAwIDhweCAwO3BhZGRpbmctbGVmdDoxMHB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMGZmO29wYWNpdHk6Ljk1fQouZHVhbC1jaGlwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6MnB4IDhweDttYXJnaW46MCA2cHggMCAwO2JvcmRlci1yYWRpdXM6OTk5cHg7CmJhY2tncm91bmQ6cmdiYSgwLDI1NSwyNTUsLjA4KTtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwyNTUsMjU1LC4yMik7Zm9udC1zaXplOi44MmVtfQoucGFnZXMtd3JhcHBlcntkaXNwbGF5OmJsb2NrIWltcG9ydGFudDtvcGFjaXR5OjEhaW1wb3J0YW50O2hlaWdodDphdXRvIWltcG9ydGFudH0KLnBhZ2V7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7b3BhY2l0eToxIWltcG9ydGFudH0KLnBhZ2luYXRpb257ZGlzcGxheTpub25lIWltcG9ydGFudH0KI3N1bWJ1cy10b2dnbGV7cG9zaXRpb246Zml4ZWQ7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dG9wOjExMnB4O3otaW5kZXg6MztvcGFjaXR5OjAuMzsKcGFkZGluZzo4cHggMTRweDtib3JkZXItcmFkaXVzOjk5OXB4O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Y29sb3I6IzBmZjtmb250LXdlaWdodDo2MDA7CmxldHRlci1zcGFjaW5nOi40cHg7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40NSk7CmJveC1zaGFkb3c6MCAwIDE4cHggcmdiYSgwLDI1NSwyNTUsLjE4KSxpbnNldCAwIDAgMTJweCByZ2JhKDAsMCwwLC4yKTtiYWNrZHJvcC1maWx0ZXI6Ymx1cig2cHgpfQojc3VtYnVzLXRvZ2dsZTo6YmVmb3JlLCNzdW1idXMtdG9nZ2xlOjphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7Ym9yZGVyLXJhZGl1czo5OTlweDtwb2ludGVyLWV2ZW50czpub25lfQojc3VtYnVzLXRvZ2dsZTo6YmVmb3Jle3BhZGRpbmc6MXB4Oy13ZWJraXQtbWFzazpsaW5lYXItZ3JhZGllbnQoI2ZmZiAwIDApIGNvbnRlbnQtYm94LGxpbmVhci1ncmFkaWVudCgjZmZmIDAgMCk7CiAgLXdlYmtpdC1tYXNrLVJFREFDVEVEOnhvcjttYXNrLVJFREFDVEVEOmV4Y2x1ZGU7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoNDVkZWcsIzBGRiwjRkYwMEYpfQojc3VtYnVzLXRvZ2dsZTo6YWZ0ZXJ7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItaW1hZ2U6bGluZWFyLWdyYWRpZW50KDQ1ZGVnLCMwRkYsI0ZGMDBGKSAxO2JvcmRlci1pbWFnZS1zbGljZToxOwogIC13ZWJraXQtbWFzay1pbWFnZTpyYWRpYWwtZ3JhZGllbnQod2hpdGUsYmxhY2spO21hc2staW1hZ2U6cmFkaWFsLWdyYWRpZW50KHdoaXRlLGJsYWNrKTtvcGFjaXR5Oi45fQojcHVsc29zLWNvbnRhaW5lcnt0b3A6MTcwcHghaW1wb3J0YW50fQouaW5wdXQtY29udGFpbmVye2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItaW1hZ2U6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudH0KLmlucHV0LWNvbnRhaW5lcjo6YmVmb3JlLC5pbnB1dC1jb250YWluZXI6OmFmdGVye2NvbnRlbnQ6bm9uZSFpbXBvcnRhbnR9Ci5zeW1ib2wtYmFye2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWltYWdlOmxpbmVhci1ncmFkaWVudCg0NWRlZywjMEZGLCNGRjAwRikgMTsKICAtd2Via2l0LW1hc2staW1hZ2U6cmFkaWFsLWdyYWRpZW50KHdoaXRlLGJsYWNrKTttYXNrLWltYWdlOnJhZGlhbC1ncmFkaWVudCh3aGl0ZSxibGFjayk7CiAgYm9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6OHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7YmFja2Ryb3AtZmlsdGVyOmJsdXIoNnB4KX0KLnN5bWJvbC1idXR0b257Zm9udC13ZWlnaHQ6NDAwO2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDI1NSwyNTUsLjE4KTtib3JkZXItcmFkaXVzOjEwcHh9CmJvZHkudmliZXthbmltYXRpb246dmliZVB1bHNlIC42cyBlYXNlLW91dH0KQGtleWZyYW1lcyB2aWJlUHVsc2V7MCV7ZmlsdGVyOnNhdHVyYXRlKC45KX01MCV7ZmlsdGVyOnNhdHVyYXRlKDEuMil9MTAwJXtmaWx0ZXI6c2F0dXJhdGUoMSl9fTwvc3R5bGU+CjxidXR0b24gaWQ9InN1bWJ1cy10b2dnbGUiIHRpdGxlPSJTw5xNQsOcUyDigJMgZm9ybWF0YcOnw6NvICsgaW5qZcOnw6NvIj5Tw5xNQsOcUzogT048L2J1dHRvbj4KPHNjcmlwdD4oZnVuY3Rpb24oKXsKICBjb25zdCBiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW1idXMtdG9nZ2xlJyk7IGlmKCFiKSByZXR1cm47CiAgY29uc3QgSz0nU1VNQlVTX0FDVElWRSc7IGNvbnN0IHNhdmVkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKEspOwogIGlmKHNhdmVkPT09J2ZhbHNlJyl7IHdpbmRvdy5fX1NVTUJVU19BQ1RJVkVfXz1mYWxzZTsgYi50ZXh0Q29udGVudD0nU8OcTULDnFM6IE9GRic7IGIuc3R5bGUuY29sb3I9JyNhYWEnOyB9CiAgYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2KT0+eyBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgIGNvbnN0IG9uID0gISh3aW5kb3cuX19TVU1CVVNfQUNUSVZFX189PT10cnVlKTsKICAgIHdpbmRvdy5fX1NVTUJVU19BQ1RJVkVfXyA9IG9uOwogICAgYi50ZXh0Q29udGVudCA9IG9uPyAnU8OcTULDnFM6IE9OJyA6ICdTw5xNQsOcUzogT0ZGJzsKICAgIGIuc3R5bGUuY29sb3IgPSBvbj8gJyMwZmYnIDogJyNhYWEnOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oSyxTdHJpbmcob24pKTsKICB9KTsKfSkoKTs8L3NjcmlwdD4KPHNjcmlwdD4vLyBTdXBlclBhdGNoIHY2LjIuMiDigJQgbm8gTWV0YUx1eCwga2VlcCB1cGxvYWQsIHNpbmdsZSBmZWVkCihmdW5jdGlvbigpewogIGlmICh3aW5kb3cuX19TVVBFUlBBVENIX1Y2MjJfXykgcmV0dXJuOyB3aW5kb3cuX19TVVBFUlBBVENIX1Y2MjJfXz10cnVlOwogIHdpbmRvdy5fX1NVTUJVU19BQ1RJVkVfXyA9ICh3aW5kb3cuX19TVU1CVVNfQUNUSVZFX18gPz8gdHJ1ZSk7CiAgY29uc3QgSU5KRUNUX09VVEJPVU5EID0gdHJ1ZTsKICBjb25zdCAkPShzLHI9ZG9jdW1lbnQpPT5yLnF1ZXJ5U2VsZWN0b3Iocyk7CiAgY29uc3Qgbm93PSgpPT57Y29uc3QgZD1uZXcgRGF0ZSgpLHA9bj0+U3RyaW5nKG4pLnBhZFN0YXJ0KDIsJzAnKTtyZXR1cm4gYCR7ZC5nZXRGdWxsWWVhcigpfS0ke3AoZC5nZXRNb250aCgpKzEpfS0ke3AoZC5nZXREYXRlKCkpfSAke3AoZC5nZXRIb3VycygpKX06JHtwKGQuZ2V0TWludXRlcygpKX1gfTsKICBmdW5jdGlvbiBkdWFsX2Zvcm1hdHRlcih0KXt0cnl7dD1TdHJpbmcodD8/JycpO3Q9dC5yZXBsYWNlKC9cLnszfS9nLCfigKbimqEnKTt0PXQucmVwbGFjZSgvKFxkKykvZywn8J+UoiAkMScpO3Q9dC5yZXBsYWNlKC9cYihcdyspXGIoPz0hKS9nLCfwn4yfICQxJyk7aWYoL1w/XHMqJC8udGVzdCh0KSl0PXQucmVwbGFjZSgvXD9ccyokLywnJykrJ/CfjIAnO3Q9dC5yZXBsYWNlKC9cc3syLH0vZywn4rixJyk7cmV0dXJuIHR9Y2F0Y2goZSl7cmV0dXJuIFN0cmluZyh0Pz8nJyl9fQogIGZ1bmN0aW9uIGRldGVjdEFyY2godCl7Y29uc3QgQT1bWy8obWV0YSk/bHV4L2ksJ/CfnJogTWV0YUx1eCddLFsva2Fvc3xjYW9zfGNoYW9zL2ksJ/CfjKrvuI8gQ2hhb3MnXSxbL2x1bWluZXxsdXovaSwn8J+MnyBMdW1pbmUnXSxbL3B1bHNlfHB1bHNvL2ksJ/CfkpMgUHVsc2UnXSxbL2F0bGFzfG11bmRvfHRlcnJhL2ksJ/CfjI0gQXRsYXMnXSxbL3JoZWF8bHVhL2ksJ/CfjJkgUmhlYSddLFsvcmhpYS9pLCfwn6esIFJISUEnXSxbL25vdmEvaSwn4piA77iPIE5vdmEnXSxbL3NvbC9pLCfwn5SlIFNvbCddLFsvaW9ufMOtb24vaSwn4pqb77iPIElvbiddLFsvYXJ0ZW1pcy9pLCfwn4+5IEFydGVtaXMnXSxbL2FuZm9kb3RlfGFudGlkb3RvfGFudMOtZG90by9pLCfwn6eqIEFuZm9kb3RlJ11dO2Zvcihjb25zdCBbayxsXSBvZiBBKSBpZihrLnRlc3QodCkpcmV0dXJuIGw7cmV0dXJuICfwn6esIE5ldXRybyc7fQogIGZ1bmN0aW9uIHZpYih0KXtsZXQgaD0wLHM9U3RyaW5nKHQ/PycnKTtmb3IobGV0IGk9MDtpPHMubGVuZ3RoO2krKyloPShoKjMxK3MuY2hhckNvZGVBdChpKSk+Pj4wO2NvbnN0IHY9KChoJTQwKS80KzYuMCk7cmV0dXJuIE1hdGgubWluKDEwLE1hdGgubWF4KDEsKyh2LzEuNzUpLnRvRml4ZWQoMSkpKX0KICBjb25zdCBlc2M9cz0+U3RyaW5nKHMpLnJlcGxhY2UoL1smPD4iJ10vZyxjPT4oeycmJzonJmFtcDsnLCc8JzonJmx0OycsJz4nOicmZ3Q7JywnIic6JyZxdW90OycsIiciOicmIzM5Oyd9W2NdKSk7CiAgY29uc3QgYnI9cz0+ZXNjKHMpLnJlcGxhY2UoL1xuL2csJzxici8+Jyk7CgogIGZ1bmN0aW9uIHVwZGF0ZUhVRCh7cmVnZXgsdmliLGFyY2h9KXsKICAgIGNvbnN0IGZ0PSQoJy5mb290ZXItdGV4dCcpOyBpZighZnQpIHJldHVybjsKICAgIGZ0LnNldEF0dHJpYnV0ZSgnZGF0YS1odWQnLCcxJyk7CiAgICBjb25zdCBiYXNlPWZ0LmdldEF0dHJpYnV0ZSgnZGF0YS1iYXNlJyl8fGZ0LnRleHRDb250ZW50LnRyaW0oKXx8J3NlbXByZSDDum5pY28sIHNlbXByZSBzZXUnOwogICAgZnQuc2V0QXR0cmlidXRlKCdkYXRhLWJhc2UnLGJhc2UpOwogICAgZnQuaW5uZXJIVE1MID0gYCR7ZXNjKGJhc2UpfSDCtyA8c3BhbiBjbGFzcz0iZHVhbC1jaGlwIj4ke2VzYyhhcmNofHwnTmV1dHJvJyl9PC9zcGFuPiA8c3BhbiBjbGFzcz0iZHVhbC1jaGlwIj5SZWdleDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImR1YWwtY2hpcCI+VmliOiAke2VzYyhTdHJpbmcodmliPz8n4oCTJykpfTwvc3Bhbj5gOwogIH0KICBmdW5jdGlvbiBsb2dQdWxzbyhtc2cpewogICAgY29uc3QgcD0kKCcjcHVsc29zJyk7IGlmKCFwKSByZXR1cm47CiAgICBjb25zdCBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBkLmNsYXNzTmFtZT0nZGVidWctbWlzdGljbyc7CiAgICBjb25zdCB0cz1uZXcgRGF0ZSgpLHBhZD1uPT5TdHJpbmcobikucGFkU3RhcnQoMiwnMCcpOwogICAgZC50ZXh0Q29udGVudD1gWyR7cGFkKHRzLmdldEhvdXJzKCkpfToke3BhZCh0cy5nZXRNaW51dGVzKCkpfToke3BhZCh0cy5nZXRTZWNvbmRzKCkpfV0gJHttc2d9YDsKICAgIHAucHJlcGVuZChkKTsKICB9CiAgZnVuY3Rpb24gYXBwbHlUaGVtZShsYWJlbCl7CiAgICBjb25zdCBuYW1lPVN0cmluZyhsYWJlbHx8JycpLnJlcGxhY2UoL15bXkEtWmEtesOALcO/XSpccyovLCAnJykudHJpbSgpfHwnTmV1dHJvJzsKICAgIGRvY3VtZW50LmJvZHkuZGF0YXNldC5hcmNoPW5hbWU7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnU1VNQlVTX0xBU1RfQVJDSCcsbmFtZSk7CiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ZpYmUnKTsgc2V0VGltZW91dCgoKT0+ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd2aWJlJyksNjAwKTsKICAgIHJldHVybiBuYW1lOwogIH0KICAoZnVuY3Rpb24gcnNBcmNoKCl7Y29uc3QgbGFzdD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1VNQlVTX0xBU1RfQVJDSCcpOyBpZihsYXN0KSBkb2N1bWVudC5ib2R5LmRhdGFzZXQuYXJjaD1sYXN0O30pKCk7CgogIChmdW5jdGlvbiByc1Njcm9sbCgpewogICAgY29uc3QgYz0kKCcucmVzcG9uc2UtY29udGFpbmVyJyk7IGlmKCFjKSByZXR1cm47CiAgICBjb25zdCBLPSdTVU1CVVNfU0NST0xMX1RPUCc7IGNvbnN0IGxhc3Q9K2xvY2FsU3RvcmFnZS5nZXRJdGVtKEspOyBpZighaXNOYU4obGFzdCkpIGMuc2Nyb2xsVG9wPWxhc3Q7CiAgICBjLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsKCk9PmxvY2FsU3RvcmFnZS5zZXRJdGVtKEssYy5zY3JvbGxUb3ApLHtwYXNzaXZlOnRydWV9KTsKICB9KSgpOwoKICBmdW5jdGlvbiByZW5kZXJEdWFsKHt1c2VyUXVlcnkscmVzcG9zdGEscmVnZXgsYXJjaCxlbmVyZ3l9KXsKICAgIGNvbnN0IGVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBlbC5jbGFzc05hbWU9J2R1YWwtbWQnOwogICAgZWwuaW5uZXJIVE1MID0gYDxibG9ja3F1b3RlPvCfjIwgJHtlc2ModXNlclF1ZXJ5fHwnRHVhbC5JbmZvZG9zZScpfTxici8+PHNtYWxsPiR7bm93KCl9PC9zbWFsbD48L2Jsb2NrcXVvdGU+YCsKICAgICAgYDxkaXY+JHticihyZXNwb3N0YXx8JycpfTwvZGl2PmArCiAgICAgIGA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHgiPjxzcGFuIGNsYXNzPSJkdWFsLWNoaXAiPlJlZ2V4OiAke2VzYyhyZWdleHx8JycpfTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImR1YWwtY2hpcCI+QXJxdcOpdGlwbzogJHtlc2MoYXJjaHx8JycpfTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImR1YWwtY2hpcCI+VmlicmHDp8OjbzogJHtlc2MoU3RyaW5nKGVuZXJneXx8JycpKX0vMTA8L3NwYW4+PC9kaXY+YDsKICAgIGNvbnN0IGNvbnQ9JCgnLnJlc3BvbnNlLWNvbnRhaW5lcicpfHxkb2N1bWVudC5ib2R5OyBjb250LmFwcGVuZENoaWxkKGVsKTsgY29udC5zY3JvbGxUb3A9Y29udC5zY3JvbGxIZWlnaHQ7IHJldHVybiBlbDsKICB9CgogIGlmICh0eXBlb2Ygd2luZG93LnNwbGl0VGV4dD09PSdmdW5jdGlvbicgJiYgIXdpbmRvdy5zcGxpdFRleHQuX192NjIyKXsKICAgIGNvbnN0IHByZXY9d2luZG93LnNwbGl0VGV4dDsKICAgIHdpbmRvdy5zcGxpdFRleHQ9ZnVuY3Rpb24odGV4dCxtYXhMZW4peyB0cnl7cmV0dXJuIFtTdHJpbmcodGV4dD8/JycpXX1jYXRjaChlKXtyZXR1cm4gcHJldi5jYWxsKHRoaXMsdGV4dCxtYXhMZW4pfSB9OwogICAgd2luZG93LnNwbGl0VGV4dC5fX3Y2MjI9dHJ1ZTsKICB9CgogIChmdW5jdGlvbiBob29rUmVuZGVyKCl7CiAgICBjb25zdCBnPXdpbmRvdzsgaWYodHlwZW9mIGcucmVuZGVyUmVzcG9uc2UhPT0nZnVuY3Rpb24nIHx8IGcucmVuZGVyUmVzcG9uc2UuX192NjIyKSByZXR1cm47CiAgICBjb25zdCBwcmV2PWcucmVuZGVyUmVzcG9uc2U7CiAgICBnLnJlbmRlclJlc3BvbnNlPWZ1bmN0aW9uKC4uLmEpewogICAgICBjb25zdCByZXQ9cHJldi5hcHBseSh0aGlzLGEpOwogICAgICB0cnl7CiAgICAgICAgaWYoIXdpbmRvdy5fX1NVTUJVU19BQ1RJVkVfXykgcmV0dXJuIHJldDsKICAgICAgICBjb25zdCB0eHQ9KGEgJiYgdHlwZW9mIGFbMF09PT0nc3RyaW5nJyk/YVswXTonJzsgaWYoIXR4dCkgcmV0dXJuIHJldDsKICAgICAgICBjb25zdCBhcmNoPWRldGVjdEFyY2godHh0KSwgZW5lcmd5PXZpYih0eHQpLCByZWdleD1yJ1xiKFx3KylcYig/PSEpICsgXD8kICsgXC5cLlwu4oaS4oCm4pqhICsgKFxkKyknOwogICAgICAgIGNvbnN0IG91dD1kdWFsX2Zvcm1hdHRlcih0eHQpOwogICAgICAgIGNvbnN0IG5hbWU9YXBwbHlUaGVtZShhcmNoKTsKICAgICAgICB1cGRhdGVIVUQoe3JlZ2V4LHZpYjplbmVyZ3ksYXJjaDpuYW1lfSk7IGxvZ1B1bHNvKCfwn5SBIFZvejogJythcmNoKTsKICAgICAgICByZW5kZXJEdWFsKHt1c2VyUXVlcnk6IHdpbmRvdy5fX0tPQkxMVVhfTEFTVF9RVUVSWV9ffHwnRHVhbC5JbmZvZG9zZScsIHJlc3Bvc3RhOiBvdXQsIHJlZ2V4LCBhcmNoLCBlbmVyZ3l9KTsKICAgICAgfWNhdGNoKGUpe30KICAgICAgcmV0dXJuIHJldDsKICAgIH07IGcucmVuZGVyUmVzcG9uc2UuX192NjIyPXRydWU7CiAgfSkoKTsKCiAgKGZ1bmN0aW9uIGhvb2tDYWxsKCl7CiAgICBjb25zdCBnPXdpbmRvdzsgaWYodHlwZW9mIGcuY2FsbEFJIT09J2Z1bmN0aW9uJyB8fCBnLmNhbGxBSS5fX3Y2MjIpIHJldHVybjsKICAgIGNvbnN0IHByZXY9Zy5jYWxsQUk7CiAgICBnLmNhbGxBST1mdW5jdGlvbihwcm9tcHQsLi4ucmVzdCl7CiAgICAgIGNvbnN0IHJhdz0odHlwZW9mIHByb21wdD09PSdzdHJpbmcnP3Byb21wdDpTdHJpbmcocHJvbXB0Pz8nJykpOwogICAgICB3aW5kb3cuX19LT0JMTFVYX0xBU1RfUVVFUllfXz1yYXc7CiAgICAgIGlmKHdpbmRvdy5fX1NVTUJVU19BQ1RJVkVfXyl7CiAgICAgICAgY29uc3QgZW5lcmd5PXZpYihyYXcpOyByZW5kZXJEdWFsKHt1c2VyUXVlcnk6J1ZvY8OqJyxyZXNwb3N0YTpkdWFsX2Zvcm1hdHRlcihyYXcpLHJlZ2V4OidpZGEnLGFyY2g6J1VzdcOhcmlvJyxlbmVyZ3l9KTsKICAgICAgfQogICAgICBjb25zdCBwYXlsb2FkPSh3aW5kb3cuX19TVU1CVVNfQUNUSVZFX18mJklOSkVDVF9PVVRCT1VORCkgPyBkdWFsX2Zvcm1hdHRlcihyYXcpIDogcmF3OwogICAgICBjb25zdCByPXByZXYuY2FsbCh0aGlzLHBheWxvYWQsLi4ucmVzdCk7CiAgICAgIGlmKHIgJiYgdHlwZW9mIHIudGhlbj09PSdmdW5jdGlvbicpeyByZXR1cm4gci50aGVuKHg9PnsgdHJ5eyB3aW5kb3cucmVuZGVyUmVzcG9uc2UgJiYgd2luZG93LnJlbmRlclJlc3BvbnNlKFN0cmluZyh4KSk7IH1jYXRjaChlKXt9IHJldHVybiB4OyB9KTsgfQogICAgICByZXR1cm4gcjsKICAgIH07IGcuY2FsbEFJLl9fdjYyMj10cnVlOwogIH0pKCk7CgogIChmdW5jdGlvbiByZW1lbWJlcklucHV0KCl7CiAgICBjb25zdCBpPSQoJy5pbnB1dC1jb250YWluZXIgaW5wdXQnKSwgYj0kKCcuaW5wdXQtY29udGFpbmVyIGJ1dHRvbicpOwogICAgaWYoIWl8fCFiKSByZXR1cm47IGNvbnN0IHNldD0oKT0+d2luZG93Ll9fS09CTExVWF9MQVNUX1FVRVJZX189aS52YWx1ZTsKICAgIGIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNldCx7Y2FwdHVyZTp0cnVlfSk7IGkuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsZXY9PntpZihldi5rZXk9PT0nRW50ZXInKSBzZXQoKTt9KTsKICB9KSgpOwoKICAvLyBEbyBub3QgcmVtb3ZlIHVwbG9hZDsgbm8gTWV0YUx1eCBidXR0b24KfSkoKTs8L3NjcmlwdD4KCjxzY3JpcHQ+CihmdW5jdGlvbigpewogIGlmICh3aW5kb3cuX19SRUZJTkVfNjI5X18pIHJldHVybjsgd2luZG93Ll9fUkVGSU5FXzYyOV9fPXRydWU7CgogIGNvbnN0ICQgPSAocyxyPWRvY3VtZW50KT0+ci5xdWVyeVNlbGVjdG9yKHMpOwogIGNvbnN0IGNyZWF0ZSA9ICh0LGMsaCk9PnsgY29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpOyBpZihjKSBlLmNsYXNzTmFtZT1jOyBpZihoIT1udWxsKSBlLmlubmVySFRNTD1oOyByZXR1cm4gZTsgfTsKICBjb25zdCBlc2MgPSBzPT5TdHJpbmcocykucmVwbGFjZSgvWyY8PiInXS9nLGM9Pih7JyYnOicmYW1wOycsJzwnOicmbHQ7JywnPic6JyZndDsnLCciJzonJnF1b3Q7JywiJyI6JyYjMzk7J31bY10pKTsKCiAgZnVuY3Rpb24gcHJvdGVjdENvZGUodGV4dCl7CiAgICBjb25zdCBzdGFzaD1bXTsKICAgIGxldCBpPTA7CiAgICBjb25zdCBwcm90ZWN0ZWQgPSB0ZXh0CiAgICAgIC8vIGBgYGNvZGVgYGAgYmxvY2tzCiAgICAgIC5yZXBsYWNlKC9gYGAoW1xzXFNdKj8pYGBgL2csIChfLGNvZGUpPT5gwqfCp0NPREUke3N0YXNoLnB1c2goY29kZSktMX3Cp8KnYCkKICAgICAgLy8gaW5saW5lIGBjb2RlYAogICAgICAucmVwbGFjZSgvYChbXmBdKylgL2csIChfLGNvZGUpPT5gwqfCp0lOTCR7c3Rhc2gucHVzaChjb2RlKS0xfcKnwqdgKTsKICAgIHJldHVybiB7IAogICAgICB0ZXh0OiBwcm90ZWN0ZWQsIAogICAgICByZXN0b3JlOiAodCk9PnQKICAgICAgICAucmVwbGFjZSgvwqfCp0NPREUoXGQrKcKnwqcvZywgKF8sayk9PiI8cHJlPjxjb2RlPiIrZXNjKHN0YXNoWytrXSkrIjwvY29kZT48L3ByZT4iKQogICAgICAgIC5yZXBsYWNlKC/Cp8KnSU5MKFxkKynCp8KnL2csICAoXyxrKT0+Ijxjb2RlPiIrZXNjKHN0YXNoWytrXSkrIjwvY29kZT4iKQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGR1YWxGb3JtYXR0ZXIodCl7CiAgICAvLyBzYWZlIGZvcm1hdHRpbmcgb3V0c2lkZSBvZiBjb2RlCiAgICBjb25zdCB7dGV4dCwgcmVzdG9yZX0gPSBwcm90ZWN0Q29kZShTdHJpbmcodHx8JycpKTsKICAgIGxldCB4ID0gdGV4dDsKICAgIHggPSB4LnJlcGxhY2UoL1wuezN9L2csJ+KApuKaoScpOwogICAgeCA9IHgucmVwbGFjZSgvKD88IVx3KShcZHsxLDN9KD86Wy4sXVxkezN9KSp8XGQrKSg/IVx3KS9nLCc8c3BhbiBjbGFzcz0ibnVtIj7wn5SiICQxPC9zcGFuPicpOwogICAgeCA9IHgucmVwbGFjZSgvXGIoXHcrKVxiKD89ISkvZywnPHNwYW4gY2xhc3M9ImVtIj7wn4yfICQxPC9zcGFuPicpOwogICAgeCA9IHgucmVwbGFjZSgvXD9ccyokLywn8J+MgCcpOwogICAgeCA9IHgucmVwbGFjZSgvXHN7Mix9L2csJ+K4sScpOwogICAgcmV0dXJuIHJlc3RvcmUoeCk7CiAgfQoKICAvLyBzbWFydGVyIHNwbGl0IGZvciBzaW5nbGUtcGFnZSBibG9ja3MKICBmdW5jdGlvbiBzbWFydFNwbGl0KHRleHQsIG1heENoYXJzKXsKICAgIGNvbnN0IE1BWCA9ICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1VNQlVTX01BWF9DSEFSUycpIHx8IChtYXhDaGFyc3x8MTIwMCk7CiAgICBjb25zdCBzZWdtZW50cyA9IFtdOwogICAgY29uc3Qge3RleHQ6IHNhZmUsIHJlc3RvcmV9ID0gcHJvdGVjdENvZGUodGV4dCk7CiAgICAvLyBzcGxpdCBvbiBzdHJvbmcgYm91bmRhcmllcyB3aGlsZSBwcmVzZXJ2aW5nIHRhYmxlcyBhbmQgY29kZSBtYXJrZXJzIHdlJ3ZlIHN0YXNoZWQKICAgIGxldCBwYXJ0cyA9IHNhZmUKICAgICAgLnNwbGl0KC9cbig/PSN7MSw2fVxzKXxcbi17Myx9XG58XG5cKnszLH1cbnxcblxzKlxuL2cpCiAgICAgIC5maWx0ZXIocD0+cCAmJiBwLnRyaW0oKSk7CgogICAgLy8gcmUtd3JhcCB0byBNQVggYnkgc2VudGVuY2UgaWYgbmVlZGVkCiAgICBjb25zdCBvdXQ9W107CiAgICBmb3IgKGxldCBwIG9mIHBhcnRzKXsKICAgICAgaWYgKHAubGVuZ3RoPD1NQVgpeyBvdXQucHVzaChwKTsgY29udGludWU7IH0KICAgICAgY29uc3Qgc2VudGVuY2VzID0gcC5tYXRjaCgvW15cLiFcP10rW1wuIVw/XSt8XFMrJC9nKSB8fCBbcF07CiAgICAgIGxldCBidWY9IiI7CiAgICAgIGZvciAoY29uc3QgcyBvZiBzZW50ZW5jZXMpewogICAgICAgIGlmICgoYnVmK3MpLmxlbmd0aD5NQVgpewogICAgICAgICAgb3V0LnB1c2goYnVmLnRyaW0oKSk7IGJ1Zj1zOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBidWYrPXM7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChidWYudHJpbSgpKSBvdXQucHVzaChidWYudHJpbSgpKTsKICAgIH0KICAgIGZvciAoY29uc3QgbyBvZiBvdXQpIHNlZ21lbnRzLnB1c2goIHJlc3RvcmUobykgKTsKICAgIHJldHVybiBzZWdtZW50czsKICB9CgogIGZ1bmN0aW9uIHJlbmRlclJlc3BvbnNlVW5pZmllZCh0eHQpewogICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlcy13cmFwcGVyJyk7CiAgICBpZiAoIXdyYXApIHJldHVybjsKICAgIHdyYXAuaW5uZXJIVE1MID0gJyc7CiAgICBjb25zdCBwYWdlID0gY3JlYXRlKCdkaXYnLCdwYWdlIGFjdGl2ZScsJycpOwogICAgY29uc3QgYmxvY2tzID0gc21hcnRTcGxpdChkdWFsRm9ybWF0dGVyKHR4dCkpOwoKICAgIGJsb2Nrcy5mb3JFYWNoKChjaHVuaywgaWR4KT0+ewogICAgICBjb25zdCBjbHMgPSBpZHg9PT0wPydpbnRybyc6IChpZHglMz09PTE/J21pZGRsZSc6J2VuZGluZycpOwogICAgICBjb25zdCBibG9jayA9IGNyZWF0ZSgnZGl2JywncmVzcG9uc2UtYmxvY2sgJytjbHMsICc8cD4nK2NodW5rKyc8L3A+Jyk7CiAgICAgIHBhZ2UuYXBwZW5kQ2hpbGQoYmxvY2spOwogICAgfSk7CiAgICB3cmFwLmFwcGVuZENoaWxkKHBhZ2UpOwoKICAgIGNvbnN0IGluZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlSW5kaWNhdG9yJyk7CiAgICBpZiAoaW5kKSBpbmQudGV4dENvbnRlbnQgPSAnMSAvIDEnOwogIH0KCiAgLy8gaG9vayBvcmlnaW5hbCByZW5kZXJSZXNwb25zZSBpZiBleGlzdHMKICBjb25zdCBnPXdpbmRvdzsKICBpZiAodHlwZW9mIGcucmVuZGVyUmVzcG9uc2UgPT09ICdmdW5jdGlvbicgJiYgIWcucmVuZGVyUmVzcG9uc2UuX19yZWZpbmU2MjkpewogICAgY29uc3QgcHJldiA9IGcucmVuZGVyUmVzcG9uc2U7CiAgICBnLnJlbmRlclJlc3BvbnNlID0gZnVuY3Rpb24odGV4dCl7CiAgICAgIHRyeXsKICAgICAgICByZW5kZXJSZXNwb25zZVVuaWZpZWQoU3RyaW5nKHRleHR8fCcnKSk7CiAgICAgIH1jYXRjaChlKXsKICAgICAgICBjb25zb2xlLndhcm4oJ3JlZmluZTYyOSBmYWxsYmFjaycsIGUpOwogICAgICAgIHJldHVybiBwcmV2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgICBnLnJlbmRlclJlc3BvbnNlLl9fcmVmaW5lNjI5ID0gdHJ1ZTsKICB9CgogIC8vIGFsc28gcmVmaW5lIHdoZW4gY2FsbGluZyBBSSByZXN1bHQgY29tZXMgYmFjayBhcyBzdHJpbmcKICBpZiAodHlwZW9mIGcuY2FsbEFJID09PSAnZnVuY3Rpb24nICYmICFnLmNhbGxBSS5fX3JlZmluZTYyOSl7CiAgICBjb25zdCBwcmV2ID0gZy5jYWxsQUk7CiAgICBnLmNhbGxBSSA9IGZ1bmN0aW9uKHByb21wdCwgLi4ucmVzdCl7CiAgICAgIGNvbnN0IHIgPSBwcmV2LmNhbGwodGhpcywgcHJvbXB0LCAuLi5yZXN0KTsKICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgcmV0dXJuIHIudGhlbihhbnM9PnsKICAgICAgICAgIHRyeXsgcmVuZGVyUmVzcG9uc2VVbmlmaWVkKFN0cmluZyhhbnN8fCcnKSk7IH1jYXRjaChlKXt9CiAgICAgICAgICByZXR1cm4gYW5zOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfTsKICAgIGcuY2FsbEFJLl9fcmVmaW5lNjI5ID0gdHJ1ZTsKICB9CgogIC8vIENlbnRlciBjb250cm9scyBpZiBwYWdpbmF0aW9uIGlzIHJlbW92ZWQKICAoZnVuY3Rpb24gY2VudGVyQ29udHJvbHMoKXsKICAgIGNvbnN0IHJjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc3BvbnNlLWNvbnRyb2xzJyk7CiAgICBpZiAocmMpewogICAgICAvLyBlbnN1cmUgb25seSBjb250cm9sLWJ1dHRvbnMgYXJlIHZpc2libGUgaW5zaWRlCiAgICAgIGNvbnN0IHBhZyA9IHJjLnF1ZXJ5U2VsZWN0b3IoJy5wYWdpbmF0aW9uJyk7CiAgICAgIGlmIChwYWcpIHBhZy5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgIH0KICB9KSgpOwoKfSkoKTsKPC9zY3JpcHQ+CgoKPHNjcmlwdCBzcmM9ImR1YWwtdWktb3JjaGVzdHJhdG9yLnNpbWJpby1maXJzdC5qcyI+PC9zY3JpcHQ+CiAgPCEtLSBQYWluZWwgZG8gZ2VyZW5jaWFkb3IgZGUgY2hhdmVzIGUgdHJlaW5hbWVudG9zIC0tPgogIDxkaXYgY2xhc3M9ImtleW1nci1wYW5lbCIgaWQ9ImtleW1nclBhbmVsIj4KICAgIDxkaXYgY2xhc3M9ImtleW1nci1oZCI+CiAgICAgIDxoMz5DaGF2ZXMgJmFtcDsgVHJlaW5hbWVudG9zIOKAlCBEdWFsLkluZm9kb3NlPC9oMz4KICAgICAgPGJ1dHRvbiBjbGFzcz0ia2V5bWdyLWNsb3NlIiBpZD0ia2V5bWdyQ2xvc2UiPkZlY2hhcjwvYnV0dG9uPgogICAgPC9kaXY+CiAgICA8IS0tIEluZm9ybWHDp8O1ZXMgZG8gdXN1w6FyaW8gZSBhc3Npc3RlbnRlIC0tPgogICAgPHAgY2xhc3M9InVzZXItaW5mbyI+VXN1w6FyaW86IDxzcGFuIGlkPSJrZXltZ3JVc2VyTmFtZSI+PC9zcGFuPiDigJQgQXNzaXN0ZW50ZTogPHNwYW4gaWQ9ImtleW1nckFzc2lzdGFudE5hbWUiPjwvc3Bhbj48L3A+CiAgICA8ZGl2IGNsYXNzPSJrZXltZ3ItZ3JpZCI+CiAgICAgIDwhLS0gQ2FydMOjbyBkZSBjaGF2ZXMgT3BlblJvdXRlciAtLT4KICAgICAgPGRpdiBjbGFzcz0iY2FyZHgiPgogICAgICAgIDxoND5PcGVuUm91dGVyIOKAlCBDaGF2ZXM8L2g0PgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICA8aW5wdXQgaWQ9Im9yS2V5TmFtZSIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Ik5vbWUgZGEgY2hhdmUgKGV4LjogUGVzc29hbCwgV29yaykiLz4KICAgICAgICAgIDxpbnB1dCBpZD0ib3JLZXlWYWx1ZSIgdHlwZT0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJDb2xlIHN1YSBjaGF2ZSBzay0uLi4iIC8+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG54IiBpZD0iYnRuUGFzdGVLZXkiPkNvbGFyPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG54IiBpZD0iYnRuU2F2ZUtleSI+U2FsdmFyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGlzdCIgaWQ9ImtleXNMaXN0Ij48L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDwhLS0gQ2FydMOjbyBkZSB0cmVpbmFtZW50byBiYXNlIC0tPgogICAgICA8ZGl2IGNsYXNzPSJjYXJkeCI+CiAgICAgICAgPGg0PlRyZWluYW1lbnRvIEJhc2UgKFRYVCk8L2g0PgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICA8aW5wdXQgaWQ9ImJhc2VUcmFpbk5hbWUiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJOb21lIChleC46IFVuaWZpY2FkbyB2NikiLz4KICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bngiIGlkPSJidG5Mb2FkQmFzZVR4dCI+Q2FycmVnYXIgVFhUPC9idXR0b24+CiAgICAgICAgICA8aW5wdXQgaWQ9ImJhc2VUcmFpbkZpbGUiIHR5cGU9ImZpbGUiIGFjY2VwdD0iLnR4dCIgc3R5bGU9ImRpc3BsYXk6bm9uZSIvPgogICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRueCIgaWQ9ImJ0bkFwcGx5QmFzZVR4dCI+QXBsaWNhcjwvYnV0dG9uPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzd2l0Y2giPjxpbnB1dCBpZD0iYmFzZVRyYWluRW5hYmxlZCIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQvPiBBdGl2bzwvbGFiZWw+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRleHRhcmVhIGlkPSJiYXNlVHJhaW5UZXh0IiBwbGFjZWhvbGRlcj0iQ29udGXDumRvIGRvIFRYVCBiYXNlIj48L3RleHRhcmVhPgogICAgICA8L2Rpdj4KICAgICAgPCEtLSBDYXJ0w6NvIGRlIGV4dHJhcyAvIGF0aXZhw6fDtWVzIC0tPgogICAgICA8ZGl2IGNsYXNzPSJjYXJkeCI+CiAgICAgICAgPGg0PlRyZWluYW1lbnRvcyBFeHRyYXMgLyBBdGl2YcOnw7VlczwvaDQ+CiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgIDxpbnB1dCBpZD0iZXh0cmFOYW1lIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iTm9tZSBkbyBleHRyYS9hdGl2YcOnw6NvIi8+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG54IiBpZD0iYnRuTG9hZEV4dHJhVHh0Ij5BZGljaW9uYXIgVFhUPC9idXR0b24+CiAgICAgICAgICA8aW5wdXQgaWQ9ImV4dHJhRmlsZSIgdHlwZT0iZmlsZSIgYWNjZXB0PSIudHh0IiBzdHlsZT0iZGlzcGxheTpub25lIi8+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGlzdCIgaWQ9ImV4dHJhc0xpc3QiPjwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDwhLS0gQ2FydMOjbyBkZSBjb21wb25lbnRlcyBlIHVwbG9hZHMgLS0+CiAgICAgIDxkaXYgY2xhc3M9ImNhcmR4Ij4KICAgICAgICA8aDQ+Q29tcG9uZW50ZXMgJmFtcDsgVXBsb2FkczwvaDQ+CiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bngiIGlkPSJidG5VcGxvYWRIVE1MIj5DYXJyZWdhciBIVE1MPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG54IiBpZD0iYnRuVXBsb2FkU3ltYm9sIj5VcGxvYWQgQXJxdWl2bzwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRueCIgaWQ9ImJ0blJlbW90ZUNvbXBvbmVudCI+Q2FycmVnYXIgVVJMPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG54IiBpZD0iYnRuVG9nZ2xlRGVjb2RlciI+RGVjb2RpZmljYWRvcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIFNjcmlwdCBwYXJhIGdlcmVuY2lhciBjaGF2ZXMgZSB0cmVpbmFtZW50b3MgLS0+CiAgPHNjcmlwdD4KICAgIChmdW5jdGlvbigpewogICAgICAvLyBMb2NhbFN0b3JhZ2Uga2V5cwogICAgICBjb25zdCBMU19LRVlTID0gewogICAgICAgIE9SX0tFWVM6ICdPUl9LRVlTJywgICAgICAgICAgIC8vIGFycmF5IG9mIHtuYW1lLCBrZXl9CiAgICAgICAgT1JfQUNUSVZFOiAnT1JfQUNUSVZFJywgICAgICAgLy8gbmFtZSBvZiBhY3RpdmUga2V5CiAgICAgICAgVFJBSU5fQkFTRTogJ1RSQUlOX0JBU0VfVEVYVCcsCiAgICAgICAgVFJBSU5fQkFTRV9OQU1FOiAnVFJBSU5fQkFTRV9OQU1FJywKICAgICAgICBUUkFJTl9CQVNFX0VOQUJMRUQ6ICdUUkFJTl9CQVNFX0VOQUJMRUQnLAogICAgICAgIFRSQUlOX0VYVFJBUzogJ1RSQUlOX0VYVFJBUycgIC8vIGFycmF5IG9mIHtuYW1lLCB0ZXh0LCBlbmFibGVkfQogICAgICB9OwogICAgICAvLyBIZWxwZXJzCiAgICAgIGNvbnN0IHFzID0gKHMsIHI9ZG9jdW1lbnQpPT5yLnF1ZXJ5U2VsZWN0b3Iocyk7CiAgICAgIGNvbnN0IHN0b3JlID0gewogICAgICAgIGdldChrLCBkKXsgdHJ5eyByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKSkgPz8gZDsgfWNhdGNoKGUpeyByZXR1cm4gZDsgfSB9LAogICAgICAgIHNldChrLCB2KXsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaywgSlNPTi5zdHJpbmdpZnkodikpOyB9CiAgICAgIH07CiAgICAgIC8vIFVJIHJlZnMKICAgICAgY29uc3Qgb3BlbkJ0biAgPSBxcygnI2tleW1nck9wZW4nKTsKICAgICAgY29uc3QgcGFuZWwgICAgPSBxcygnI2tleW1nclBhbmVsJyk7CiAgICAgIGNvbnN0IGNsb3NlQnRuID0gcXMoJyNrZXltZ3JDbG9zZScpOwogICAgICBjb25zdCBvcktleU5hbWUgID0gcXMoJyNvcktleU5hbWUnKTsKICAgICAgY29uc3Qgb3JLZXlWYWx1ZSA9IHFzKCcjb3JLZXlWYWx1ZScpOwogICAgICBjb25zdCBidG5QYXN0ZSAgID0gcXMoJyNidG5QYXN0ZUtleScpOwogICAgICBjb25zdCBidG5TYXZlS2V5ID0gcXMoJyNidG5TYXZlS2V5Jyk7CiAgICAgIGNvbnN0IGtleXNMaXN0ICAgPSBxcygnI2tleXNMaXN0Jyk7CiAgICAgIGNvbnN0IGJhc2VOYW1lICAgPSBxcygnI2Jhc2VUcmFpbk5hbWUnKTsKICAgICAgY29uc3QgYmFzZVRleHQgICA9IHFzKCcjYmFzZVRyYWluVGV4dCcpOwogICAgICBjb25zdCBiYXNlRmlsZSAgID0gcXMoJyNiYXNlVHJhaW5GaWxlJyk7CiAgICAgIGNvbnN0IGJ0bkxvYWRCYXNlPSBxcygnI2J0bkxvYWRCYXNlVHh0Jyk7CiAgICAgIGNvbnN0IGJ0bkFwcGx5ICAgPSBxcygnI2J0bkFwcGx5QmFzZVR4dCcpOwogICAgICBjb25zdCBiYXNlRW5hYmxlZD0gcXMoJyNiYXNlVHJhaW5FbmFibGVkJyk7CiAgICAgIGNvbnN0IGV4dHJhTmFtZSAgPSBxcygnI2V4dHJhTmFtZScpOwogICAgICBjb25zdCBleHRyYUZpbGUgID0gcXMoJyNleHRyYUZpbGUnKTsKICAgICAgY29uc3QgYnRuTG9hZEV4dCA9IHFzKCcjYnRuTG9hZEV4dHJhVHh0Jyk7CiAgICAgIGNvbnN0IGV4dHJhc0xpc3QgPSBxcygnI2V4dHJhc0xpc3QnKTsKCiAgICAgIC8vIE5vdm9zIGVsZW1lbnRvcyBwYXJhIHVwbG9hZHMgZSBpbmZvIGRlIHVzdcOhcmlvCiAgICAgIGNvbnN0IGtleW1nclVzZXJOYW1lID0gcXMoJyNrZXltZ3JVc2VyTmFtZScpOwogICAgICBjb25zdCBrZXltZ3JBc3Npc3RhbnROYW1lID0gcXMoJyNrZXltZ3JBc3Npc3RhbnROYW1lJyk7CiAgICAgIGNvbnN0IGJ0blVwbG9hZEhUTUwgPSBxcygnI2J0blVwbG9hZEhUTUwnKTsKICAgICAgY29uc3QgYnRuVXBsb2FkU3ltYm9sID0gcXMoJyNidG5VcGxvYWRTeW1ib2wnKTsKICAgICAgY29uc3QgYnRuUmVtb3RlQ29tcG9uZW50ID0gcXMoJyNidG5SZW1vdGVDb21wb25lbnQnKTsKICAgICAgY29uc3QgYnRuVG9nZ2xlRGVjb2RlciA9IHFzKCcjYnRuVG9nZ2xlRGVjb2RlcicpOwogICAgICBjb25zdCB1cGxvYWRIVE1MSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkSFRNTCcpOwogICAgICBjb25zdCB1cGxvYWRTeW1ib2xJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeW1ib2xpY0ZpbGVJbnB1dCcpOwogICAgICBjb25zdCBkZWNvZGVyQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlY29kZXJCb3gnKTsKCiAgICAgIC8vIG9wZW4vY2xvc2UgcGFuZWwKICAgICAgb3BlbkJ0biAmJiBvcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICAgICAgICBwYW5lbC5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7CiAgICAgICAgLy8gQXR1YWxpemEgaW5mb3JtYcOnw7VlcyBkbyB1c3XDoXJpbyBlIGFzc2lzdGVudGUgYW8gYWJyaXIKICAgICAgICBpZiAoa2V5bWdyVXNlck5hbWUpIGtleW1nclVzZXJOYW1lLnRleHRDb250ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJOYW1lJykgfHwgJyc7CiAgICAgICAgaWYgKGtleW1nckFzc2lzdGFudE5hbWUpIGtleW1nckFzc2lzdGFudE5hbWUudGV4dENvbnRlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXNzaXN0YW50QmFzZScpIHx8ICcnOwogICAgICB9KTsKICAgICAgY2xvc2VCdG4gJiYgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKSk7CgogICAgICAvLyBjbGlwYm9hcmQgc3VwcG9ydAogICAgICBidG5QYXN0ZSAmJiBidG5QYXN0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpPT57CiAgICAgICAgdHJ5eyBvcktleVZhbHVlLnZhbHVlID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpOyB9Y2F0Y2goZSl7IGFsZXJ0KCdOw6NvIGNvbnNlZ3VpIGxlciBvIGNsaXBib2FyZC4nKTsgfQogICAgICB9KTsKCiAgICAgIC8vIHJlbmRlciBrZXlzCiAgICAgIGZ1bmN0aW9uIHJlbmRlcktleXMoKXsKICAgICAgICBjb25zdCBsaXN0ID0gc3RvcmUuZ2V0KExTX0tFWVMuT1JfS0VZUywgW10pOwogICAgICAgIGNvbnN0IGFjdGl2ZSA9IHN0b3JlLmdldChMU19LRVlTLk9SX0FDVElWRSwgbnVsbCk7CiAgICAgICAga2V5c0xpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgbGlzdC5mb3JFYWNoKChrLCBpZHgpPT57CiAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGl0ZW0uY2xhc3NOYW1lPSdpdGVtJzsKICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImJhZGdlcyI+PHNwYW4gY2xhc3M9ImJhZGdlIj4nKyhrLm5hbWV8fCgnQ2hhdmUgJysoaWR4KzEpKSkrJzwvc3Bhbj4nKyhhY3RpdmU9PT1rLm5hbWU/JzxzcGFuIGNsYXNzPSJiYWRnZSI+QVRJVkE8L3NwYW4+JzonJykrJzwvZGl2Pic7CiAgICAgICAgICBjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGFjdGlvbnMuY2xhc3NOYW1lPSdyb3cnOwogICAgICAgICAgY29uc3QgYnRuQWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7IGJ0bkFjdC5jbGFzc05hbWU9J2J0bngnOyBidG5BY3QudGV4dENvbnRlbnQ9J0F0aXZhcic7CiAgICAgICAgICBidG5BY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyBzdG9yZS5zZXQoTFNfS0VZUy5PUl9BQ1RJVkUsIGsubmFtZSk7IHJlbmRlcktleXMoKTsgfSk7CiAgICAgICAgICBjb25zdCBidG5EZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsgYnRuRGVsLmNsYXNzTmFtZT0nYnRueCc7IGJ0bkRlbC50ZXh0Q29udGVudD0nRXhjbHVpcic7CiAgICAgICAgICBidG5EZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyBsaXN0LnNwbGljZShpZHgsMSk7IHN0b3JlLnNldChMU19LRVlTLk9SX0tFWVMsIGxpc3QpOyBpZiAoYWN0aXZlPT09ay5uYW1lKSBzdG9yZS5zZXQoTFNfS0VZUy5PUl9BQ1RJVkUsIG51bGwpOyByZW5kZXJLZXlzKCk7IH0pOwogICAgICAgICAgYWN0aW9ucy5hcHBlbmQoYnRuQWN0LCBidG5EZWwpOwogICAgICAgICAgaXRlbS5hcHBlbmQoYWN0aW9ucyk7CiAgICAgICAgICBrZXlzTGlzdC5hcHBlbmQoaXRlbSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gc2F2ZSBrZXkKICAgICAgYnRuU2F2ZUtleSAmJiBidG5TYXZlS2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICAgICAgICBjb25zdCBuYW1lID0gKG9yS2V5TmFtZS52YWx1ZXx8JycpLnRyaW0oKTsgY29uc3QgdmFsID0gKG9yS2V5VmFsdWUudmFsdWV8fCcnKS50cmltKCk7CiAgICAgICAgaWYgKCF2YWwgfHwgIS9ec2stLy50ZXN0KHZhbCkpeyByZXR1cm4gYWxlcnQoJ0NvbGUgdW1hIGNoYXZlIGNvbWXDp2FuZG8gY29tIHNrLScpOyB9CiAgICAgICAgY29uc3QgbGlzdCA9IHN0b3JlLmdldChMU19LRVlTLk9SX0tFWVMsIFtdKTsKICAgICAgICBjb25zdCBpID0gbGlzdC5maW5kSW5kZXgoeD0+eC5uYW1lPT09bmFtZSk7CiAgICAgICAgaWYgKGk+PTApIGxpc3RbaV0ua2V5ID0gdmFsOyBlbHNlIGxpc3QucHVzaCh7bmFtZTogbmFtZXx8KCdDaGF2ZSAnKyhsaXN0Lmxlbmd0aCsxKSksIGtleTogdmFsfSk7CiAgICAgICAgc3RvcmUuc2V0KExTX0tFWVMuT1JfS0VZUywgbGlzdCk7CiAgICAgICAgaWYgKCFzdG9yZS5nZXQoTFNfS0VZUy5PUl9BQ1RJVkUsbnVsbCkpIHN0b3JlLnNldChMU19LRVlTLk9SX0FDVElWRSwgbGlzdFswXS5uYW1lKTsKICAgICAgICBvcktleVZhbHVlLnZhbHVlPScnOwogICAgICAgIHJlbmRlcktleXMoKTsKICAgICAgICBhbGVydCgnQ2hhdmUgc2FsdmEuJyk7CiAgICAgIH0pOwogICAgICAvLyBwdWJsaWMgaGVscGVyCiAgICAgIHdpbmRvdy5nZXRPcGVuUm91dGVyS2V5ID0gZnVuY3Rpb24oKXsKICAgICAgICBjb25zdCBsaXN0ID0gc3RvcmUuZ2V0KExTX0tFWVMuT1JfS0VZUywgW10pOwogICAgICAgIGNvbnN0IGFjdGl2ZSA9IHN0b3JlLmdldChMU19LRVlTLk9SX0FDVElWRSwgbnVsbCk7CiAgICAgICAgY29uc3QgaXRlbSA9IGxpc3QuZmluZCh4PT54Lm5hbWU9PT1hY3RpdmUpIHx8IGxpc3RbMF07CiAgICAgICAgcmV0dXJuIGl0ZW0gPyBpdGVtLmtleSA6IG51bGw7CiAgICAgIH07CiAgICAgIC8vIHBhdGNoIGZldGNoIHRvIGluamVjdCBBdXRob3JpemF0aW9uIGhlYWRlcgogICAgICBpZiAoIXdpbmRvdy5fX29wZW5yb3V0ZXJQYXRjaGVkKXsKICAgICAgICBjb25zdCBvcmlnRmV0Y2ggPSB3aW5kb3cuZmV0Y2g7CiAgICAgICAgd2luZG93LmZldGNoID0gYXN5bmMgZnVuY3Rpb24oaW5wdXQsIGluaXQ9e30pewogICAgICAgICAgdHJ5ewogICAgICAgICAgICBjb25zdCB1cmwgPSAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykgPyBpbnB1dCA6IChpbnB1dCAmJiBpbnB1dC51cmwpIHx8ICcnOwogICAgICAgICAgICBjb25zdCBrZXkgPSB3aW5kb3cuZ2V0T3BlblJvdXRlcktleSAmJiB3aW5kb3cuZ2V0T3BlblJvdXRlcktleSgpOwogICAgICAgICAgICBpZiAoa2V5KXsKICAgICAgICAgICAgICBpbml0ID0gaW5pdCB8fCB7fTsKICAgICAgICAgICAgICBpbml0LmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbml0LmhlYWRlcnMgfHwge30pOwogICAgICAgICAgICAgIGlmICgvb3BlbnJvdXRlcnxcL3YxXC9jaGF0XC98XC92MVwvY29tcGxldGlvbnMvLnRlc3QodXJsKSl7CiAgICAgICAgICAgICAgICBpZiAoIWluaXQuaGVhZGVycy5nZXQoJ0F1dGhvcml6YXRpb24nKSkgaW5pdC5oZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsJ0JlYXJlciAnK2tleSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9Y2F0Y2goZSl7IGNvbnNvbGUud2FybignT3BlblJvdXRlciB3cmFwcGVyIGZhbGhvdScsIGUpOyB9CiAgICAgICAgICByZXR1cm4gb3JpZ0ZldGNoKGlucHV0LCBpbml0KTsKICAgICAgICB9OwogICAgICAgIHdpbmRvdy5fX29wZW5yb3V0ZXJQYXRjaGVkID0gdHJ1ZTsKICAgICAgfQogICAgICAvLyB0cmFpbmluZyBiYXNlCiAgICAgIGZ1bmN0aW9uIGxvYWRCYXNlRnJvbUxTKCl7CiAgICAgICAgYmFzZU5hbWUudmFsdWUgPSBzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFX05BTUUsICdCYXNlIChpbmxpbmUpJyk7CiAgICAgICAgYmFzZVRleHQudmFsdWUgPSBzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFLCAnJykgfHwgKHdpbmRvdy5UUkFJTklOR1MgJiYgd2luZG93LlRSQUlOSU5HUy51bmlmaWNhZG8pIHx8ICcnOwogICAgICAgIGJhc2VFbmFibGVkLmNoZWNrZWQgPSBzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFX0VOQUJMRUQsIHRydWUpOwogICAgICB9CiAgICAgIGxvYWRCYXNlRnJvbUxTKCk7CiAgICAgIGJ0bkxvYWRCYXNlICYmIGJ0bkxvYWRCYXNlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiBiYXNlRmlsZS5jbGljaygpKTsKICAgICAgYmFzZUZpbGUgJiYgYmFzZUZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpPT57CiAgICAgICAgY29uc3QgZiA9IGUudGFyZ2V0LmZpbGVzWzBdOyBpZiAoIWYpIHJldHVybjsKICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCBmLnRleHQoKTsKICAgICAgICBiYXNlTmFtZS52YWx1ZSA9IGYubmFtZS5yZXBsYWNlKC9cLnR4dCQvaSwnJyk7CiAgICAgICAgYmFzZVRleHQudmFsdWUgPSB0eHQ7CiAgICAgIH0pOwogICAgICBidG5BcHBseSAmJiBidG5BcHBseS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgICAgICAgc3RvcmUuc2V0KExTX0tFWVMuVFJBSU5fQkFTRV9OQU1FLCBiYXNlTmFtZS52YWx1ZS50cmltKCl8fCdCYXNlJyk7CiAgICAgICAgc3RvcmUuc2V0KExTX0tFWVMuVFJBSU5fQkFTRSwgYmFzZVRleHQudmFsdWV8fCcnKTsKICAgICAgICBzdG9yZS5zZXQoTFNfS0VZUy5UUkFJTl9CQVNFX0VOQUJMRUQsIGJhc2VFbmFibGVkLmNoZWNrZWQpOwogICAgICAgIHRyeXsKICAgICAgICAgIGlmIChiYXNlRW5hYmxlZC5jaGVja2VkICYmIHR5cGVvZiB3aW5kb3cuc2V0VHJhaW5pbmdUZXh0PT09J2Z1bmN0aW9uJyl7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUcmFpbmluZ1RleHQoYmFzZVRleHQudmFsdWV8fCcnKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0RVQUxfVFJBSU5JTkdfTU9ERScsJ3VuaWZpY2FkbycpOwogICAgICAgICAgfQogICAgICAgICAgYWxlcnQoJ1RyZWluYW1lbnRvIGJhc2UgYXBsaWNhZG8uJyk7CiAgICAgICAgICBpZiAod2luZG93LmxvZ01pc3RpY28pIHdpbmRvdy5sb2dNaXN0aWNvKCfimpnvuI8gQmFzZSBhcGxpY2FkYTogJysoYmFzZU5hbWUudmFsdWV8fCdCYXNlJykpOwogICAgICAgIH1jYXRjaChlKXsgY29uc29sZS53YXJuKCdGYWxoYSBhbyBhcGxpY2FyIGJhc2UnLCBlKTsgfQogICAgICB9KTsKICAgICAgYmFzZUVuYWJsZWQgJiYgYmFzZUVuYWJsZWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCk9PiBzdG9yZS5zZXQoTFNfS0VZUy5UUkFJTl9CQVNFX0VOQUJMRUQsIGJhc2VFbmFibGVkLmNoZWNrZWQpKTsKICAgICAgLy8gZXh0cmFzIC8gYXRpdmHDp8O1ZXMKICAgICAgZnVuY3Rpb24gcmVuZGVyRXh0cmFzKCl7CiAgICAgICAgY29uc3QgZXh0cmFzID0gc3RvcmUuZ2V0KExTX0tFWVMuVFJBSU5fRVhUUkFTLCBbXSk7CiAgICAgICAgZXh0cmFzTGlzdC5pbm5lckhUTUw9Jyc7CiAgICAgICAgZXh0cmFzLmZvckVhY2goKGV4LCBpZHgpPT57CiAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgcm93LmNsYXNzTmFtZT0naXRlbSc7CiAgICAgICAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGxlZnQuY2xhc3NOYW1lPSdiYWRnZXMnOwogICAgICAgICAgbGVmdC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9ImJhZGdlIj4nKyhleC5uYW1lfHwoJ0V4dHJhICcrKGlkeCsxKSkpKyc8L3NwYW4+JzsKICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IHJpZ2h0LmNsYXNzTmFtZT0ncm93JzsKICAgICAgICAgIGNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7IHRvZ2dsZS5jbGFzc05hbWU9J3N3aXRjaCc7CiAgICAgICAgICBjb25zdCBjYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IGNiLnR5cGU9J2NoZWNrYm94JzsgY2IuY2hlY2tlZD0hIWV4LmVuYWJsZWQ7CiAgICAgICAgICBjYi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKT0+eyBleC5lbmFibGVkID0gY2IuY2hlY2tlZDsgZXh0cmFzW2lkeF09ZXg7IHN0b3JlLnNldChMU19LRVlTLlRSQUlOX0VYVFJBUywgZXh0cmFzKTsgfSk7CiAgICAgICAgICB0b2dnbGUuYXBwZW5kKGNiLCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnIEF0aXZvJykpOwogICAgICAgICAgY29uc3QgYnRuVmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOyBidG5WaWV3LmNsYXNzTmFtZT0nYnRueCc7IGJ0blZpZXcudGV4dENvbnRlbnQ9J1Zlcic7CiAgICAgICAgICBidG5WaWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgYWxlcnQoZXgudGV4dC5zbGljZSgwLDEyMDApICsgKGV4LnRleHQubGVuZ3RoPjEyMDA/Jy4uLic6JycpKTsgfSk7CiAgICAgICAgICBjb25zdCBidG5EZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsgYnRuRGVsLmNsYXNzTmFtZT0nYnRueCc7IGJ0bkRlbC50ZXh0Q29udGVudD0nRXhjbHVpcic7CiAgICAgICAgICBidG5EZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyBleHRyYXMuc3BsaWNlKGlkeCwxKTsgc3RvcmUuc2V0KExTX0tFWVMuVFJBSU5fRVhUUkFTLCBleHRyYXMpOyByZW5kZXJFeHRyYXMoKTsgfSk7CiAgICAgICAgICByaWdodC5hcHBlbmQodG9nZ2xlLCBidG5WaWV3LCBidG5EZWwpOwogICAgICAgICAgcm93LmFwcGVuZChsZWZ0LCByaWdodCk7CiAgICAgICAgICBleHRyYXNMaXN0LmFwcGVuZChyb3cpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJlbmRlckV4dHJhcygpOwogICAgICBidG5Mb2FkRXh0ICYmIGJ0bkxvYWRFeHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IGV4dHJhRmlsZS5jbGljaygpKTsKICAgICAgZXh0cmFGaWxlICYmIGV4dHJhRmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSk9PnsKICAgICAgICBjb25zdCBmID0gZS50YXJnZXQuZmlsZXNbMF07IGlmICghZikgcmV0dXJuOwogICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IGYudGV4dCgpOwogICAgICAgIGNvbnN0IG5hbWUgPSAoZXh0cmFOYW1lLnZhbHVlfHxmLm5hbWUucmVwbGFjZSgvXC50eHQkL2ksJycpKS50cmltKCkgfHwgKCdFeHRyYSAnKyhzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9FWFRSQVMsIFtdKS5sZW5ndGgrMSkpOwogICAgICAgIGNvbnN0IGV4dHJhcyA9IHN0b3JlLmdldChMU19LRVlTLlRSQUlOX0VYVFJBUywgW10pOwogICAgICAgIGV4dHJhcy5wdXNoKHtuYW1lLCB0ZXh0OiB0eHQsIGVuYWJsZWQ6dHJ1ZX0pOwogICAgICAgIHN0b3JlLnNldChMU19LRVlTLlRSQUlOX0VYVFJBUywgZXh0cmFzKTsKICAgICAgICBleHRyYU5hbWUudmFsdWU9Jyc7CiAgICAgICAgcmVuZGVyRXh0cmFzKCk7CiAgICAgIH0pOwoKICAgICAgLy8gSW50ZWdyYcOnw6NvIGRlIHVwbG9hZHMgZSBjb21wb25lbnRlcyBubyBwYWluZWwKICAgICAgaWYgKGJ0blVwbG9hZEhUTUwgJiYgdXBsb2FkSFRNTElucHV0KSB7CiAgICAgICAgYnRuVXBsb2FkSFRNTC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgIHVwbG9hZEhUTUxJbnB1dC5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChidG5VcGxvYWRTeW1ib2wgJiYgdXBsb2FkU3ltYm9sSW5wdXQpIHsKICAgICAgICBidG5VcGxvYWRTeW1ib2wuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICB1cGxvYWRTeW1ib2xJbnB1dC5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChidG5SZW1vdGVDb21wb25lbnQpIHsKICAgICAgICBidG5SZW1vdGVDb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICBjb25zdCB1cmwgPSBwcm9tcHQoIlVSTCBkbyBjb21wb25lbnRlIHJlbW90bzoiKTsKICAgICAgICAgIGlmICh1cmwpIHsKICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdteS1mcmFtZS1sb2FkZXInKTsKICAgICAgICAgICAgZnJhbWUuc3JjID0gdXJsOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoYnRuVG9nZ2xlRGVjb2RlciAmJiBkZWNvZGVyQm94KSB7CiAgICAgICAgYnRuVG9nZ2xlRGVjb2Rlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgIGRlY29kZXJCb3guc3R5bGUuZGlzcGxheSA9IGRlY29kZXJCb3guc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBPY3VsdGEgb3MgYm90w7VlcyBsYXRlcmFpcyBvcmlnaW5haXMsIHBvaXMgYWdvcmEgZXN0w6NvIGFjZXNzw612ZWlzIHBlbG8gcGFpbmVsCiAgICAgIGNvbnN0IHNpZGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3VwbG9hZENvbXBvbmVudEJ0biwgI3JlbW90ZUNvbXBvbmVudEJ0biwgI3RvZ2dsZURlY29kZXJCdG4nKTsKICAgICAgc2lkZUJ0bnMuZm9yRWFjaChlbCA9PiBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTsKICAgICAgLy8gbWVyZ2UgZXh0cmFzIHRvIHN5c3RlbSBwcm9tcHQKICAgICAgaWYgKCF3aW5kb3cuX19tZXJnZUV4dHJhc0luc3RhbGxlZCl7CiAgICAgICAgY29uc3Qgb3JpZ0J1aWxkID0gd2luZG93LmJ1aWxkU3lzdGVtUHJvbXB0OwogICAgICAgIHdpbmRvdy5idWlsZFN5c3RlbVByb21wdCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICBsZXQgYmFzZSA9ICcnOwogICAgICAgICAgaWYgKHN0b3JlLmdldChMU19LRVlTLlRSQUlOX0JBU0VfRU5BQkxFRCwgdHJ1ZSkpewogICAgICAgICAgICBiYXNlID0gc3RvcmUuZ2V0KExTX0tFWVMuVFJBSU5fQkFTRSwgJycpIHx8ICh3aW5kb3cuVFJBSU5JTkdTICYmIHdpbmRvdy5UUkFJTklOR1MudW5pZmljYWRvKSB8fCAnJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhc2UgPSAod2luZG93LlRSQUlOSU5HUyAmJiB3aW5kb3cuVFJBSU5JTkdTLnVuaWZpY2FkbykgfHwgJyc7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBleHRyYXMgPSBzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9FWFRSQVMsIFtdKS5maWx0ZXIoeD0+eC5lbmFibGVkKS5tYXAoeD0+eC50ZXh0KS5qb2luKCdcblxuJyk7CiAgICAgICAgICByZXR1cm4gW2Jhc2UsIGV4dHJhc10uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xuXG4nKTsKICAgICAgICB9OwogICAgICAgIHdpbmRvdy5fX21lcmdlRXh0cmFzSW5zdGFsbGVkID0gdHJ1ZTsKICAgICAgfQogICAgICAvLyBhcHBseSBiYXNlIG9uIGJvb3QKICAgICAgdHJ5ewogICAgICAgIGlmIChzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFLCAnJykpewogICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2V0VHJhaW5pbmdUZXh0PT09J2Z1bmN0aW9uJyAmJiBzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFX0VOQUJMRUQsIHRydWUpKXsKICAgICAgICAgICAgd2luZG93LnNldFRyYWluaW5nVGV4dChzdG9yZS5nZXQoTFNfS0VZUy5UUkFJTl9CQVNFLCAnJykpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfWNhdGNoKGUpe30KICAgICAgLy8gaW5pdGlhbCByZW5kZXIgb2Yga2V5cwogICAgICByZW5kZXJLZXlzKCk7CiAgICB9KSgpOwogIDwvc2NyaXB0PgoKCjxzY3JpcHQ+Ci8qID09PSBTdXBlclBhdGNoOiBoYW5kbGVyIMO6bmljbyBkbyBib3TDo28gcml0dWFsID09PSAqLwooZnVuY3Rpb24oKXsKICBjb25zdCBidG5SaXR1YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnRuLWV4cGFuZGlyLXJpdHVhbCIpOwogIGNvbnN0IHB1bHNvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdWxzb3MiKTsKICBpZighYnRuUml0dWFsKSByZXR1cm47CiAgYnRuUml0dWFsLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgaWYgKCFwdWxzb3MpIHJldHVybjsKICAgIHB1bHNvcy5jbGFzc0xpc3QudG9nZ2xlKCJleHBhbmRlZCIpOwogICAgaWYgKCFwdWxzb3MuY2xhc3NMaXN0LmNvbnRhaW5zKCJleHBhbmRlZCIpKSB7CiAgICAgIHB1bHNvcy5zY3JvbGxUb3AgPSBwdWxzb3Muc2Nyb2xsSGVpZ2h0OwogICAgfQogICAgdHJ5IHsgaWYgKHR5cGVvZiBsb2dNaXN0aWNvID09PSAiZnVuY3Rpb24iKSBsb2dNaXN0aWNvKCLip4kgRXhwYW5kaXUgbyBwbGFubyByaXR1YWwgb2N1bHRvLiIpOyB9IGNhdGNoKGUpe30KICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7Cn0pKCk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K";
      const bytes = atob(b64);
      const arr = new Uint8Array(bytes.length);
      for (let i=0;i<bytes.length;i++) arr[i] = bytes.charCodeAt(i);
      const blob = new Blob([arr], {type: "text/html"});
      const url = URL.createObjectURL(blob);
      const frame = document.getElementById('legacyFrame');
      if(frame) frame.src = url;
    } catch(e) {
      console.warn("Falha ao carregar app legado embutido:", e);
    }

    // exemplo: a√ß√£o de ritual
    document.getElementById('startRitual')?.addEventListener('click',()=>{
      alert("Ritual iniciado ‚ö°Ô∏è");
    });
  });
  </script>
<noscript>
<p style="padding:12px">Ative o JavaScript para navegar entre as se√ß√µes: Home, Assistente, Rituais, Kobllux.</p>
</noscript>
<script>
document.querySelectorAll('nav a[data-nav]').forEach(a=>{
  a.addEventListener('click', e=>{
    // simulate loading animation for 1400ms
    a.classList.add('loading');
    setTimeout(()=>a.classList.remove('loading'), 1400);
  }, {passive:true});
});
</script><script>
document.querySelectorAll('nav a[data-nav]').forEach(a=>{
  a.addEventListener('click', e=>{
    a.classList.add('loading');
    setTimeout(()=>a.classList.remove('loading'), 1400);
  }, {passive:true});
});
</script><script>
document.querySelectorAll('nav a[data-nav]').forEach(a=>{
  a.addEventListener('click', e=>{
    a.classList.add('loading');
    setTimeout(()=>a.classList.remove('loading'), 1400);
  }, {passive:true});
});
</script></body>
</html>
