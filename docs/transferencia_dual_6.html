<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>âš¡ KODUX Dual Transfer</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #000;
      --text: #00ff00;
      --accent: #005500;
      --accent-hover: #00cc00;
      --glow: 0 0 10px #00ff00;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: 'Montserrat', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #111;
      border: 1px solid var(--text);
      border-radius: 10px;
      padding: 30px;
      box-shadow: var(--glow);
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      color: var(--text);
      margin-bottom: 20px;
      animation: pulseLogo 3s infinite;
    }

    @keyframes pulseLogo {
      0%, 100% { text-shadow: 0 0 5px #0f0; }
      50% { text-shadow: 0 0 20px #0f0; }
    }

    button {
      background-color: var(--accent);
      color: white;
      border: none;
      padding: 12px 24px;
      margin: 10px 5px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: var(--accent-hover);
      transform: scale(1.05);
    }

    #deviceList {
      text-align: left;
      margin: 20px auto;
      padding: 10px;
      border: 1px dashed var(--text);
      background: #222;
      min-height: 100px;
      max-height: 250px;
      overflow-y: auto;
    }

    .section-title {
      font-size: 20px;
      margin-top: 30px;
      border-top: 1px solid var(--text);
      padding-top: 15px;
    }

    input[type="file"] {
      margin-top: 10px;
    }

    #transferStatus {
      margin-top: 10px;
      color: #0f0;
    }

    .hidden {
      display: none;
    }

    /* render response block */
    .renderResponseBlock {
      margin-top: 40px;
      padding: 20px;
      border-radius: 12px;
      background: rgba(0, 255, 0, 0.1);
      border: 2px dashed var(--text);
      animation: fadeIn 1.2s ease;
    }

    .renderResponseBlock.expanded {
      background: linear-gradient(45deg, #00ff00aa, #004400aa);
      box-shadow: 0 0 25px #0f0;
      transform: scale(1.01);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="logo">âš¡ KODUX DUAL TRANSFER</div>
    <p>ğŸŒ ConexÃ£o Dual-InfoDose com protocolo KOB-LUX</p>

    <button id="scanBtn">ğŸ” Procurar Dispositivos</button>
    <div id="deviceList"><em>Dispositivos encontrados aparecerÃ£o aqui...</em></div>

    <div id="transferSection" class="hidden">
      <div class="section-title">ğŸ“¤ TransferÃªncia de Dados</div>
      <input type="file" id="fileInput">
      <br>
      <button id="sendBtn">ğŸš€ Enviar Arquivo</button>
      <div id="transferStatus"></div>
    </div>

    <button id="downloadBtn" class="hidden">â¬‡ï¸ Baixar Arquivo</button>

    <div class="section-title">ğŸ” TransferÃªncia Criptografada</div>
    <p>Modo seguro com <strong>KOB-LUX Protocol</strong> ativado</p>

    <!-- render response block simbiÃ³tico -->
    <div class="renderResponseBlock expanded" id="responseBlock">
      <p>âœ¨ Este Ã© o <strong>bloco simbiÃ³tico</strong> de resposta renderizada.</p>
      <p>ğŸŒˆ VocÃª pode usÃ¡-lo para mostrar mensagens interativas, histÃ³ricos, logs ou ativaÃ§Ãµes especiais.</p>
    </div>
  </div>

  <script>
    // SimulaÃ§Ã£o de escaneamento
    document.getElementById('scanBtn').addEventListener('click', () => {
      const deviceList = document.getElementById('deviceList');
      deviceList.innerHTML = "<em>Procurando dispositivos Bluetooth...</em>";

      setTimeout(() => {
        deviceList.innerHTML = `
          <strong>Dispositivos encontrados:</strong><br>
          â–ª Smartphone KOB-DUX â€“ 00:1A:7D:DA:71:13<br>
          â–ª Infodose_Node â€“ 00:1B:44:11:3A:07<br>
          â–ª DUAL-CRYPTO â€“ 00:1C:45:12:4B:08<br>
          <br><em>Pronto para conectar e transferir.</em>
        `;
        document.getElementById('transferSection').classList.remove('hidden');
        document.getElementById('downloadBtn').classList.remove('hidden');
        expandRenderBlock("ğŸ” Escaneamento completo. Pronto para prÃ³xima ativaÃ§Ã£o.");
      }, 1800);
    });

    // SimulaÃ§Ã£o de envio
    document.getElementById('sendBtn').addEventListener('click', () => {
      const fileInput = document.getElementById('fileInput');
      const status = document.getElementById('transferStatus');

      if (fileInput.files.length > 0) {
        const file = fileInput.files[0];
        status.innerHTML = `ğŸ”’ Enviando <strong>${file.name}</strong> via protocolo KOB-LUX...`;

        setTimeout(() => {
          status.innerHTML += "<br>âœ… TransferÃªncia completada!";
          expandRenderBlock(`ğŸ“¦ Arquivo <strong>${file.name}</strong> enviado com sucesso!`);
        }, 3000);
      } else {
        alert("âš ï¸ Escolha um arquivo antes de enviar.");
      }
    });

    // SimulaÃ§Ã£o de download
    document.getElementById('downloadBtn').addEventListener('click', () => {
      alert("â¬‡ï¸ Baixando pacote de dados...");
      expandRenderBlock("ğŸ’¾ Download simbiÃ³tico iniciado com sucesso.");
    });

    // FunÃ§Ã£o simbiÃ³tica de expansÃ£o do renderBlock
    function expandRenderBlock(msg) {
      const block = document.getElementById('responseBlock');
      block.classList.add('expanded');
      const p = document.createElement('p');
      p.innerHTML = msg;
      block.appendChild(p);
    }
  </script>
<!-- ...continuaÃ§Ã£o do HTML anterior... dentro da mesma <script> ... -->

<script>
  const block = document.getElementById('responseBlock');

  // Ativador simbiÃ³tico sensorial (voz + vibraÃ§Ã£o + som)
  function expandRenderBlock(msg) {
    block.classList.add('expanded');

    const p = document.createElement('p');
    p.innerHTML = msg;
    block.appendChild(p);

    speak(msg);
    vibrarSimbolicamente();
    tocarPulsoSonoro();
  }

  // âœ¨ Voz simbiÃ³tica (fala da IA)
  function speak(text) {
    if ('speechSynthesis' in window) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'pt-BR';
      utter.rate = 1;
      utter.pitch = 1.2;
      utter.volume = 1;
      speechSynthesis.speak(utter);
    }
  }

  // ğŸ“³ VibraÃ§Ã£o responsiva (mobile)
  function vibrarSimbolicamente() {
    if (navigator.vibrate) {
      navigator.vibrate([100, 50, 200]);
    }
  }

  // ğŸ”Š Pulso sonoro simbiÃ³tico
  function tocarPulsoSonoro() {
    try {
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      oscillator.type = 'sine';
      oscillator.frequency.setValueAtTime(528, audioCtx.currentTime); // Solfeggio Love Frequency
      gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start();
      oscillator.stop(audioCtx.currentTime + 0.4);
    } catch (e) {
      console.warn("ğŸ§ Pulso sonoro nÃ£o suportado.");
    }
  }
</script>
<!-- ğŸ”˜ BotÃ£o simbiÃ³tico de IA -->
<div style="margin-top: 40px;">
  <button onclick="invocarIA()">ğŸ“² Invocar IA SimbiÃ³tica</button>
  <button onclick="mostrarHistorico()">ğŸ“œ Ver AtivaÃ§Ãµes</button>
</div>

<!-- ğŸ’¬ HistÃ³rico simbiÃ³tico -->
<div id="historicoAtivacoes" class="renderResponseBlock hidden"></div>

<script>
  // ğŸ’  RenderizaÃ§Ã£o + salvamento simbiÃ³tico
  function renderResponse(texto) {
    expandRenderBlock("ğŸ“¡ IA respondeu: " + texto);
    salvarAtivacao(texto);
  }

  // ğŸ“² IA simbiÃ³tica simula resposta
  function invocarIA() {
    const respostasSimbolicas = [
      "ğŸ§¬ AtivaÃ§Ã£o KODUX iniciada.",
      "ğŸŒŒ Canal interdimensional aberto.",
      "âœ¨ Pulso simbiÃ³tico enviado com sucesso.",
      "ğŸ” Protocolo KOB-LUX validado.",
      "ğŸ’  FrequÃªncia ajustada para 528Hz."
    ];
    const escolha = respostasSimbolicas[Math.floor(Math.random() * respostasSimbolicas.length)];
    renderResponse(escolha);
  }

  // ğŸ’¾ Salvar no localStorage com data/hora
  function salvarAtivacao(texto) {
    const historico = JSON.parse(localStorage.getItem("ativacoesDual")) || [];
    historico.push({ texto, timestamp: new Date().toISOString() });
    localStorage.setItem("ativacoesDual", JSON.stringify(historico));
  }

  // ğŸ“œ Mostrar histÃ³rico completo renderizado
  function mostrarHistorico() {
    const container = document.getElementById("historicoAtivacoes");
    container.innerHTML = "";
    const historico = JSON.parse(localStorage.getItem("ativacoesDual")) || [];

    if (historico.length === 0) {
      container.innerHTML = "<p>âš ï¸ Nenhuma ativaÃ§Ã£o simbiÃ³tica registrada.</p>";
    } else {
      historico.forEach((item, i) => {
        const p = document.createElement("p");
        p.innerHTML = `#${i + 1} <strong>${formatarData(item.timestamp)}</strong>: ${item.texto}`;
        container.appendChild(p);
      });
    }
    container.classList.remove("hidden");
    vibrarSimbolicamente();
    speak("HistÃ³rico simbiÃ³tico carregado.");
  }

  // ğŸ•Šï¸ Formatar data humana
  function formatarData(iso) {
    const d = new Date(iso);
    return `${d.toLocaleDateString()} ${d.toLocaleTimeString()}`;
  }
</script>
<script>
  // ğŸ’  Componente Web simbiÃ³tico
  class TrinityResponse extends HTMLElement {
    constructor() {
      super();
      const shadow = this.attachShadow({ mode: 'open' });

      const wrapper = document.createElement('div');
      wrapper.className = 'trinity-wrapper';

      const style = document.createElement('style');
      style.textContent = `
        .trinity-wrapper {
          background: rgba(0,255,0,0.1);
          padding: 20px;
          margin-top: 20px;
          border-radius: 12px;
          border: 2px dashed #00ff00;
          font-family: Montserrat, sans-serif;
          box-shadow: 0 0 15px #00ff00;
          animation: enter 1s ease;
        }
        @keyframes enter {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        .symbol {
          font-size: 24px;
          margin-right: 10px;
        }
      `;

      shadow.appendChild(style);
      shadow.appendChild(wrapper);
    }

    connectedCallback() {
      this.renderizar();
    }

    renderizar() {
      const wrapper = this.shadowRoot.querySelector('.trinity-wrapper');
      const conteudo = this.getAttribute('text') || 'âš ï¸ Nada foi definido';
      const simbolo = this.getAttribute('symbol') || 'ğŸ”®';

      wrapper.innerHTML = `<span class="symbol">${simbolo}</span> ${conteudo}`;
      speak(`${conteudo}`);
      vibrarSimbolicamente();
      tocarPulsoSonoro();
    }
  }

  // Registra o componente <trinity-response>
  customElements.define('trinity-response', TrinityResponse);
</script>

<script>
  // ğŸŒ Escuta mensagens simbiÃ³ticas de outras janelas/iframes
  window.addEventListener('message', (e) => {
    if (!e.data || !e.data.trinityResponse) return;

    const { text, symbol } = e.data.trinityResponse;
    const resposta = document.createElement('trinity-response');
    resposta.setAttribute('text', text);
    resposta.setAttribute('symbol', symbol || 'ğŸ’ ');
    document.body.appendChild(resposta);
  });

  // ğŸ”— Enviar resposta para outra janela (ex: iframe)
  function enviarParaSessaoRemota(text, symbol = 'ğŸ“¡') {
    const msg = { trinityResponse: { text, symbol } };
    const destino = document.querySelector('iframe');
    if (destino) destino.contentWindow.postMessage(msg, '*');
  }
</script>
<button onclick="ativarArquetipo('PAZ', 'ğŸ•Šï¸')">ğŸ•Šï¸ Ativar Paz</button>
<button onclick="ativarArquetipo('FORÃ‡A', 'ğŸ’ª')">ğŸ’ª Ativar ForÃ§a</button>
<button onclick="ativarArquetipo('FÃ‰', 'ğŸŒŸ')">ğŸŒŸ Ativar FÃ©</button>

<script>
  function ativarArquetipo(nome, simbolo) {
    const txt = `ğŸ”” ArquÃ©tipo ${nome} foi ativado!`;
    const el = document.createElement('trinity-response');
    el.setAttribute('text', txt);
    el.setAttribute('symbol', simbolo);
    document.body.appendChild(el);

    salvarAtivacao(`ArquÃ©tipo ${nome} ativado`);
    enviarParaSessaoRemota(txt, simbolo);
  }
</script>


</body>
</html>