<!doctype html><html lang="pt-br"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dual CORE14K</title>
<style>
:root{--bg:#0b0d12;--fg:#e8ecf7;--acc:#8ab4ff;--mut:#9aa4b2}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font:500 14px/1.4 system-ui,-apple-system,Segoe UI,Roboto}
.header{padding:10px 12px;border-bottom:1px solid #151a22;display:flex;gap:8px;align-items:center}
h1{margin:0;font-size:14px;font-weight:700;letter-spacing:.2px}
.main{display:flex;flex-direction:column;height:calc(100dvh - 48px)}
.pages{flex:1;overflow:auto;padding:12px}
.pages-wrapper{display:grid;gap:10px}
.response-block{padding:10px 12px;border:1px solid #1a2030;border-radius:10px;background:#0e121a}
.controls{display:flex;gap:8px;align-items:center;padding:10px;border-top:1px solid #151a22}
.input-container{flex:1;display:flex;gap:8px}
.input-container input{flex:1;background:#0e121a;border:1px solid #1a2030;border-radius:10px;color:var(--fg);padding:8px 10px}
button{background:#111827;border:1px solid #1a2030;color:var(--fg);border-radius:10px;padding:8px 10px;cursor:pointer}
button:active{transform:scale(.98)}
.small{color:var(--mut);font-size:12px}
.hidden{display:none}
</style></head><body>
<div class="header"><h1>Dual CORE14K (n√∫cleo 1:1)</h1><span class="small" id="status">OK</span></div>
<div class="main">
  <div id="response" class="pages"><div class="pages-wrapper"></div></div>
  <div class="controls response-controls" id="ResponseControls">
    <div class="input-container" id="InputContainer">
      <input id="userInput" placeholder="Digite sua mensagem‚Ä¶"/>
    </div>
    <button id="sendBtn">Enviar</button>
    <button id="voiceBtn" title="Voice/Reset">üé§</button>
  </div>
</div>
<!-- Placeholders para compat -->
<div id="layoutTogglePanel" class="hidden"></div>
<div id="keymgrPanel" class="hidden"></div>
<div id="patchMgrPanel" class="hidden"></div>

<script>
(()=>{
  // N√∫cleo m√≠nimo: mant√©m assinatura de renderResponse e pipeline plug√°vel.
  const wrap = document.querySelector('.pages-wrapper');
  function el(tag, cls){ const n=document.createElement(tag); if(cls) n.className=cls; return n; }
  window.renderResponse = window.renderResponse || function(text){
    const b=el('div','response-block'); b.textContent=String(text??''); wrap.appendChild(b); wrap.parentElement.scrollTop=wrap.parentElement.scrollHeight;
  };
  const sendBtn = document.getElementById('sendBtn');
  const input = document.getElementById('userInput');
  const setStatus = (t)=> document.getElementById('status').textContent=t;
  async function pipelineSend(msg){
    setStatus('‚Ä¶');
    try{
      if (typeof window.__dual_send_request === 'function') {
        const out = await window.__dual_send_request(msg);
        window.renderResponse(out?.text ?? out ?? '[sem retorno]');
      } else if (typeof window.renderResponseCore === 'function') {
        window.renderResponseCore(msg);
      } else {
        window.renderResponse(msg);
      }
      setStatus('OK');
    }catch(e){ setStatus('ERR'); console.error(e); window.renderResponse('[erro no envio]'); }
  }
  function doSend(){ const v=input.value.trim(); if(!v) return; input.value=''; pipelineSend(v); }
  sendBtn.addEventListener('click', doSend);
  input.addEventListener('keydown', e=>{ if(e.key==='Enter'&&!e.shiftKey){ e.preventDefault(); doSend(); }});
  // API m√≠nima para integra√ß√£o externa
  window.__dual_core_send = pipelineSend;
  window.renderResponseCore = window.renderResponseCore || window.renderResponse;
})();
</script>
</body></html>