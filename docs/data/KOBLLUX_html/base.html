<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KOBLLUX Preview Fractal 3x6x9x7</title>
<style>
  /* Cores fractais KOBLLUX inspiradas: */
  :root {
    --bg: #01020a; /* fundo escuro */
    --fg: #d6f3ff; /* azul claro */
    --accent-3: #3f8efc; /* tom azul vibrante (3) */
    --accent-6: #6cc5ff; /* tom azul intermediário (6) */
    --accent-9: #c1e9ff; /* tom azul claro (9) */
    --accent-7: #8bc4f8; /* tom azul suave (7) */
    --border: #5a7cb8;
  }

  body {
    margin: 0; padding: 1rem;
    background: var(--bg);
    color: var(--fg);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  h1 {
    text-align: center;
    margin-bottom: 1rem;
    color: var(--accent-6);
    text-shadow: 0 0 6px var(--accent-9);
    user-select: none;
  }

  /* Container fractal 3x6x9x7 => grid 3x3 (9 blocos) com estilos fractais em camadas */
  .container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, auto);
    gap: 0.8rem;
    max-width: 960px;
    margin: 0 auto 2rem;
    background: linear-gradient(135deg, var(--accent-3), var(--accent-6));
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 0 15px var(--accent-9);
  }

  /* Input area que pode receber texto ou HTML */
  #inputArea {
    grid-column: 1 / 3; /* ocupa duas colunas para mais espaço */
    min-height: 150px;
    resize: vertical;
    font-family: monospace;
    font-size: 1rem;
    padding: 1rem;
    border-radius: 8px;
    border: 2px solid var(--border);
    background: var(--bg);
    color: var(--fg);
    box-shadow: inset 0 0 8px var(--accent-7);
  }

  /* Preview area */
  #preview {
    grid-column: 3 / 4;
    min-height: 150px;
    background: var(--bg);
    border-radius: 8px;
    border: 2px solid var(--border);
    box-shadow: inset 0 0 12px var(--accent-9);
    padding: 1rem;
    overflow: auto;
    color: var(--fg);
  }

  /* Botões */
  .btn {
    cursor: pointer;
    padding: 0.6rem 1.2rem;
    margin-top: 1rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    border: none;
    transition: background-color 0.3s ease;
    color: var(--bg);
    background: var(--accent-9);
    box-shadow: 0 0 10px var(--accent-7);
    user-select: none;
  }

  .btn:hover {
    background: var(--accent-6);
    box-shadow: 0 0 16px var(--accent-3);
  }

  /* Container do botão e input file alinhados */
  .controls {
    grid-column: 1 / 4;
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  /* Input file escondido visualmente, mas acionável pelo label */
  #fileInput {
    display: none;
  }

  label[for="fileInput"] {
    cursor: pointer;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    background: var(--accent-7);
    color: var(--bg);
    font-weight: 600;
    box-shadow: 0 0 8px var(--accent-9);
    user-select: none;
    transition: background-color 0.3s ease;
  }

  label[for="fileInput"]:hover {
    background: var(--accent-3);
    box-shadow: 0 0 12px var(--accent-6);
  }

  /* Responsivo */
  @media (max-width: 720px) {
    .container {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto auto;
    }
    #inputArea, #preview {
      grid-column: auto !important;
      min-height: 200px;
    }
    .controls {
      flex-direction: column;
    }
  }
</style>
</head>
<body>

<h1>KOBLLUX Preview Fractal 3×6×9×7</h1>

<div class="container">
  <textarea id="inputArea" placeholder="Cole texto ou código HTML aqui..."></textarea>
  <div id="preview" aria-live="polite" aria-label="Pré-visualização do conteúdo"></div>
  <div class="controls">
    <button id="btnProcess" class="btn" title="Processar entrada para preview">Processar Preview</button>
    <label for="fileInput" title="Carregar arquivo do dispositivo">Carregar Arquivo</label>
    <input type="file" id="fileInput" accept=".html,.txt,.htm" />
  </div>
</div>

<script>
  const inputArea = document.getElementById('inputArea');
  const preview = document.getElementById('preview');
  const btnProcess = document.getElementById('btnProcess');
  const fileInput = document.getElementById('fileInput');

  // Função para detectar se o conteúdo é HTML (simples heurística)
  function isHTML(text) {
    const htmlPattern = /<\/?[a-z][\s\S]*>/i;
    return htmlPattern.test(text);
  }

  // Função para processar o input e atualizar o preview
  function processPreview() {
    const content = inputArea.value.trim();
    if (!content) {
      preview.textContent = "Cole algum texto ou código HTML para ver o preview.";
      return;
    }
    if (isHTML(content)) {
      // Renderizar HTML como conteúdo do preview
      preview.innerHTML = content;
    } else {
      // Mostrar texto puro formatado, com linhas e destaque leve
      preview.textContent = content;
    }
  }

  btnProcess.addEventListener('click', processPreview);

  // Carregar arquivo selecionado e colocar no input
  fileInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(evt) {
      inputArea.value = evt.target.result;
      processPreview();
    };
    reader.readAsText(file);
  });

  // Processar automaticamente ao digitar
  inputArea.addEventListener('input', () => {
    // Pode adicionar debounce se quiser
    processPreview();
  });

  // Inicializa com mensagem padrão
  preview.textContent = "Cole algum texto ou código HTML para ver o preview.";
</script>

</body>
</html>